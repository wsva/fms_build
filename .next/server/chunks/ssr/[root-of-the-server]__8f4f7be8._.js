module.exports=[54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},80455,(a,b,c)=>{b.exports=a.x("jsdom",()=>require("jsdom"))},66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},85539,a=>{"use strict";a.s(["cacheBlobInMemory",()=>d,"dropWeakCache",()=>f,"getBlobFromWeakCache",()=>e]);let b=new Map,c=new FinalizationRegistry(a=>{b.delete(a)});function d(a,d){if("undefined"==typeof WeakRef)return;let e=new WeakRef(d);b.set(a,e);try{c.register(d,a,d)}catch(a){console.log(a)}}function e(a){let c=b.get(a);if(!c)return null;let d=c.deref();return d||(b.delete(a),null)}function f(a){b.delete(a)}},80768,a=>{"use strict";a.s(["deleteBlobFromIndexedDB",()=>f,"getBlobFromIndexedDB",()=>e,"saveBlobToIndexedDB",()=>d]);let b="blobs";function c(){return new Promise((a,c)=>{let d=indexedDB.open("audio-store",1);d.onupgradeneeded=a=>{let c=a.target.result;c.objectStoreNames.contains(b)||c.createObjectStore(b,{keyPath:"uuid"})},d.onsuccess=()=>{a(d.result)},d.onerror=()=>{c(d.error)}})}async function d(a,d){let e=await c();return new Promise((c,f)=>{let g=e.transaction(b,"readwrite").objectStore(b),h={uuid:a,audioBlob:d,createdAt:Date.now()},i=g.put(h);i.onsuccess=()=>c(),i.onerror=()=>f(i.error)})}async function e(a){let d=await c();return new Promise((c,e)=>{let f=d.transaction(b,"readonly").objectStore(b).get(a);f.onsuccess=()=>{let a=f.result;c(a?a.audioBlob:null)},f.onerror=()=>e(f.error)})}async function f(a){let d=await c();return new Promise((c,e)=>{let f=d.transaction(b,"readwrite").objectStore(b).delete(a);f.onsuccess=()=>c(),f.onerror=()=>e(f.error)})}},51466,a=>{"use strict";a.s(["saveAudio",()=>c]);var b=a.i(5050),c=(0,b.createServerReference)("704fb845cb65c49af3806a0f99f3ad17b0d06c4206",b.callServer,void 0,b.findSourceMapURL,"saveAudio")},97338,a=>{"use strict";a.s(["saveAudioDB",()=>c]);var b=a.i(5050),c=(0,b.createServerReference)("400cbd1f49c7d345ec1f9bec913d2a184765084d3f",b.callServer,void 0,b.findSourceMapURL,"saveAudioDB")},79952,a=>{"use strict";a.s(["default",()=>l]);var b=a.i(87924),c=a.i(68114),d=a.i(32496),e=a.i(4655),f=a.i(24647),g=a.i(72131),h=a.i(20094);a.i(97338);var i=a.i(85539),j=a.i(80768);a.i(51466);var k=a.i(84850);function l({uuid:a,user_id:l}){let[m,n]=(0,g.useState)(!1),[o,p]=(0,g.useState)("local"),[q,r]=(0,g.useState)(),[s,t]=(0,g.useState)([]),[u,v]=(0,g.useState)(!1),[w,x]=(0,g.useState)(!1),[y,z]=(0,g.useState)(),[A,B]=(0,g.useState)(""),[C,D]=(0,g.useState)(""),E=(0,g.useRef)(null),F=async()=>{B(""),D("");let b=async a=>{let b=(0,c.getUUID)();await (0,j.saveBlobToIndexedDB)(b,a),(0,i.cacheBlobInMemory)(b,a),B(URL.createObjectURL(a))},d=async(b,d)=>{let e=(0,c.getUUID)();console.log(e),await (0,j.saveBlobToIndexedDB)(e,d),(0,i.cacheBlobInMemory)(e,d),D(URL.createObjectURL(d)),z({uuid:e,user_id:l,text_uuid:a,recognized:"success"===b.status?b.data:"",audio_path:`/api/data/video/${e}.mp4`,created_by:l,created_at:new Date,updated_at:new Date}),"error"===b.status&&h.toast.error(b.error)};await (0,k.toggleRecording)({mode:"video",setStateStream:r,stateRecorder:s,setStateRecorder:t,stateRecording:u,setStateRecording:v,recognize:!0,sttEngine:o,setStateProcessing:x,handleVideo:b,handleAudio:d})};return(0,g.useEffect)(()=>{E.current&&q&&(E.current.srcObject=q)},[E,q]),(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center w-full my-10",children:[(0,b.jsxs)("div",{className:"flex flex-row justify-between items-center gap-2 mb-4",children:[(0,b.jsx)(e.Select,{"aria-label":"stt engine",className:"max-w-sm",selectedKeys:[o],onChange:a=>p(a.target.value),startContent:(0,b.jsx)("div",{className:"whitespace-nowrap font-bold",children:"AI Engine"}),children:k.EngineList.map(a=>(0,b.jsx)(f.SelectItem,{textValue:a.value,children:a.value},a.key))}),(0,b.jsx)(d.Button,{color:"primary",size:"sm",onPress:F,children:u?"Stop":"Start"})]}),u&&(0,b.jsx)("video",{ref:E,autoPlay:!0,muted:!0,playsInline:!0}),!u&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[!!A&&(0,b.jsx)("video",{controls:!0,src:A}),!!C&&(0,b.jsx)("audio",{controls:!0,src:C})]}),(0,b.jsxs)("div",{className:"mt-4 text-sm text-gray-700",children:[w&&"recognizing the audio ...",y?.recognized&&(0,b.jsx)("div",{className:"p-2 border rounded-md bg-gray-50 mt-2",children:y.recognized})]})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8f4f7be8._.js.map