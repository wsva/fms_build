module.exports=[81628,a=>{"use strict";a.s(["default",()=>o],81628);var b=a.i(87924),c=a.i(72131),d=a.i(5050),e=(0,d.createServerReference)("6045caba1f9d6637065a1fd5d7595a7436fc013cde",d.callServer,void 0,d.findSourceMapURL,"getTorstenVoice"),f=a.i(32496),g=a.i(95032),h=a.i(13046),i=a.i(27700),j=a.i(18745),k=a.i(328),l=a.i(60568);let m=({row:a})=>{let[d,e]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),q=(0,c.useRef)([]),r=(0,c.useRef)(null),s=async()=>{if(!d){let a=new MediaRecorder(await navigator.mediaDevices.getUserMedia({audio:!0}));r.current=a,q.current=[],a.ondataavailable=a=>q.current.push(a.data),a.start(),e(!0)}if(d&&r.current){let a=r.current;a.stop(),e(!1),n("Transcribing..."),a.onstop=async()=>{let a=new Blob(q.current,{type:"audio/wav"});if(!a||0===a.size)return void console.warn("Empty audio blob â€” skipping transcription.");n(await (0,l.recognizeAudio)(a)),q.current=[],r.current=null}}},t=async()=>{n("Transcribing...");let b=await fetch(`/torsten_voice/${a.source}/${a.id}.wav`),c=await b.blob();n(await (0,l.recognizeAudio)(c))};return(0,b.jsxs)("div",{className:"card shadow-sm p-3 bg-sand-300 hover:-translate-y-1 transition-transform",children:[(0,b.jsxs)("div",{className:"card-subtitle mb-2 text-muted flex justify-between items-center",children:[(0,b.jsx)(f.Button,{isIconOnly:!0,variant:"light",size:"sm",onPress:()=>{new Audio(`/api/data/torsten_voice/${a.source}/${a.id}.wav`).play()},children:(0,b.jsx)(k.MdPlayCircle,{size:30})}),(0,b.jsxs)(g.Dropdown,{placement:"bottom-end",children:[(0,b.jsx)(j.DropdownTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{isIconOnly:!0,variant:"light",title:"More options",children:(0,b.jsx)(k.MdMoreVert,{size:24})})}),(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(h.DropdownItem,{onPress:t,children:"Transcribe Original Audio"},"original"),(0,b.jsx)(h.DropdownItem,{onPress:()=>{let b=`/api/data/torsten_voice/${a.source}/${a.id}.wav`;window.open(b,"_blank")},children:"Download Original Audio"},"download")]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[(0,b.jsx)(f.Button,{size:"sm",onPress:s,children:d?"Stop Recording":"Speaking"}),(0,b.jsx)(f.Button,{size:"sm",onPress:()=>p(!o),children:"Answer"})]}),m?(0,b.jsx)("div",{className:"mt-2 border rounded p-2 bg-light",children:m}):null,o?(0,b.jsxs)("div",{className:"mt-2 border rounded p-2 bg-light",children:[(0,b.jsx)("p",{children:a.text}),(0,b.jsx)("br",{}),(0,b.jsx)("p",{children:`subset: ${a.subset}, style: ${a.style}`})]}):null]})};var n=a.i(73836);function o(){let[a,d]=(0,c.useState)(""),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(1),[l,o]=(0,c.useState)(0),p=async a=>{g(!0);let b=await e(a,20);"success"===b.status?(i(b.data),o(b.total_pages||0)):d(b.error),g(!1)};return(0,c.useEffect)(()=>{p(1)},[]),(0,b.jsxs)("div",{className:"container py-4",children:[a?(0,b.jsx)("div",{children:a}):null,(0,b.jsxs)("div",{className:"flex flex-row w-full items-center justify-center gap-4",children:[(0,b.jsx)("div",{children:"Page"}),(0,b.jsx)(n.Pagination,{showControls:!0,loop:!0,variant:"bordered",total:l,page:j,isDisabled:f,onChange:a=>{k(a),p(a)}})]}),h?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 my-4",children:h.map(a=>(0,b.jsx)(m,{row:a},a.id))}):null,(0,b.jsxs)("div",{className:"flex flex-row w-full items-center justify-center gap-4",children:[(0,b.jsx)("div",{children:"Page"}),(0,b.jsx)(n.Pagination,{showControls:!0,loop:!0,variant:"bordered",total:l,page:j,isDisabled:f,onChange:a=>{k(a),p(a)}})]})]})}}];

//# sourceMappingURL=src_app_speak_torsten_voice_page_tsx_e11303cd._.js.map