module.exports=[254799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},666680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},384476,a=>{"use strict";a.s(["Textarea",()=>C],384476);var b=a.i(647531),c=a.i(605554),d=a.i(665248),e=a.i(572131);function f(){return(f=Object.assign.bind()).apply(null,arguments)}var g="undefined"!=typeof document?e.useLayoutEffect:function(){},h=function(a){var b=e.default.useRef(a);return g(function(){b.current=a}),b},i=function(a,b){if("function"==typeof a)return void a(b);a.current=b},j=function(a,b){var c=e.default.useRef();return e.default.useCallback(function(d){a.current=d,c.current&&i(c.current,null),c.current=b,b&&i(b,d)},[b])},k="undefined"!=typeof document,l={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},m=function(a){Object.keys(l).forEach(function(b){a.style.setProperty(b,l[b],"important")})},n=null,o=function(a,b){var c=a.scrollHeight;return"border-box"===b.sizingStyle.boxSizing?c+b.borderSize:c-b.paddingSize},p=function(){},q=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],r=!!k&&!!document.documentElement.currentStyle,s=function(a){var b=window.getComputedStyle(a);if(null===b)return null;var c=q.reduce(function(a,c){return a[c]=b[c],a},{}),d=c.boxSizing;if(""===d)return null;r&&"border-box"===d&&(c.width=parseFloat(c.width)+parseFloat(c.borderRightWidth)+parseFloat(c.borderLeftWidth)+parseFloat(c.paddingRight)+parseFloat(c.paddingLeft)+"px");var e=parseFloat(c.paddingBottom)+parseFloat(c.paddingTop),f=parseFloat(c.borderBottomWidth)+parseFloat(c.borderTopWidth);return{sizingStyle:c,paddingSize:e,borderSize:f}};function t(a,b,c){var d=h(c);e.useLayoutEffect(function(){var c=function(a){return d.current(a)};if(a)return a.addEventListener(b,c),function(){return a.removeEventListener(b,c)}},[])}var u=function(a,b){t(document.body,"reset",function(c){a.current.form===c.target&&b(c)})},v=function(a){t(window,"resize",a)},w=function(a){t(document.fonts,"loadingdone",a)},x=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],y=e.forwardRef(function(a,b){var c=a.cacheMeasurements,d=a.maxRows,g=a.minRows,h=a.onChange,i=void 0===h?p:h,l=a.onHeightChange,q=void 0===l?p:l,r=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,x),t=void 0!==r.value,y=e.useRef(null),z=j(y,b),A=e.useRef(0),B=e.useRef(),C=function(){var a=y.current,b=c&&B.current?B.current:s(a);if(b){B.current=b;var e,f,h,i,j,k,l,p,r,t,u,v=(e=a.value||a.placeholder||"x",void 0===(f=g)&&(f=1),void 0===(h=d)&&(h=1/0),n||((n=document.createElement("textarea")).setAttribute("tabindex","-1"),n.setAttribute("aria-hidden","true"),m(n)),null===n.parentNode&&document.body.appendChild(n),i=b.paddingSize,j=b.borderSize,l=(k=b.sizingStyle).boxSizing,Object.keys(k).forEach(function(a){n.style[a]=k[a]}),m(n),n.value=e,p=o(n,b),n.value=e,p=o(n,b),n.value="x",t=(r=n.scrollHeight-i)*f,"border-box"===l&&(t=t+i+j),p=Math.max(t,p),u=r*h,"border-box"===l&&(u=u+i+j),[p=Math.min(u,p),r]),w=v[0],x=v[1];A.current!==w&&(A.current=w,a.style.setProperty("height",w+"px","important"),q(w,{rowHeight:x}))}};return k?(e.useLayoutEffect(C),u(y,function(){if(!t){var a=y.current.value;requestAnimationFrame(function(){var b=y.current;b&&a!==b.value&&C()})}}),v(C),w(C),e.createElement("textarea",f({},r,{onChange:function(a){t||C(),i(a)},ref:z}))):e.createElement("textarea",f({},r,{onChange:i,ref:z}))}),z=a.i(168424),A=a.i(187924),B=(0,d.forwardRef)(({style:a,minRows:d=3,maxRows:f=8,cacheMeasurements:g=!1,disableAutosize:h=!1,onHeightChange:i,...j},k)=>{let{Component:l,label:m,description:n,startContent:o,endContent:p,hasHelper:q,shouldLabelBeOutside:r,shouldLabelBeInside:s,isInvalid:t,errorMessage:u,getBaseProps:v,getLabelProps:w,getInputProps:x,getInnerWrapperProps:B,getInputWrapperProps:C,getHelperWrapperProps:D,getDescriptionProps:E,getErrorMessageProps:F,isClearable:G,getClearButtonProps:H}=(0,b.useInput)({...j,ref:k,isMultiline:!0}),[I,J]=(0,e.useState)(d>1),[K,L]=(0,e.useState)(!1),M=m?(0,A.jsx)("label",{...w(),children:m}):null,N=x(),O=h?(0,A.jsx)("textarea",{...N,style:(0,c.mergeProps)(N.style,null!=a?a:{})}):(0,A.jsx)(y,{...N,cacheMeasurements:g,"data-hide-scroll":(0,c.dataAttr)(!K),maxRows:f,minRows:d,style:(0,c.mergeProps)(N.style,null!=a?a:{}),onHeightChange:(a,b)=>{1===d&&J(a>=2*b.rowHeight),f>d&&L(a>=f*b.rowHeight),null==i||i(a,b)}}),P=(0,e.useMemo)(()=>G?(0,A.jsx)("button",{...H(),children:(0,A.jsx)(z.CloseFilledIcon,{})}):null,[G,H]),Q=(0,e.useMemo)(()=>o||p?(0,A.jsxs)("div",{...B(),children:[o,O,p]}):(0,A.jsx)("div",{...B(),children:O}),[o,N,p,B]),R=t&&u,S=R||n;return(0,A.jsxs)(l,{...v(),children:[r?M:null,(0,A.jsxs)("div",{...C(),"data-has-multiple-rows":(0,c.dataAttr)(I),children:[s?M:null,Q,P]}),q&&S?(0,A.jsx)("div",{...D(),children:R?(0,A.jsx)("div",{...F(),children:u}):(0,A.jsx)("div",{...E(),children:n})}):null]})});B.displayName="HeroUI.Textarea";var C=B},804918,a=>{"use strict";a.s(["getCardAll",()=>c]);var b=a.i(405050),c=(0,b.createServerReference)("7e36e321c66677073eb05fba92384a76adbb73cc62",b.callServer,void 0,b.findSourceMapURL,"getCardAll")},628231,a=>{"use strict";a.s(["removeCard",()=>c]);var b=a.i(405050),c=(0,b.createServerReference)("40727b1e616ec7abbe293846fd5a9d55b88dc20741",b.callServer,void 0,b.findSourceMapURL,"removeCard")},562036,471040,a=>{"use strict";a.s(["default",()=>o],562036);var b=a.i(187924),c=a.i(405050),d=(0,c.createServerReference)("401b59ee0de5bd29ad1e4d02c7a1b9006d3b46321c",c.callServer,void 0,c.findSourceMapURL,"getBookAll"),e=(0,c.createServerReference)("40884b1d33ab38ad5efe5df3cf1e0a906b4a9f559d",c.callServer,void 0,c.findSourceMapURL,"removeBook"),f=(0,c.createServerReference)("409a14c252bc7928ba5d11dc757cd5373cfa7483c6",c.callServer,void 0,c.findSourceMapURL,"saveBook"),g=a.i(368114),h=a.i(118344),i=a.i(332496),j=a.i(27493),k=a.i(375090),l=a.i(904655),m=a.i(924647),n=a.i(572131);function o({user_id:a,onSelect:c}){let[o,p]=(0,n.useState)([]),[q,r]=(0,n.useState)(1),[s,t]=(0,n.useState)(""),[u,v]=(0,n.useState)(!1),[w,x]=(0,n.useState)(!1),[y,z]=(0,n.useState)(!1),A=async()=>{x(!0);let b=await f({uuid:(0,g.getUUID)(),user_id:a,name:s,created_by:a,created_at:new Date,updated_at:new Date});"success"===b.status?(t(""),r(a=>a+1)):(console.log(b.error),(0,h.addToast)({title:"save data error",color:"danger"})),x(!1)},B=async a=>{x(!0);let b=await e(a);"success"===b.status?r(a=>a+1):(console.log(b.error),(0,h.addToast)({title:"remove data error",color:"danger"})),x(!1)};return(0,n.useEffect)(()=>{(async()=>{z(!0);let b=await d(a);"success"===b.status?p(b.data):(console.log(b.error),(0,h.addToast)({title:"load data error",color:"danger"})),z(!1)})()},[a,q]),(0,b.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,b.jsx)(l.Select,{label:"Select book",onChange:async a=>{let b=a.target.value;await c(b)},endContent:y&&(0,b.jsx)(j.CircularProgress,{"aria-label":"Loading...",color:"default"}),children:o.map(a=>(0,b.jsx)(m.SelectItem,{textValue:a.name,children:a.name},a.uuid))}),(0,b.jsx)("div",{className:"flex flex-row gap-1",children:(0,b.jsx)(i.Button,{size:"sm",radius:"full",onPress:()=>v(!u),children:u?"finish":"edit"})}),u&&(0,b.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,b.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 mx-0",children:[(0,b.jsx)(k.Input,{label:"Name",labelPlacement:"outside-left",size:"sm",classNames:{mainWrapper:"w-full"},onChange:a=>t(a.target.value)}),(0,b.jsx)(i.Button,{size:"sm",isDisabled:w,onPress:A,children:"add"})]}),o.map(a=>(0,b.jsxs)("div",{className:"flex flex-row items-center justify-start px-2 gap-2 bg-sand-300",children:[a.name,(0,b.jsx)(i.Button,{size:"sm",isDisabled:w,onPress:()=>B(a.uuid),children:"delete"})]},a.uuid))]})]})}a.s(["default",()=>s],471040);var p=(0,c.createServerReference)("40fd37cff8e78bba7d9bb9d9b351bef4d6c7cf0379",c.callServer,void 0,c.findSourceMapURL,"getChapterAll"),q=(0,c.createServerReference)("405d943d0fa011231e8228e51a5131c47510742c68",c.callServer,void 0,c.findSourceMapURL,"removeChapter"),r=(0,c.createServerReference)("403354d55013ba4b6f752a5ebaf651ebbd981ffb37",c.callServer,void 0,c.findSourceMapURL,"saveChapter");function s({user_id:a,book_uuid:c,onSelect:d}){let[e,f]=(0,n.useState)([]),[o,s]=(0,n.useState)(1),[t,u]=(0,n.useState)(""),[v,w]=(0,n.useState)(""),[x,y]=(0,n.useState)(!1),[z,A]=(0,n.useState)(!1),[B,C]=(0,n.useState)(!1),D=async()=>{if(!c)return void(0,h.addToast)({title:"no book selected",color:"danger"});A(!0);let b=await r({uuid:(0,g.getUUID)(),book_uuid:c,order_num:parseInt(t,10),name:v,created_by:a,created_at:new Date,updated_at:new Date});"success"===b.status?(w(""),s(a=>a+1)):(console.log(b.error),(0,h.addToast)({title:"save data error",color:"danger"})),A(!1)},E=async a=>{A(!0);let b=await q(a);"success"===b.status?s(a=>a+1):(console.log(b.error),(0,h.addToast)({title:"remove data error",color:"danger"})),A(!1)};return(0,n.useEffect)(()=>{(async()=>{if(!c)return;C(!0);let a=await p(c);"success"===a.status?f(a.data):(console.log(a.error),(0,h.addToast)({title:"load data error",color:"danger"})),C(!1)})()},[c,o]),(0,b.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,b.jsx)(l.Select,{label:"Select chapter",onChange:async a=>{let b=a.target.value;await d(b)},endContent:B&&(0,b.jsx)(j.CircularProgress,{"aria-label":"Loading...",color:"default"}),children:e.map(a=>(0,b.jsxs)(m.SelectItem,{textValue:`${a.order_num}, ${a.name}`,children:[a.order_num,", ",a.name]},a.uuid))}),(0,b.jsx)("div",{className:"flex flex-row gap-1",children:(0,b.jsx)(i.Button,{size:"sm",radius:"full",onPress:()=>y(!x),children:x?"finish":"edit"})}),x&&(0,b.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,b.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,b.jsx)(k.Input,{label:"Order",labelPlacement:"outside-left",type:"number",size:"sm",className:"w-2/5",onChange:a=>u(a.target.value)}),(0,b.jsx)(k.Input,{label:"Name",labelPlacement:"outside-left",size:"sm",classNames:{mainWrapper:"w-full"},onChange:a=>w(a.target.value)}),(0,b.jsx)(i.Button,{size:"sm",isDisabled:z,onPress:D,children:"add"})]}),e.map(a=>(0,b.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 bg-sand-300",children:[a.order_num," - ",a.name,(0,b.jsx)(i.Button,{size:"sm",isDisabled:z,onPress:()=>E(a.uuid),children:"delete"})]},a.uuid))]})]})}},485312,a=>{"use strict";a.s(["Item",()=>u,"default",()=>v]);var b=a.i(187924),c=a.i(572131),d=a.i(763490),e=a.i(118344),f=a.i(332496),g=a.i(27493),h=a.i(173836),i=a.i(972571),j=a.i(384476),k=a.i(688206),l=a.i(368114),m=a.i(562036),n=a.i(471040),o=a.i(100328),p=a.i(804918),q=a.i(628231),r=a.i(388966),s=a.i(359911),t=a.i(909938);function u({item:a,handleUpdate:d,handleDelete:e}){let[g,h]=(0,c.useState)(!1),[i,l]=(0,c.useState)(a);return(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[(0,b.jsx)(f.Button,{variant:"solid",color:"primary",id:"button-add-save",onPress:()=>h(!g),children:g?"Cancel":"Edit"}),g&&(0,b.jsx)(f.Button,{variant:"solid",color:"primary",id:"button-add-save",onPress:async()=>await d(i),children:"Save"}),(0,b.jsx)(k.Tooltip,{placement:"top",content:"delete",children:(0,b.jsx)(f.Button,{isIconOnly:!0,variant:"light",color:"danger",className:"w-fit h-fit",onPress:async()=>{window.confirm("Are you sure to delete?")&&await e(a)},children:(0,b.jsx)(o.MdDelete,{size:20})})})]}),g?(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)(j.Textarea,{label:"sentence",classNames:{input:"text-xl leading-tight font-roboto"},value:i.question,onChange:a=>l({...i,question:a.target.value})}),(0,b.jsx)(j.Textarea,{label:"note",classNames:{input:"text-xl leading-tight font-roboto"},value:i.answer,onChange:a=>l({...i,answer:a.target.value})})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{children:i.question}),(0,b.jsx)("div",{children:i.answer})]})]})}function v({user_id:a}){let[k,o]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(),[z,A]=(0,d.useImmer)([]),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(1),[H,I]=(0,c.useState)(0),J=(0,c.useMemo)(()=>z.slice().reverse(),[z]),K=async b=>{C(!0);let c=await (0,p.getCardAll)(a,t.FilterType.Unspecified,b,"",F,20);"success"===c.status&&(I(c.total_pages||0),A(a=>{for(let b of(a.length=0,c.data))a.push(b)})),C(!1)},L=async a=>{let b=await (0,r.saveCard)(a);if("success"!==b.status){console.log(b.error),(0,e.addToast)({title:"save data error",color:"danger"});return}A(b=>{let c=b.findIndex(b=>b.uuid===a.uuid);c>=0&&(b[c]={...a})})},M=async a=>{let b=await (0,q.removeCard)(a.uuid);if("success"!==b.status){console.log(b.error),(0,e.addToast)({title:"remove data error",color:"danger"});return}A(b=>{let c=b.findIndex(b=>b.uuid===a.uuid);c>=0&&b.splice(c,1)}),(0,e.addToast)({title:"remove data success",color:"success"})},N=async()=>{if(!x||!x.question||!x.answer)return;E(!0);let b={uuid:(0,l.getUUID)(),user_id:a,question:x.question,suggestion:"",answer:x.answer,familiarity:0,note:"",created_at:new Date,updated_at:new Date},c=await (0,r.saveCard)(b);if("error"===c.status){console.log(c.error),(0,e.addToast)({title:"save data error",color:"danger"}),E(!1);return}let d=await (0,s.saveCardTag)({...b,tag_list_new:[v]});if("error"===d.status){console.log(d.error),(0,e.addToast)({title:"save data error",color:"danger"}),E(!1);return}A(a=>{a.push(b)}),y(void 0),(0,e.addToast)({title:"save data success",color:"success"}),E(!1)};return(0,c.useEffect)(()=>{let a=a=>{if(a.ctrlKey&&"s"===a.key){a.preventDefault();let b=document.getElementById("button-add-save");b?.click()}};return document.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[]),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 my-4",children:[(0,b.jsx)(m.default,{user_id:a,onSelect:async a=>{o(a)}}),(0,b.jsx)(n.default,{user_id:a,book_uuid:k,onSelect:async a=>{w(a),y(void 0),await K(a)}})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)(j.Textarea,{label:"sentence",classNames:{input:"text-xl leading-tight font-roboto"},value:x?.question,onChange:a=>y({...x,question:a.target.value})}),(0,b.jsx)(j.Textarea,{label:"note",classNames:{input:"text-xl leading-tight font-roboto"},value:x?.answer,onChange:a=>y({...x,answer:a.target.value})}),(0,b.jsx)(f.Button,{variant:"solid",color:"primary",id:"button-add-save",isDisabled:!x||D,onPress:N,children:"Add & Save (Ctrl+S)"})]}),B&&(0,b.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4 my-4",children:(0,b.jsx)(i.Spinner,{classNames:{label:"text-foreground mt-4"},variant:"simple"})}),B?(0,b.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4",children:(0,b.jsx)(g.CircularProgress,{label:"Loading..."})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,b.jsx)("div",{children:"Page"}),(0,b.jsx)(h.Pagination,{showControls:!0,loop:!0,variant:"bordered",total:H,page:F,onChange:G})]}),(0,b.jsx)("div",{className:"flex flex-col w-full gap-4 my-4",children:J.map((a,c)=>(0,b.jsx)(u,{item:a,handleUpdate:L,handleDelete:M},`${c}-${a.uuid}`))}),(0,b.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,b.jsx)("div",{children:"Page"}),(0,b.jsx)(h.Pagination,{showControls:!0,loop:!0,variant:"bordered",total:H,page:F,onChange:G})]})]})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ffd59e3f._.js.map