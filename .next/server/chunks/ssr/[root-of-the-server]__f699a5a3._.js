module.exports=[54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},80455,(a,b,c)=>{b.exports=a.x("jsdom",()=>require("jsdom"))},66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},84476,a=>{"use strict";a.s(["Textarea",()=>C],84476);var b=a.i(47531),c=a.i(5554),d=a.i(65248),e=a.i(72131);function f(){return(f=Object.assign.bind()).apply(null,arguments)}var g="undefined"!=typeof document?e.useLayoutEffect:function(){},h=function(a){var b=e.default.useRef(a);return g(function(){b.current=a}),b},i=function(a,b){if("function"==typeof a)return void a(b);a.current=b},j=function(a,b){var c=e.default.useRef();return e.default.useCallback(function(d){a.current=d,c.current&&i(c.current,null),c.current=b,b&&i(b,d)},[b])},k="undefined"!=typeof document,l={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},m=function(a){Object.keys(l).forEach(function(b){a.style.setProperty(b,l[b],"important")})},n=null,o=function(a,b){var c=a.scrollHeight;return"border-box"===b.sizingStyle.boxSizing?c+b.borderSize:c-b.paddingSize},p=function(){},q=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],r=!!k&&!!document.documentElement.currentStyle,s=function(a){var b=window.getComputedStyle(a);if(null===b)return null;var c=q.reduce(function(a,c){return a[c]=b[c],a},{}),d=c.boxSizing;if(""===d)return null;r&&"border-box"===d&&(c.width=parseFloat(c.width)+parseFloat(c.borderRightWidth)+parseFloat(c.borderLeftWidth)+parseFloat(c.paddingRight)+parseFloat(c.paddingLeft)+"px");var e=parseFloat(c.paddingBottom)+parseFloat(c.paddingTop),f=parseFloat(c.borderBottomWidth)+parseFloat(c.borderTopWidth);return{sizingStyle:c,paddingSize:e,borderSize:f}};function t(a,b,c){var d=h(c);e.useLayoutEffect(function(){var c=function(a){return d.current(a)};if(a)return a.addEventListener(b,c),function(){return a.removeEventListener(b,c)}},[])}var u=function(a,b){t(document.body,"reset",function(c){a.current.form===c.target&&b(c)})},v=function(a){t(window,"resize",a)},w=function(a){t(document.fonts,"loadingdone",a)},x=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],y=e.forwardRef(function(a,b){var c=a.cacheMeasurements,d=a.maxRows,g=a.minRows,h=a.onChange,i=void 0===h?p:h,l=a.onHeightChange,q=void 0===l?p:l,r=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,x),t=void 0!==r.value,y=e.useRef(null),z=j(y,b),A=e.useRef(0),B=e.useRef(),C=function(){var a=y.current,b=c&&B.current?B.current:s(a);if(b){B.current=b;var e,f,h,i,j,k,l,p,r,t,u,v=(e=a.value||a.placeholder||"x",void 0===(f=g)&&(f=1),void 0===(h=d)&&(h=1/0),n||((n=document.createElement("textarea")).setAttribute("tabindex","-1"),n.setAttribute("aria-hidden","true"),m(n)),null===n.parentNode&&document.body.appendChild(n),i=b.paddingSize,j=b.borderSize,l=(k=b.sizingStyle).boxSizing,Object.keys(k).forEach(function(a){n.style[a]=k[a]}),m(n),n.value=e,p=o(n,b),n.value=e,p=o(n,b),n.value="x",t=(r=n.scrollHeight-i)*f,"border-box"===l&&(t=t+i+j),p=Math.max(t,p),u=r*h,"border-box"===l&&(u=u+i+j),[p=Math.min(u,p),r]),w=v[0],x=v[1];A.current!==w&&(A.current=w,a.style.setProperty("height",w+"px","important"),q(w,{rowHeight:x}))}};return k?(e.useLayoutEffect(C),u(y,function(){if(!t){var a=y.current.value;requestAnimationFrame(function(){var b=y.current;b&&a!==b.value&&C()})}}),v(C),w(C),e.createElement("textarea",f({},r,{onChange:function(a){t||C(),i(a)},ref:z}))):e.createElement("textarea",f({},r,{onChange:i,ref:z}))}),z=a.i(68424),A=a.i(87924),B=(0,d.forwardRef)(({style:a,minRows:d=3,maxRows:f=8,cacheMeasurements:g=!1,disableAutosize:h=!1,onHeightChange:i,...j},k)=>{let{Component:l,label:m,description:n,startContent:o,endContent:p,hasHelper:q,shouldLabelBeOutside:r,shouldLabelBeInside:s,isInvalid:t,errorMessage:u,getBaseProps:v,getLabelProps:w,getInputProps:x,getInnerWrapperProps:B,getInputWrapperProps:C,getHelperWrapperProps:D,getDescriptionProps:E,getErrorMessageProps:F,isClearable:G,getClearButtonProps:H}=(0,b.useInput)({...j,ref:k,isMultiline:!0}),[I,J]=(0,e.useState)(d>1),[K,L]=(0,e.useState)(!1),M=m?(0,A.jsx)("label",{...w(),children:m}):null,N=x(),O=h?(0,A.jsx)("textarea",{...N,style:(0,c.mergeProps)(N.style,null!=a?a:{})}):(0,A.jsx)(y,{...N,cacheMeasurements:g,"data-hide-scroll":(0,c.dataAttr)(!K),maxRows:f,minRows:d,style:(0,c.mergeProps)(N.style,null!=a?a:{}),onHeightChange:(a,b)=>{1===d&&J(a>=2*b.rowHeight),f>d&&L(a>=f*b.rowHeight),null==i||i(a,b)}}),P=(0,e.useMemo)(()=>G?(0,A.jsx)("button",{...H(),children:(0,A.jsx)(z.CloseFilledIcon,{})}):null,[G,H]),Q=(0,e.useMemo)(()=>o||p?(0,A.jsxs)("div",{...B(),children:[o,O,p]}):(0,A.jsx)("div",{...B(),children:O}),[o,N,p,B]),R=t&&u,S=R||n;return(0,A.jsxs)(l,{...v(),children:[r?M:null,(0,A.jsxs)("div",{...C(),"data-has-multiple-rows":(0,c.dataAttr)(I),children:[s?M:null,Q,P]}),q&&S?(0,A.jsx)("div",{...D(),children:R?(0,A.jsx)("div",{...F(),children:u}):(0,A.jsx)("div",{...E(),children:n})}):null]})});B.displayName="HeroUI.Textarea";var C=B},33651,a=>{"use strict";a.s(["searchExample",()=>c]);var b=a.i(5050),c=(0,b.createServerReference)("40e6b84e1912326415f64309a4f12e506cb7056dfd",b.callServer,void 0,b.findSourceMapURL,"searchExample")},55037,a=>{"use strict";a.s(["default",()=>y],55037);var b=a.i(87924),c=a.i(32496),d=a.i(60955),e=a.i(95032),f=a.i(18745),g=a.i(27700),h=a.i(13046),i=a.i(84476),j=a.i(40253),k=a.i(47977),l=a.i(27493),m=a.i(75090),n=a.i(72131),o=a.i(68114),p=a.i(39154),q=a.i(5050),r=(0,q.createServerReference)("60dbb1fcb4309591233b8a3b71949ee5c39284467a",q.callServer,void 0,q.findSourceMapURL,"getCardTest"),s=(0,q.createServerReference)("40274549507c16078f117775b5b674dce4b2d0c086",q.callServer,void 0,q.findSourceMapURL,"getCardTestByUUID"),t=(0,q.createServerReference)("40c08c1ecdd4d1c1db81d5ca5066ba9024267a3b2a",q.callServer,void 0,q.findSourceMapURL,"getTag"),u=(0,q.createServerReference)("40fb08000e9b6f93b5adc59ebe578dd89a785d9f61",q.callServer,void 0,q.findSourceMapURL,"saveCardReview"),v=a.i(9938),w=a.i(20094),x=a.i(33651);function y({user_id:a,tag_uuid:q,card_uuid:y}){let[z,A]=(0,n.useState)(),[B,C]=(0,n.useState)(),[D,E]=(0,n.useState)(!1),[F,G]=(0,n.useState)(!1),[H,I]=(0,n.useState)(""),[J,K]=(0,n.useState)([]),[L,M]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{let b=await t(q);if("success"===b.status&&A(b.data),y){let a=await s(y);"success"===a.status&&C(a.data)}else if(a&&q){let b=await r(a,q);"success"===b.status&&C(b.data)}})()},[y,q,a]);let N=a=>v.FamiliarityList.map(a=>a.color)[a],O=async b=>{if(!B)return;if(a!==B.user_id)return void w.toast.error("this is not your card");let{repetitions:c,interval_days:d,ease_factor:e}=B;d||(d=0),e||(e=0),c||(c=0),b<3?(c=0,d=1):(d=0===c?1:1===c?6:Math.round(d*e),c+=1),(e+=.1-(5-b)*(.08+(5-b)*.02))<1.3&&(e=1.3);let f=new Date;f.setDate(f.getDate()+d),await u({uuid:B.uuid,card_uuid:B.card_uuid,user_id:B.user_id,interval_days:d,ease_factor:e,repetitions:c,familiarity:b,last_review_at:new Date,next_review_at:f})?window.location.reload():w.toast.error("save review error")};return(0,b.jsx)(b.Fragment,{children:B?(0,b.jsxs)("div",{className:"flex flex-col my-5 mx-5",children:[(0,b.jsxs)("div",{className:"flex flex-row gap-4 items-center justify-center",children:[(0,b.jsxs)("div",{className:"w-full",children:["Tag: ",z?.tag]}),(0,b.jsx)(c.Button,{as:k.Link,size:"sm",target:"_blank",color:"secondary",href:`/card/${B.uuid}/?edit=y`,children:"Edit"}),(0,b.jsx)(c.Button,{size:"sm",color:"secondary",onPress:()=>window.location.reload(),children:"Next"})]}),(0,b.jsx)("div",{className:`flex flex-row w-full items-center justify-center ${N(B.familiarity)}`,children:B.card.question.length<30?(0,b.jsx)("div",{className:"my-5 font-bold text-2xl md:text-4xl lg:text-6xl xl:text-8xl",children:(0,b.jsx)("pre",{className:"font-roboto leading-none whitespace-pre-wrap break-words max-w-full",children:B.card.question})}):(0,b.jsx)("div",{className:"my-5 font-bold text-base md:text-xl lg:text-2xl xl:text-4xl",children:(0,b.jsx)("pre",{className:"font-roboto leading-none whitespace-pre-wrap break-words max-w-full",children:B.card.question})})}),(0,b.jsxs)("div",{className:"flex flex-row my-5 items-center justify-center gap-4",children:[B.card.suggestion.length>0?(0,b.jsx)(c.Button,{color:"primary",variant:"solid",onPress:()=>E(!D),children:D?"hide suggestion":"show suggestion"}):null,(0,b.jsx)(c.Button,{color:"primary",variant:"solid",onPress:()=>G(!F),children:F?"hide answer":"show answer"}),(0,b.jsx)(d.ButtonGroup,{variant:"solid",color:"primary",children:(0,b.jsxs)(e.Dropdown,{placement:"bottom-end",children:[(0,b.jsx)(f.DropdownTrigger,{children:(0,b.jsxs)(c.Button,{children:["feedback ",(0,b.jsx)(p.BiCaretDown,{})]})}),(0,b.jsx)(g.DropdownMenu,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",onSelectionChange:async a=>{a.currentKey&&await O(parseInt(a.currentKey))},children:(0,b.jsx)(j.DropdownSection,{items:v.FamiliarityList,children:v.FamiliarityList.map(a=>(0,b.jsx)(h.DropdownItem,{description:a.description,className:`${N(a.value)}`,children:`${a.value} - ${a.label}`},a.value))})})]})}),(0,b.jsx)(m.Input,{isClearable:!0,className:"max-w-sm",placeholder:"custom keyword",value:H,onClear:()=>I(""),onChange:a=>I(a.target.value.trim()),startContent:(0,b.jsx)(c.Button,{color:"primary",isDisabled:L,onPress:async()=>{M(!0);let a=await (0,x.searchExample)(H||B.card.question);"success"===a.status&&K(a.data),M(!1)},children:"View Examples"})})]}),L&&(0,b.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4",children:(0,b.jsx)(l.CircularProgress,{label:"Loading..."})}),D?(0,b.jsx)(i.Textarea,{isDisabled:!0,classNames:{input:"text-2xl leading-tight font-roboto"},defaultValue:B.card.suggestion}):null,F?(0,b.jsx)("div",{className:"MD my-1 text-base md:text-xl lg:text-2xl xl:text-4xl leading-tight font-roboto indent-0 whitespace-pre-wrap break-words hyphens-auto",dangerouslySetInnerHTML:{__html:(0,o.getHTML)(B.card.answer)}}):null,F?(0,b.jsx)(i.Textarea,{isDisabled:!0,classNames:{input:"text-2xl leading-tight font-roboto"},defaultValue:B.card.note}):null,J.length>0&&(0,b.jsx)("div",{className:"flex flex-col w-full gap-4 py-4",children:J.map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col w-full items-start bg-sand-300 rounded-md p-1",children:[(0,b.jsx)("div",{className:"text-xl whitespace-pre-wrap",children:a}),(0,b.jsx)("div",{className:"flex flex-row w-full items-end justify-end gap-4",children:(0,b.jsx)(k.Link,{className:"text-blue-600 hover:underline",target:"_blank",href:`/card/add?edit=y&question=${encodeURIComponent(a)}`,children:"Add to Card"})})]},c))})]}):(0,b.jsx)("div",{children:"no test available"})})}},79452,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(87924),c=a.i(84920),d=a.i(72131),e=a.i(47977);function f({user_id:a}){let[f,g]=(0,d.useState)([]);return(0,d.useEffect)(()=>{(async()=>{if(!a)return;let b=await (0,c.getTagAll)(a);"success"===b.status&&g(b.data)})()},[a]),(0,b.jsxs)("div",{className:"flex flex-col items-start justify-center my-4",children:[(0,b.jsx)("div",{className:"text-2xl",children:"Select a tag as the scope"}),f.map(a=>(0,b.jsxs)(e.Link,{target:"_blank",className:"flex m-4 text-2xl font-bold text-blue-600 hover:underline",href:`/card/test?tag=${a.uuid}`,children:[a.tag," ",a.description?`(${a.description})`:""]},a.uuid))]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f699a5a3._.js.map