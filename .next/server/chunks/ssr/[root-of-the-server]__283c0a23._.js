module.exports=[254799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},180455,(a,b,c)=>{b.exports=a.x("jsdom",()=>require("jsdom"))},666680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},384476,a=>{"use strict";a.s(["Textarea",()=>C],384476);var b=a.i(647531),c=a.i(605554),d=a.i(665248),e=a.i(572131);function f(){return(f=Object.assign.bind()).apply(null,arguments)}var g="undefined"!=typeof document?e.useLayoutEffect:function(){},h=function(a){var b=e.default.useRef(a);return g(function(){b.current=a}),b},i=function(a,b){if("function"==typeof a)return void a(b);a.current=b},j=function(a,b){var c=e.default.useRef();return e.default.useCallback(function(d){a.current=d,c.current&&i(c.current,null),c.current=b,b&&i(b,d)},[b])},k="undefined"!=typeof document,l={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},m=function(a){Object.keys(l).forEach(function(b){a.style.setProperty(b,l[b],"important")})},n=null,o=function(a,b){var c=a.scrollHeight;return"border-box"===b.sizingStyle.boxSizing?c+b.borderSize:c-b.paddingSize},p=function(){},q=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],r=!!k&&!!document.documentElement.currentStyle,s=function(a){var b=window.getComputedStyle(a);if(null===b)return null;var c=q.reduce(function(a,c){return a[c]=b[c],a},{}),d=c.boxSizing;if(""===d)return null;r&&"border-box"===d&&(c.width=parseFloat(c.width)+parseFloat(c.borderRightWidth)+parseFloat(c.borderLeftWidth)+parseFloat(c.paddingRight)+parseFloat(c.paddingLeft)+"px");var e=parseFloat(c.paddingBottom)+parseFloat(c.paddingTop),f=parseFloat(c.borderBottomWidth)+parseFloat(c.borderTopWidth);return{sizingStyle:c,paddingSize:e,borderSize:f}};function t(a,b,c){var d=h(c);e.useLayoutEffect(function(){var c=function(a){return d.current(a)};if(a)return a.addEventListener(b,c),function(){return a.removeEventListener(b,c)}},[])}var u=function(a,b){t(document.body,"reset",function(c){a.current.form===c.target&&b(c)})},v=function(a){t(window,"resize",a)},w=function(a){t(document.fonts,"loadingdone",a)},x=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],y=e.forwardRef(function(a,b){var c=a.cacheMeasurements,d=a.maxRows,g=a.minRows,h=a.onChange,i=void 0===h?p:h,l=a.onHeightChange,q=void 0===l?p:l,r=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,x),t=void 0!==r.value,y=e.useRef(null),z=j(y,b),A=e.useRef(0),B=e.useRef(),C=function(){var a=y.current,b=c&&B.current?B.current:s(a);if(b){B.current=b;var e,f,h,i,j,k,l,p,r,t,u,v=(e=a.value||a.placeholder||"x",void 0===(f=g)&&(f=1),void 0===(h=d)&&(h=1/0),n||((n=document.createElement("textarea")).setAttribute("tabindex","-1"),n.setAttribute("aria-hidden","true"),m(n)),null===n.parentNode&&document.body.appendChild(n),i=b.paddingSize,j=b.borderSize,l=(k=b.sizingStyle).boxSizing,Object.keys(k).forEach(function(a){n.style[a]=k[a]}),m(n),n.value=e,p=o(n,b),n.value=e,p=o(n,b),n.value="x",t=(r=n.scrollHeight-i)*f,"border-box"===l&&(t=t+i+j),p=Math.max(t,p),u=r*h,"border-box"===l&&(u=u+i+j),[p=Math.min(u,p),r]),w=v[0],x=v[1];A.current!==w&&(A.current=w,a.style.setProperty("height",w+"px","important"),q(w,{rowHeight:x}))}};return k?(e.useLayoutEffect(C),u(y,function(){if(!t){var a=y.current.value;requestAnimationFrame(function(){var b=y.current;b&&a!==b.value&&C()})}}),v(C),w(C),e.createElement("textarea",f({},r,{onChange:function(a){t||C(),i(a)},ref:z}))):e.createElement("textarea",f({},r,{onChange:i,ref:z}))}),z=a.i(168424),A=a.i(187924),B=(0,d.forwardRef)(({style:a,minRows:d=3,maxRows:f=8,cacheMeasurements:g=!1,disableAutosize:h=!1,onHeightChange:i,...j},k)=>{let{Component:l,label:m,description:n,startContent:o,endContent:p,hasHelper:q,shouldLabelBeOutside:r,shouldLabelBeInside:s,isInvalid:t,errorMessage:u,getBaseProps:v,getLabelProps:w,getInputProps:x,getInnerWrapperProps:B,getInputWrapperProps:C,getHelperWrapperProps:D,getDescriptionProps:E,getErrorMessageProps:F,isClearable:G,getClearButtonProps:H}=(0,b.useInput)({...j,ref:k,isMultiline:!0}),[I,J]=(0,e.useState)(d>1),[K,L]=(0,e.useState)(!1),M=m?(0,A.jsx)("label",{...w(),children:m}):null,N=x(),O=h?(0,A.jsx)("textarea",{...N,style:(0,c.mergeProps)(N.style,null!=a?a:{})}):(0,A.jsx)(y,{...N,cacheMeasurements:g,"data-hide-scroll":(0,c.dataAttr)(!K),maxRows:f,minRows:d,style:(0,c.mergeProps)(N.style,null!=a?a:{}),onHeightChange:(a,b)=>{1===d&&J(a>=2*b.rowHeight),f>d&&L(a>=f*b.rowHeight),null==i||i(a,b)}}),P=(0,e.useMemo)(()=>G?(0,A.jsx)("button",{...H(),children:(0,A.jsx)(z.CloseFilledIcon,{})}):null,[G,H]),Q=(0,e.useMemo)(()=>o||p?(0,A.jsxs)("div",{...B(),children:[o,O,p]}):(0,A.jsx)("div",{...B(),children:O}),[o,N,p,B]),R=t&&u,S=R||n;return(0,A.jsxs)(l,{...v(),children:[r?M:null,(0,A.jsxs)("div",{...C(),"data-has-multiple-rows":(0,c.dataAttr)(I),children:[s?M:null,Q,P]}),q&&S?(0,A.jsx)("div",{...D(),children:R?(0,A.jsx)("div",{...F(),children:u}):(0,A.jsx)("div",{...E(),children:n})}):null]})});B.displayName="HeroUI.Textarea";var C=B},36142,624474,a=>{"use strict";a.s(["removeAudio",()=>c],36142);var b=a.i(405050),c=(0,b.createServerReference)("60c346950b9fda0a0646c3fb1f9c64b3200c68f9f7",b.callServer,void 0,b.findSourceMapURL,"removeAudio");a.s(["saveAudio",()=>d],624474);var d=(0,b.createServerReference)("704a62ff15657d6dba7ad5f8413b772a53431957be",b.callServer,void 0,b.findSourceMapURL,"saveAudio")},754810,a=>{"use strict";a.s(["default",()=>u],754810);var b=a.i(187924),c=a.i(368114),d=a.i(118344),e=a.i(332496),f=a.i(904655),g=a.i(924647),h=a.i(972571),i=a.i(384476),j=a.i(572131),k=a.i(36142),l=a.i(624474),m=a.i(884850),n=a.i(405050),o=(0,n.createServerReference)("40ccd5c2e95799dc371bd048e09c7983f4ed553c65",n.callServer,void 0,n.findSourceMapURL,"getAnswerAll"),p=(0,n.createServerReference)("40ab45eca1c43d0fac367c84db902ddd6fd45c89a6",n.callServer,void 0,n.findSourceMapURL,"getQuestion"),q=(0,n.createServerReference)("4012e7ca854f9c10478786800d5995609e11e3ff8b",n.callServer,void 0,n.findSourceMapURL,"removeAnswer"),r=(0,n.createServerReference)("400f8743d3fc103e964dd9ad5ad65077948762c5f1",n.callServer,void 0,n.findSourceMapURL,"saveAnswer"),s=a.i(447977);function t({user_id:a,item:c,handleDelete:d}){return(0,b.jsxs)("div",{className:"flex flex-col w-full items-start rounded-md p-1",children:[(0,b.jsx)("div",{className:"flex flex-row w-full items-center justify-start gap-2",children:c.content}),(0,b.jsxs)("div",{className:"flex flex-row w-full items-center justify-end gap-4",children:[(0,b.jsx)(s.Link,{target:"_blank",href:`/speak/practice?user_id=${c.user_id}`,className:"text-sm text-gray-500 hover:underline w-full",children:`by ${c.user_id}`}),c.user_id===a&&(0,b.jsx)(s.Link,{as:"button",isBlock:!0,color:"danger",className:"text-xl",onPress:async()=>{window.confirm("Are you sure to delete?")&&await d(c)},children:"delete"})]})]})}function u({question_uuid:a,user_id:n}){let[s,u]=(0,j.useState)(),[v,w]=(0,j.useState)([]),[x,y]=(0,j.useState)(1),[z,A]=(0,j.useState)(!1),[B,C]=(0,j.useState)(!1),[D,E]=(0,j.useState)("local"),[F,G]=(0,j.useState)("video"),[H,I]=(0,j.useState)(),[J,K]=(0,j.useState)([]),[L,M]=(0,j.useState)(!1),[N,O]=(0,j.useState)(!1),[P,Q]=(0,j.useState)(),[R,S]=(0,j.useState)(),[T,U]=(0,j.useState)(),V=(0,j.useRef)(null),W=async a=>{if(a.audio_path){let b=await (0,k.removeAudio)("ask",`${a.uuid}.wav`);if("error"===b.status){console.log(b.error),(0,d.addToast)({title:"remove data error",color:"danger"});return}}if(a.video_path){let b=await (0,k.removeAudio)("ask",`${a.uuid}.mp4`);if("error"===b.status){console.log(b.error),(0,d.addToast)({title:"remove data error",color:"danger"});return}}let b=await q(a.uuid);"success"===b.status?y(a=>a+1):(console.log(b.error),(0,d.addToast)({title:"remove data error",color:"danger"}))},X=async()=>{if(!T)return void alert("content is empty");if(!R)return void alert("audio is empty");let b=(0,c.getUUID)();if(C(!0),P){let a=await (0,l.saveAudio)(P.data,"ask",`${b}.mp4`);if("error"===a.status){console.log(a.error),(0,d.addToast)({title:"save data error",color:"danger"}),C(!1);return}}if(R){let a=await (0,l.saveAudio)(R.data,"ask",`${b}.wav`);if("error"===a.status){console.log(a.error),(0,d.addToast)({title:"save data error",color:"danger"}),C(!1);return}}let e=await r({uuid:b,user_id:n,question_uuid:a,audio_path:R?`/api/data/ask/${b}.wav`:"",video_path:P?`/api/data/ask/${b}.mp4`:"",content:T,created_by:n,created_at:new Date,updated_at:new Date});"success"===e.status?(U(""),P&&(URL.revokeObjectURL(P.url),Q(void 0)),R&&(URL.revokeObjectURL(R.url),S(void 0)),y(a=>a+1)):(console.log(e.error),(0,d.addToast)({title:"save data error",color:"danger"})),C(!1)},Y=async()=>{P&&(URL.revokeObjectURL(P.url),Q(void 0)),R&&(URL.revokeObjectURL(R.url),S(void 0));let a=async a=>{Q({data:a,url:URL.createObjectURL(a)})},b=async(a,b)=>{S({data:b,url:URL.createObjectURL(b)}),U("success"===a.status?a.data:""),"error"===a.status&&(0,d.addToast)({title:a.error,color:"danger"})};await (0,m.toggleRecording)({mode:F,setStateStream:I,stateRecorder:J,setStateRecorder:K,stateRecording:L,setStateRecording:M,recognize:!0,sttEngine:D,setStateProcessing:O,handleVideo:a,handleAudio:b})};return(0,j.useEffect)(()=>{let b=async()=>{A(!0);let b=await o(a);"success"===b.status?w(b.data):(console.log(b.error),(0,d.addToast)({title:"load data error",color:"danger"})),A(!1)};(async()=>{A(!0);let b=await p(a);"success"===b.status?u(b.data):(console.log(b.error),(0,d.addToast)({title:"load data error",color:"danger"})),A(!1)})(),b(),V.current&&H&&(V.current.srcObject=H)},[a,x,V,H]),(0,b.jsxs)("div",{className:"w-full space-y-4 mb-10",children:[!!s&&(s.user_id===n?(0,b.jsx)("div",{className:"flex flex-col w-full gap-2 my-4 p-2 rounded-lg bg-sand-300",children:(0,b.jsx)("div",{className:"flex flex-col w-full gap-2 my-4 p-2 rounded-lg bg-sand-300 text-xl",children:s.title})}):(0,b.jsx)("div",{className:"flex flex-col w-full gap-2 my-4 p-2 rounded-lg bg-sand-300 text-xl",children:s.title})),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-4 my-4",children:[(0,b.jsx)(f.Select,{"aria-label":"stt engine",className:"max-w-sm",selectedKeys:[D],onChange:a=>E(a.target.value),startContent:(0,b.jsx)("div",{className:"whitespace-nowrap font-bold",children:"AI Engine"}),children:m.EngineList.map(a=>(0,b.jsx)(g.SelectItem,{textValue:a.value,children:a.value},a.key))}),(0,b.jsxs)(f.Select,{"aria-label":"stt engine",className:"max-w-sm",selectedKeys:[F],onChange:a=>G(a.target.value),startContent:(0,b.jsx)("div",{className:"whitespace-nowrap font-bold",children:"Mode"}),children:[(0,b.jsx)(g.SelectItem,{textValue:"video",children:"video"},"video"),(0,b.jsx)(g.SelectItem,{textValue:"audio",children:"audio"},"audio")]}),(0,b.jsx)(e.Button,{variant:"solid",color:"primary",id:"button-toggel-recording",isDisabled:!L&&N,onPress:async()=>{await Y()},children:L?"â¹ Stop Recording (Ctrl+A)":N?"Processing":"ðŸŽ¤ Read a Sentence (Ctrl+A)"})]}),L?(0,b.jsx)("video",{ref:V,autoPlay:!0,muted:!0,playsInline:!0}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center w-full gap-2 my-4",children:[!!R&&(0,b.jsx)("audio",{controls:!0,src:R.url}),!!P&&(0,b.jsx)("video",{controls:!0,src:P.url}),(0,b.jsx)(i.Textarea,{size:"lg",className:"w-full",label:"content",classNames:{inputWrapper:"bg-sand-200",input:"text-xl"},value:T,onChange:a=>U(a.target.value)}),(0,b.jsx)(e.Button,{variant:"solid",color:"primary",id:"button-add-save",isDisabled:B,onPress:X,children:"Add & Save (Ctrl+S)"})]}),z&&(0,b.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4 my-4",children:(0,b.jsx)(h.Spinner,{classNames:{label:"text-foreground mt-4"},variant:"simple"})}),(0,b.jsx)("div",{className:"flex flex-col w-full gap-4 my-4",children:v.map((a,c)=>(0,b.jsx)(t,{user_id:n,item:a,handleDelete:W},`${c}-${a.uuid}`))})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__283c0a23._.js.map