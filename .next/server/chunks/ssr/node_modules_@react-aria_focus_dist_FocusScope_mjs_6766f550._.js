module.exports=[2680,a=>{"use strict";a.s(["FocusScope",()=>o,"getFocusableTreeWalker",()=>A,"isElementInChildOfActiveScope",()=>t],2680);var b=a.i(66052),c=a.i(26712),d=a.i(17144),e=a.i(20101),f=a.i(99243),g=a.i(40582);class h{get currentNode(){return this._currentNode}set currentNode(a){if(!(0,c.nodeContains)(this.root,a))throw Error("Cannot set currentNode to a node that is not contained by the root node.");let b=[],d=a,e=a;for(this._currentNode=a;d&&d!==this.root;)if(d.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let a=d,c=this._doc.createTreeWalker(a,this.whatToShow,{acceptNode:this._acceptNode});b.push(c),c.currentNode=e,this._currentSetFor.add(c),d=e=a.host}else d=d.parentNode;let f=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});b.push(f),f.currentNode=e,this._currentSetFor.add(f),this._walkerStack=b}get doc(){return this._doc}firstChild(){let a=this.currentNode,b=this.nextNode();return(0,c.nodeContains)(a,b)?(b&&(this.currentNode=b),b):(this.currentNode=a,null)}lastChild(){let a=this._walkerStack[0].lastChild();return a&&(this.currentNode=a),a}nextNode(){let a=this._walkerStack[0].nextNode();if(a){if(a.shadowRoot){var b;let c;if("function"==typeof this.filter?c=this.filter(a):(null==(b=this.filter)?void 0:b.acceptNode)&&(c=this.filter.acceptNode(a)),c===NodeFilter.FILTER_ACCEPT)return this.currentNode=a,a;let d=this.nextNode();return d&&(this.currentNode=d),d}return a&&(this.currentNode=a),a}if(!(this._walkerStack.length>1))return null;{this._walkerStack.shift();let a=this.nextNode();return a&&(this.currentNode=a),a}}previousNode(){let a=this._walkerStack[0];if(a.currentNode===a.root){if(this._currentSetFor.has(a)&&(this._currentSetFor.delete(a),this._walkerStack.length>1)){this._walkerStack.shift();let a=this.previousNode();return a&&(this.currentNode=a),a}return null}let b=a.previousNode();if(b){if(b.shadowRoot){var c;let a;if("function"==typeof this.filter?a=this.filter(b):(null==(c=this.filter)?void 0:c.acceptNode)&&(a=this.filter.acceptNode(b)),a===NodeFilter.FILTER_ACCEPT)return b&&(this.currentNode=b),b;let d=this.lastChild();return d&&(this.currentNode=d),d}return b&&(this.currentNode=b),b}if(!(this._walkerStack.length>1))return null;{this._walkerStack.shift();let a=this.previousNode();return a&&(this.currentNode=a),a}}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(a,b,c,d){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=a=>{if(a.nodeType===Node.ELEMENT_NODE){var b;let c=a.shadowRoot;if(c){let a=this._doc.createTreeWalker(c,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(a),NodeFilter.FILTER_ACCEPT}if("function"==typeof this.filter)return this.filter(a);if(null==(b=this.filter)?void 0:b.acceptNode)return this.filter.acceptNode(a);if(null===this.filter)return NodeFilter.FILTER_ACCEPT}return NodeFilter.FILTER_SKIP},this._doc=a,this.root=b,this.filter=null!=d?d:null,this.whatToShow=null!=c?c:NodeFilter.SHOW_ALL,this._currentNode=b,this._walkerStack.unshift(a.createTreeWalker(b,c,this._acceptNode));let e=b.shadowRoot;if(e){let a=this._doc.createTreeWalker(e,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(a)}}}var i=a.i(13325),j=a.i(29934),k=a.i(72131);let l=k.default.createContext(null),m="react-aria-focus-scope-restore",n=null;function o(a){var f,g,h,j,o;let t,B,{children:E,contain:F,restoreFocus:G,autoFocus:H}=a,I=(0,k.useRef)(null),J=(0,k.useRef)(null),K=(0,k.useRef)([]),{parentNode:L}=(0,k.useContext)(l)||{},M=(0,k.useMemo)(()=>new C({scopeRef:K}),[K]);(0,b.useLayoutEffect)(()=>{let a=L||D.root;if(D.getTreeNode(a.scopeRef)&&n&&!u(n,a.scopeRef)){let b=D.getTreeNode(n);b&&(a=b)}a.addChild(M),D.addNode(M)},[M,L]),(0,b.useLayoutEffect)(()=>{let a=D.getTreeNode(K);a&&(a.contain=!!F)},[F]),(0,b.useLayoutEffect)(()=>{var a;let b=null==(a=I.current)?void 0:a.nextSibling,c=[],d=a=>a.stopPropagation();for(;b&&b!==J.current;)c.push(b),b.addEventListener(m,d),b=b.nextSibling;return K.current=c,()=>{for(let a of c)a.removeEventListener(m,d)}},[E]),f=K,g=G,h=F,(0,b.useLayoutEffect)(()=>{if(g||h)return;let a=f.current,b=(0,d.getOwnerDocument)(a?a[0]:void 0),e=a=>{let b=(0,c.getEventTarget)(a);r(b,f.current)?n=f:s(b)||(n=null)};return b.addEventListener("focusin",e,!1),null==a||a.forEach(a=>a.addEventListener("focusin",e,!1)),()=>{b.removeEventListener("focusin",e,!1),null==a||a.forEach(a=>a.removeEventListener("focusin",e,!1))}},[f,g,h]),j=K,o=F,t=(0,k.useRef)(void 0),B=(0,k.useRef)(void 0),(0,b.useLayoutEffect)(()=>{let a=j.current;if(!o){B.current&&(cancelAnimationFrame(B.current),B.current=void 0);return}let b=(0,d.getOwnerDocument)(a?a[0]:void 0),f=a=>{if("Tab"!==a.key||a.altKey||a.ctrlKey||a.metaKey||!q(j)||a.isComposing)return;let d=(0,c.getActiveElement)(b),e=j.current;if(!e||!r(d,e))return;let f=A(p(e),{tabbable:!0},e);if(!d)return;f.currentNode=d;let g=a.shiftKey?f.previousNode():f.nextNode();g||(f.currentNode=a.shiftKey?e[e.length-1].nextElementSibling:e[0].previousElementSibling,g=a.shiftKey?f.previousNode():f.nextNode()),a.preventDefault(),g&&v(g,!0)},g=a=>{(!n||u(n,j))&&r((0,c.getEventTarget)(a),j.current)?(n=j,t.current=(0,c.getEventTarget)(a)):q(j)&&!s((0,c.getEventTarget)(a),j)?t.current?t.current.focus():n&&n.current&&x(n.current):q(j)&&(t.current=(0,c.getEventTarget)(a))},h=a=>{B.current&&cancelAnimationFrame(B.current),B.current=requestAnimationFrame(()=>{let d=(0,i.getInteractionModality)(),f=("virtual"===d||null===d)&&(0,e.isAndroid)()&&(0,e.isChrome)(),g=(0,c.getActiveElement)(b);if(!f&&g&&q(j)&&!s(g,j)){n=j;let b=(0,c.getEventTarget)(a);if(b&&b.isConnected){var h;t.current=b,null==(h=t.current)||h.focus()}else n.current&&x(n.current)}})};return b.addEventListener("keydown",f,!1),b.addEventListener("focusin",g,!1),null==a||a.forEach(a=>a.addEventListener("focusin",g,!1)),null==a||a.forEach(a=>a.addEventListener("focusout",h,!1)),()=>{b.removeEventListener("keydown",f,!1),b.removeEventListener("focusin",g,!1),null==a||a.forEach(a=>a.removeEventListener("focusin",g,!1)),null==a||a.forEach(a=>a.removeEventListener("focusout",h,!1))}},[j,o]),(0,b.useLayoutEffect)(()=>()=>{B.current&&cancelAnimationFrame(B.current)},[B]),function(a,e,f){let g=(0,k.useRef)("undefined"!=typeof document?(0,c.getActiveElement)((0,d.getOwnerDocument)(a.current?a.current[0]:void 0)):null);(0,b.useLayoutEffect)(()=>{let b=a.current,g=(0,d.getOwnerDocument)(b?b[0]:void 0);if(!e||f)return;let h=()=>{(!n||u(n,a))&&r((0,c.getActiveElement)(g),a.current)&&(n=a)};return g.addEventListener("focusin",h,!1),null==b||b.forEach(a=>a.addEventListener("focusin",h,!1)),()=>{g.removeEventListener("focusin",h,!1),null==b||b.forEach(a=>a.removeEventListener("focusin",h,!1))}},[a,f]),(0,b.useLayoutEffect)(()=>{let b=(0,d.getOwnerDocument)(a.current?a.current[0]:void 0);if(!e)return;let c=c=>{if("Tab"!==c.key||c.altKey||c.ctrlKey||c.metaKey||!q(a)||c.isComposing)return;let d=b.activeElement;if(!s(d,a)||!y(a))return;let e=D.getTreeNode(a);if(!e)return;let f=e.nodeToRestore,g=A(b.body,{tabbable:!0});g.currentNode=d;let h=c.shiftKey?g.previousNode():g.nextNode();if(f&&f.isConnected&&f!==b.body||(f=void 0,e.nodeToRestore=void 0),(!h||!s(h,a))&&f){g.currentNode=f;do h=c.shiftKey?g.previousNode():g.nextNode();while(s(h,a))(c.preventDefault(),c.stopPropagation(),h)?v(h,!0):s(f)?v(f,!0):d.blur()}};return f||b.addEventListener("keydown",c,!0),()=>{f||b.removeEventListener("keydown",c,!0)}},[a,e,f]),(0,b.useLayoutEffect)(()=>{var b;let f=(0,d.getOwnerDocument)(a.current?a.current[0]:void 0);if(!e)return;let h=D.getTreeNode(a);if(h)return h.nodeToRestore=null!=(b=g.current)?b:void 0,()=>{let b=D.getTreeNode(a);if(!b)return;let d=b.nodeToRestore,g=(0,c.getActiveElement)(f);if(e&&d&&(g&&s(g,a)||g===f.body&&y(a))){let b=D.clone();requestAnimationFrame(()=>{if(f.activeElement===f.body){let c=b.getTreeNode(a);for(;c;){if(c.nodeToRestore&&c.nodeToRestore.isConnected)return void z(c.nodeToRestore);c=c.parent}for(c=b.getTreeNode(a);c;){if(c.scopeRef&&c.scopeRef.current&&D.getTreeNode(c.scopeRef))return void z(w(c.scopeRef.current,!0));c=c.parent}}})}}},[a,e])}(K,G,F),function(a,b){let e=k.default.useRef(b);(0,k.useEffect)(()=>{if(e.current){n=a;let b=(0,d.getOwnerDocument)(a.current?a.current[0]:void 0);!r((0,c.getActiveElement)(b),n.current)&&a.current&&x(a.current)}e.current=!1},[a])}(K,H),(0,k.useEffect)(()=>{let a=(0,c.getActiveElement)((0,d.getOwnerDocument)(K.current?K.current[0]:void 0)),b=null;if(r(a,K.current)){for(let c of D.traverse())c.scopeRef&&r(a,c.scopeRef.current)&&(b=c);b===D.getTreeNode(K)&&(n=b.scopeRef)}},[K]),(0,b.useLayoutEffect)(()=>()=>{var a,b,c;let d=null!=(c=null==(b=D.getTreeNode(K))||null==(a=b.parent)?void 0:a.scopeRef)?c:null;(K===n||u(K,n))&&(!d||D.getTreeNode(d))&&(n=d),D.removeTreeNode(K)},[K]);let N=(0,k.useMemo)(()=>{var a;return a=K,{focusNext(b={}){var e;let f=a.current,{from:g,tabbable:h,wrap:i,accept:j}=b,k=g||(0,c.getActiveElement)((0,d.getOwnerDocument)(null!=(e=f[0])?e:void 0)),l=f[0].previousElementSibling,m=A(p(f),{tabbable:h,accept:j},f);m.currentNode=r(k,f)?k:l;let n=m.nextNode();return!n&&i&&(m.currentNode=l,n=m.nextNode()),n&&v(n,!0),n},focusPrevious(b={}){var e;let f=a.current,{from:g,tabbable:h,wrap:i,accept:j}=b,k=g||(0,c.getActiveElement)((0,d.getOwnerDocument)(null!=(e=f[0])?e:void 0)),l=f[f.length-1].nextElementSibling,m=A(p(f),{tabbable:h,accept:j},f);m.currentNode=r(k,f)?k:l;let n=m.previousNode();return!n&&i&&(m.currentNode=l,n=m.previousNode()),n&&v(n,!0),n},focusFirst(b={}){let c=a.current,{tabbable:d,accept:e}=b,f=A(p(c),{tabbable:d,accept:e},c);f.currentNode=c[0].previousElementSibling;let g=f.nextNode();return g&&v(g,!0),g},focusLast(b={}){let c=a.current,{tabbable:d,accept:e}=b,f=A(p(c),{tabbable:d,accept:e},c);f.currentNode=c[c.length-1].nextElementSibling;let g=f.previousNode();return g&&v(g,!0),g}}},[]),O=(0,k.useMemo)(()=>({focusManager:N,parentNode:M}),[M,N]);return k.default.createElement(l.Provider,{value:O},k.default.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:I}),E,k.default.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:J}))}function p(a){return a[0].parentElement}function q(a){let b=D.getTreeNode(n);for(;b&&b.scopeRef!==a;){if(b.contain)return!1;b=b.parent}return!0}function r(a,b){return!!a&&!!b&&b.some(b=>b.contains(a))}function s(a,b=null){if(a instanceof Element&&a.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:c}of D.traverse(D.getTreeNode(b)))if(c&&r(a,c.current))return!0;return!1}function t(a){return s(a,n)}function u(a,b){var c;let d=null==(c=D.getTreeNode(b))?void 0:c.parent;for(;d;){if(d.scopeRef===a)return!0;d=d.parent}return!1}function v(a,b=!1){if(null==a||b){if(null!=a)try{a.focus()}catch{}}else try{(0,j.focusSafely)(a)}catch{}}function w(a,b=!0){let c=a[0].previousElementSibling,d=p(a),e=A(d,{tabbable:b},a);e.currentNode=c;let f=e.nextNode();return b&&!f&&((e=A(d=p(a),{tabbable:!1},a)).currentNode=c,f=e.nextNode()),f}function x(a,b=!0){v(w(a,b))}function y(a){let b=D.getTreeNode(n);for(;b&&b.scopeRef!==a;){if(b.nodeToRestore)return!1;b=b.parent}return(null==b?void 0:b.scopeRef)===a}function z(a){a.dispatchEvent(new CustomEvent(m,{bubbles:!0,cancelable:!0}))&&v(a)}function A(a,b,c){var e,i,j;let k=(null==b?void 0:b.tabbable)?f.isTabbable:f.isFocusable,l=(null==a?void 0:a.nodeType)===Node.ELEMENT_NODE?a:null,m=(0,d.getOwnerDocument)(l),n=(e=a||m,i=NodeFilter.SHOW_ELEMENT,j={acceptNode(a){var e;return(null==b||null==(e=b.from)?void 0:e.contains(a))||(null==b?void 0:b.tabbable)&&"INPUT"===a.tagName&&"radio"===a.getAttribute("type")&&(!function(a){if(a.checked)return!0;let b=[];if(a.form){var c,e;let d=null==(e=a.form)||null==(c=e.elements)?void 0:c.namedItem(a.name);b=[...null!=d?d:[]]}else b=[...(0,d.getOwnerDocument)(a).querySelectorAll(`input[type="radio"][name="${CSS.escape(a.name)}"]`)].filter(a=>!a.form);return!!b&&!b.some(a=>a.checked)}(a)||"INPUT"===n.currentNode.tagName&&"radio"===n.currentNode.type&&n.currentNode.name===a.name)?NodeFilter.FILTER_REJECT:k(a)&&(!c||r(a,c))&&(!(null==b?void 0:b.accept)||b.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}},(0,g.shadowDOM)()?new h(m,e,i,j):m.createTreeWalker(e,i,j));return(null==b?void 0:b.from)&&(n.currentNode=b.from),n}class B{get size(){return this.fastMap.size}getTreeNode(a){return this.fastMap.get(a)}addTreeNode(a,b,c){let d=this.fastMap.get(null!=b?b:null);if(!d)return;let e=new C({scopeRef:a});d.addChild(e),e.parent=d,this.fastMap.set(a,e),c&&(e.nodeToRestore=c)}addNode(a){this.fastMap.set(a.scopeRef,a)}removeTreeNode(a){if(null===a)return;let b=this.fastMap.get(a);if(!b)return;let c=b.parent;for(let a of this.traverse())a!==b&&b.nodeToRestore&&a.nodeToRestore&&b.scopeRef&&b.scopeRef.current&&r(a.nodeToRestore,b.scopeRef.current)&&(a.nodeToRestore=b.nodeToRestore);let d=b.children;c&&(c.removeChild(b),d.size>0&&d.forEach(a=>c&&c.addChild(a))),this.fastMap.delete(b.scopeRef)}*traverse(a=this.root){if(null!=a.scopeRef&&(yield a),a.children.size>0)for(let b of a.children)yield*this.traverse(b)}clone(){var a,b;let c=new B;for(let d of this.traverse())c.addTreeNode(d.scopeRef,null!=(b=null==(a=d.parent)?void 0:a.scopeRef)?b:null,d.nodeToRestore);return c}constructor(){this.fastMap=new Map,this.root=new C({scopeRef:null}),this.fastMap.set(null,this.root)}}class C{addChild(a){this.children.add(a),a.parent=this}removeChild(a){this.children.delete(a),a.parent=void 0}constructor(a){this.children=new Set,this.contain=!1,this.scopeRef=a.scopeRef}}let D=new B}];

//# sourceMappingURL=node_modules_%40react-aria_focus_dist_FocusScope_mjs_6766f550._.js.map