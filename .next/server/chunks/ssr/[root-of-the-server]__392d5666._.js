module.exports=[54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},80455,(a,b,c)=>{b.exports=a.x("jsdom",()=>require("jsdom"))},66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},13784,a=>{"use strict";a.s(["default",()=>m],13784);var b=a.i(87924),c=a.i(68114),d=a.i(32496),e=a.i(72131),f=a.i(20094),g=a.i(5050),h=(0,g.createServerReference)("4025f2509f2551ba8cd02536e993767174e13d0844",g.callServer,void 0,g.findSourceMapURL,"getAnswerAll"),i=(0,g.createServerReference)("40274e3d9ecfd29aab99121c63ec9ba2aeed97473d",g.callServer,void 0,g.findSourceMapURL,"saveAnswer"),j=(0,g.createServerReference)("405ae2bb66fdd1d3936e9d996924d557e56e56ab8e",g.callServer,void 0,g.findSourceMapURL,"saveQuestion"),k=a.i(84850),l=a.i(328);function m({item:a,email:g}){let[m,n]=(0,e.useState)(""),[o,p]=(0,e.useState)(),[q,r]=(0,e.useState)([]),[s,t]=(0,e.useState)(!1),[u,v]=e.default.useState(!1),w=(0,e.useRef)([]),x=(0,e.useRef)(null);(0,e.useEffect)(()=>{let b=async()=>{if(!a?.uuid)return;let b=await h(a?.uuid);"success"===b.status&&r(b.data.map(a=>({path:a.audio_path,created_by:a.created_by,created_at:a.created_at,updated_at:a.updated_at})))};n(a?.uuid&&a.user_id===g?a.uuid:(0,c.getUUID)()),b()},[]);let y=async()=>{for(let b of(o&&o.url&&"error"===(await j({uuid:m,user_id:g,audio_path:`/ask/${m}.wav`,recognized:"",created_by:g,created_at:a?.created_at?a.created_at:new Date,updated_at:new Date})).status&&f.toast.error("save question failed"),q)){if(!b.url)continue;let d=(0,c.getUUID)();"error"===(await i({uuid:d,user_id:g,question_uuid:m,audio_path:`/ask/${m}_${d}.wav`,recognized:"",created_by:g,created_at:a?.created_at?a.created_at:new Date,updated_at:new Date})).status&&f.toast.error("save answer failed")}f.toast.success("save answer success")};return(0,b.jsxs)("div",{className:"w-full space-y-4 px-2 mb-10",children:[(!a?.user_id||a.user_id===g)&&(0,b.jsx)("div",{className:"flex flex-row my-1 items-end justify-end gap-4",children:(0,b.jsx)(d.Button,{color:"primary",variant:"solid",size:"sm",type:"submit",onPress:y,children:"Save"})}),(0,b.jsxs)("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:[(0,b.jsx)(d.Button,{variant:"solid",color:"primary",isDisabled:!s&&u,onPress:()=>{(0,k.toggleRecording)(s,t,w,x,!1,v,a=>{console.log(a)},(a,b)=>{p({url:URL.createObjectURL(b),created_by:g,created_at:new Date,updated_at:new Date})})},children:s?"⏹ Stop Recording":"🎤 Add Question"}),!!o&&(!!o.url||!!o.path)&&(0,b.jsx)(d.Button,{isIconOnly:!0,variant:"light",size:"sm",onPress:()=>{new Audio(o.url?o.url:o.path).play()},children:(0,b.jsx)(l.MdPlayCircle,{size:30})})]}),(0,b.jsx)(d.Button,{variant:"solid",color:"primary",isDisabled:!o||!s&&u,onPress:()=>{(0,k.toggleRecording)(s,t,w,x,!1,v,a=>{console.log(a)},(a,b)=>{r(a=>[...a,{url:URL.createObjectURL(b),created_by:g,created_at:new Date,updated_at:new Date}])})},children:s?"⏹ Stop Recording":"🎤 Add Answer"}),q.length>0&&(0,b.jsx)("div",{className:"flex flex-col items-start justify-start w-full gap-2 my-8",children:[...q].reverse().map((e,f)=>(0,b.jsxs)("div",{className:"flex flex-col my-1 items-start justify-start gap-4",children:[(0,b.jsx)("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:(0,b.jsx)(d.Button,{isIconOnly:!0,variant:"light",size:"sm",onPress:()=>{new Audio(e.url?e.url:e.path).play()},children:(0,b.jsx)(l.MdPlayCircle,{size:30})})}),(0,b.jsxs)("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:[(0,b.jsx)("p",{children:a?.created_at?(0,c.formatDate)(a?.created_at):""}),(0,b.jsx)("p",{children:a?.created_by})]})]},f))})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__392d5666._.js.map