module.exports=[88303,26347,71040,a=>{"use strict";a.s(["useImmer",()=>Q],88303);var b,c=Symbol.for("immer-nothing"),d=Symbol.for("immer-draftable"),e=Symbol.for("immer-state");function f(a){throw Error(`[Immer] minified error nr: ${a}. Full error at: https://bit.ly/3cXEKWf`)}var g=Object.getPrototypeOf;function h(a){return!!a&&!!a[e]}function i(a){return!!a&&(k(a)||Array.isArray(a)||!!a[d]||!!a.constructor?.[d]||p(a)||q(a))}var j=Object.prototype.constructor.toString();function k(a){if(!a||"object"!=typeof a)return!1;let b=g(a);if(null===b)return!0;let c=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;return c===Object||"function"==typeof c&&Function.toString.call(c)===j}function l(a,b){0===m(a)?Reflect.ownKeys(a).forEach(c=>{b(c,a[c],a)}):a.forEach((c,d)=>b(d,c,a))}function m(a){let b=a[e];return b?b.type_:Array.isArray(a)?1:p(a)?2:3*!!q(a)}function n(a,b){return 2===m(a)?a.has(b):Object.prototype.hasOwnProperty.call(a,b)}function o(a,b,c){let d=m(a);2===d?a.set(b,c):3===d?a.add(c):a[b]=c}function p(a){return a instanceof Map}function q(a){return a instanceof Set}function r(a){return a.copy_||a.base_}function s(a,b){if(p(a))return new Map(a);if(q(a))return new Set(a);if(Array.isArray(a))return Array.prototype.slice.call(a);let c=k(a);if(!0!==b&&("class_only"!==b||c)){let b=g(a);return null!==b&&c?{...a}:Object.assign(Object.create(b),a)}{let b=Object.getOwnPropertyDescriptors(a);delete b[e];let c=Reflect.ownKeys(b);for(let d=0;d<c.length;d++){let e=c[d],f=b[e];!1===f.writable&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(b[e]={configurable:!0,writable:!0,enumerable:f.enumerable,value:a[e]})}return Object.create(g(a),b)}}function t(a,b=!1){return v(a)||h(a)||!i(a)||(m(a)>1&&Object.defineProperties(a,{set:{value:u},add:{value:u},clear:{value:u},delete:{value:u}}),Object.freeze(a),b&&Object.values(a).forEach(a=>t(a,!0))),a}function u(){f(2)}function v(a){return Object.isFrozen(a)}var w={};function x(a){let b=w[a];return b||f(0,a),b}function y(a,b){b&&(x("Patches"),a.patches_=[],a.inversePatches_=[],a.patchListener_=b)}function z(a){A(a),a.drafts_.forEach(C),a.drafts_=null}function A(a){a===b&&(b=a.parent_)}function B(a){return b={drafts_:[],parent_:b,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function C(a){let b=a[e];0===b.type_||1===b.type_?b.revoke_():b.revoked_=!0}function D(a,b){b.unfinalizedDrafts_=b.drafts_.length;let d=b.drafts_[0];return void 0!==a&&a!==d?(d[e].modified_&&(z(b),f(4)),i(a)&&(a=E(b,a),b.parent_||G(b,a)),b.patches_&&x("Patches").generateReplacementPatches_(d[e].base_,a,b.patches_,b.inversePatches_)):a=E(b,d,[]),z(b),b.patches_&&b.patchListener_(b.patches_,b.inversePatches_),a!==c?a:void 0}function E(a,b,c){if(v(b))return b;let d=b[e];if(!d)return l(b,(e,f)=>F(a,d,b,e,f,c)),b;if(d.scope_!==a)return b;if(!d.modified_)return G(a,d.base_,!0),d.base_;if(!d.finalized_){d.finalized_=!0,d.scope_.unfinalizedDrafts_--;let b=d.copy_,e=b,f=!1;3===d.type_&&(e=new Set(b),b.clear(),f=!0),l(e,(e,g)=>F(a,d,b,e,g,c,f)),G(a,b,!1),c&&a.patches_&&x("Patches").generatePatches_(d,c,a.patches_,a.inversePatches_)}return d.copy_}function F(a,b,c,d,e,f,g){if(h(e)){let g=E(a,e,f&&b&&3!==b.type_&&!n(b.assigned_,d)?f.concat(d):void 0);if(o(c,d,g),!h(g))return;a.canAutoFreeze_=!1}else g&&c.add(e);if(i(e)&&!v(e)){if(!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1)return;E(a,e),(!b||!b.scope_.parent_)&&"symbol"!=typeof d&&(p(c)?c.has(d):Object.prototype.propertyIsEnumerable.call(c,d))&&G(a,e)}}function G(a,b,c=!1){!a.parent_&&a.immer_.autoFreeze_&&a.canAutoFreeze_&&t(b,c)}var H={get(a,b){if(b===e)return a;let c=r(a);if(!n(c,b)){var d=a,f=c,g=b;let e=K(f,g);return e?"value"in e?e.value:e.get?.call(d.draft_):void 0}let h=c[b];return a.finalized_||!i(h)?h:h===J(a.base_,b)?(M(a),a.copy_[b]=N(h,a)):h},has:(a,b)=>b in r(a),ownKeys:a=>Reflect.ownKeys(r(a)),set(a,b,c){let d=K(r(a),b);if(d?.set)return d.set.call(a.draft_,c),!0;if(!a.modified_){let d=J(r(a),b),f=d?.[e];if(f&&f.base_===c)return a.copy_[b]=c,a.assigned_[b]=!1,!0;if((c===d?0!==c||1/c==1/d:c!=c&&d!=d)&&(void 0!==c||n(a.base_,b)))return!0;M(a),L(a)}return!!(a.copy_[b]===c&&(void 0!==c||b in a.copy_)||Number.isNaN(c)&&Number.isNaN(a.copy_[b]))||(a.copy_[b]=c,a.assigned_[b]=!0,!0)},deleteProperty:(a,b)=>(void 0!==J(a.base_,b)||b in a.base_?(a.assigned_[b]=!1,M(a),L(a)):delete a.assigned_[b],a.copy_&&delete a.copy_[b],!0),getOwnPropertyDescriptor(a,b){let c=r(a),d=Reflect.getOwnPropertyDescriptor(c,b);return d?{writable:!0,configurable:1!==a.type_||"length"!==b,enumerable:d.enumerable,value:c[b]}:d},defineProperty(){f(11)},getPrototypeOf:a=>g(a.base_),setPrototypeOf(){f(12)}},I={};function J(a,b){let c=a[e];return(c?r(c):a)[b]}function K(a,b){if(!(b in a))return;let c=g(a);for(;c;){let a=Object.getOwnPropertyDescriptor(c,b);if(a)return a;c=g(c)}}function L(a){!a.modified_&&(a.modified_=!0,a.parent_&&L(a.parent_))}function M(a){a.copy_||(a.copy_=s(a.base_,a.scope_.immer_.useStrictShallowCopy_))}function N(a,c){let d=p(a)?x("MapSet").proxyMap_(a,c):q(a)?x("MapSet").proxySet_(a,c):function(a,c){let d=Array.isArray(a),e={type_:+!!d,scope_:c?c.scope_:b,modified_:!1,finalized_:!1,assigned_:{},parent_:c,base_:a,draft_:null,copy_:null,revoke_:null,isManual_:!1},f=e,g=H;d&&(f=[e],g=I);let{revoke:h,proxy:i}=Proxy.revocable(f,g);return e.draft_=i,e.revoke_=h,i}(a,c);return(c?c.scope_:b).drafts_.push(d),d}l(H,(a,b)=>{I[a]=function(){return arguments[0]=arguments[0][0],b.apply(this,arguments)}}),I.deleteProperty=function(a,b){return I.set.call(this,a,b,void 0)},I.set=function(a,b,c){return H.set.call(this,a[0],b,c,a[0])};var O=new class{constructor(a){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(a,b,d)=>{let e;if("function"==typeof a&&"function"!=typeof b){let c=b;b=a;let d=this;return function(a=c,...e){return d.produce(a,a=>b.call(this,a,...e))}}if("function"!=typeof b&&f(6),void 0!==d&&"function"!=typeof d&&f(7),i(a)){let c=B(this),f=N(a,void 0),g=!0;try{e=b(f),g=!1}finally{g?z(c):A(c)}return y(c,d),D(e,c)}if(a&&"object"==typeof a)f(1,a);else{if(void 0===(e=b(a))&&(e=a),e===c&&(e=void 0),this.autoFreeze_&&t(e,!0),d){let b=[],c=[];x("Patches").generateReplacementPatches_(a,e,b,c),d(b,c)}return e}},this.produceWithPatches=(a,b)=>{let c,d;return"function"==typeof a?(b,...c)=>this.produceWithPatches(b,b=>a(b,...c)):[this.produce(a,b,(a,b)=>{c=a,d=b}),c,d]},"boolean"==typeof a?.autoFreeze&&this.setAutoFreeze(a.autoFreeze),"boolean"==typeof a?.useStrictShallowCopy&&this.setUseStrictShallowCopy(a.useStrictShallowCopy)}createDraft(a){var b;i(a)||f(8),h(a)&&(h(b=a)||f(10,b),a=function a(b){let c;if(!i(b)||v(b))return b;let d=b[e];if(d){if(!d.modified_)return d.base_;d.finalized_=!0,c=s(b,d.scope_.immer_.useStrictShallowCopy_)}else c=s(b,!0);return l(c,(b,d)=>{o(c,b,a(d))}),d&&(d.finalized_=!1),c}(b));let c=B(this),d=N(a,void 0);return d[e].isManual_=!0,A(c),d}finishDraft(a,b){let c=a&&a[e];c&&c.isManual_||f(9);let{scope_:d}=c;return y(d,b),D(void 0,d)}setAutoFreeze(a){this.autoFreeze_=a}setUseStrictShallowCopy(a){this.useStrictShallowCopy_=a}applyPatches(a,b){let c;for(c=b.length-1;c>=0;c--){let d=b[c];if(0===d.path.length&&"replace"===d.op){a=d.value;break}}c>-1&&(b=b.slice(c+1));let d=x("Patches").applyPatches_;return h(a)?d(a,b):this.produce(a,a=>d(a,b))}}().produce,P=a.i(72131);function Q(a){var b=(0,P.useState)(function(){return t("function"==typeof a?a():a,!0)}),c=b[1];return[b[0],(0,P.useCallback)(function(a){c("function"==typeof a?O(a):t(a))},[])]}a.s(["default",()=>ab],26347);var R=a.i(87924),S=a.i(5050),T=(0,S.createServerReference)("40de907f7c10e971b5c24d60612c7d922f3557dfc3",S.callServer,void 0,S.findSourceMapURL,"getBookAll"),U=(0,S.createServerReference)("4053bcc9f5b0433a51dab053297da6c5f635a9f753",S.callServer,void 0,S.findSourceMapURL,"removeBook"),V=(0,S.createServerReference)("403b3c53dd5485abaa019235c90e3dd91454cd3cd5",S.callServer,void 0,S.findSourceMapURL,"saveBook"),W=a.i(68114),X=a.i(32496),Y=a.i(27493),Z=a.i(75090),$=a.i(4655),_=a.i(24647),aa=a.i(20094);function ab({user_id:a,onSelect:b}){let[c,d]=(0,P.useState)([]),[e,f]=(0,P.useState)(1),[g,h]=(0,P.useState)(""),[i,j]=(0,P.useState)(!1),[k,l]=(0,P.useState)(!1),[m,n]=(0,P.useState)(!1),o=async()=>{l(!0),"success"===(await V({uuid:(0,W.getUUID)(),user_id:a,name:g,created_by:a,created_at:new Date,updated_at:new Date})).status?(h(""),aa.toast.success("save book success"),f(a=>a+1)):aa.toast.error("save book failed"),l(!1)},p=async a=>{l(!0),"success"===(await U(a)).status?(aa.toast.success("delete book success"),f(a=>a+1)):aa.toast.error("delete book failed"),l(!1)};return(0,P.useEffect)(()=>{(async()=>{n(!0);let b=await T(a);"success"===b.status?d(b.data):(console.log(b.error),aa.toast.error("load data error")),n(!1)})()},[a,e]),(0,R.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,R.jsx)($.Select,{label:"Select book",onChange:async a=>{let c=a.target.value;await b(c)},endContent:m&&(0,R.jsx)(Y.CircularProgress,{"aria-label":"Loading...",color:"default"}),children:c.map(a=>(0,R.jsx)(_.SelectItem,{textValue:a.name,children:a.name},a.uuid))}),(0,R.jsx)("div",{className:"flex flex-row gap-1",children:(0,R.jsx)(X.Button,{size:"sm",radius:"full",onPress:()=>j(!i),children:i?"finish":"edit"})}),i&&(0,R.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,R.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,R.jsx)(Z.Input,{label:"Name of Book",size:"sm",onChange:a=>h(a.target.value)}),(0,R.jsx)(X.Button,{size:"sm",radius:"full",isDisabled:k,onPress:o,children:"add"})]}),c.map(a=>(0,R.jsxs)("div",{className:"flex flex-row items-center justify-start px-2 gap-2 bg-sand-300",children:[a.name,(0,R.jsx)(X.Button,{size:"sm",radius:"full",isDisabled:k,onPress:()=>p(a.uuid),children:"delete"})]},a.uuid))]})]})}a.s(["default",()=>af],71040);var ac=(0,S.createServerReference)("404b3afd594e717aa257bb0e0230bf2c146f8e2094",S.callServer,void 0,S.findSourceMapURL,"getChapterAll"),ad=(0,S.createServerReference)("4012472e8be0864c6f3cad5ab31d8804928a9d5518",S.callServer,void 0,S.findSourceMapURL,"removeChapter"),ae=(0,S.createServerReference)("4076f29ed43eaaddad1d26d3634e0a333aeb9db5bc",S.callServer,void 0,S.findSourceMapURL,"saveChapter");function af({user_id:a,book_uuid:b,onSelect:c}){let[d,e]=(0,P.useState)([]),[f,g]=(0,P.useState)(1),[h,i]=(0,P.useState)(""),[j,k]=(0,P.useState)(""),[l,m]=(0,P.useState)(!1),[n,o]=(0,P.useState)(!1),[p,q]=(0,P.useState)(!1),r=async()=>{if(!b)return void aa.toast.error("no book selected");o(!0),"success"===(await ae({uuid:(0,W.getUUID)(),book_uuid:b,order_num:parseInt(h,10),name:j,created_by:a,created_at:new Date,updated_at:new Date})).status?(k(""),aa.toast.success("save chapter success"),g(a=>a+1)):aa.toast.error("save chapter failed"),o(!1)},s=async a=>{o(!0),"success"===(await ad(a)).status?(aa.toast.success("delete chapter success"),g(a=>a+1)):aa.toast.error("delete chapter failed"),o(!1)};return(0,P.useEffect)(()=>{(async()=>{q(!0);let a=await ac(b);"success"===a.status?e(a.data):(console.log(a.error),aa.toast.error("load data error")),q(!1)})()},[b,f]),(0,R.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,R.jsx)($.Select,{label:"Select chapter",onChange:async a=>{let b=a.target.value;await c(b)},endContent:p&&(0,R.jsx)(Y.CircularProgress,{"aria-label":"Loading...",color:"default"}),children:d.map(a=>(0,R.jsxs)(_.SelectItem,{textValue:`${a.order_num}, ${a.name}`,children:[a.order_num,", ",a.name]},a.uuid))}),(0,R.jsx)("div",{className:"flex flex-row gap-1",children:(0,R.jsx)(X.Button,{size:"sm",radius:"full",onPress:()=>m(!l),children:l?"finish":"edit"})}),l&&(0,R.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,R.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,R.jsx)(Z.Input,{label:"Order",type:"number",size:"sm",className:"w-1/5",onChange:a=>i(a.target.value)}),(0,R.jsx)(Z.Input,{label:"Name of Book",size:"sm",onChange:a=>k(a.target.value)}),(0,R.jsx)(X.Button,{size:"sm",radius:"full",isDisabled:n,onPress:r,children:"add"})]}),d.map(a=>(0,R.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 bg-sand-300",children:[a.order_num," - ",a.name,(0,R.jsx)(X.Button,{size:"sm",radius:"full",isDisabled:n,onPress:()=>s(a.uuid),children:"delete"})]},a.uuid))]})]})}}];

//# sourceMappingURL=node_modules_use-immer_dist_use-immer_module_mjs_97b18b0b._.js.map