module.exports=[54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},60955,a=>{"use strict";a.s(["ButtonGroup",()=>k],60955);var b=a.i(43105),c=a.i(65248),d=a.i(8933),e=a.i(70216),f=a.i(72131),g=a.i(5554),h=a.i(57076),i=a.i(87924),j=(0,c.forwardRef)((a,j)=>{let{Component:k,domRef:l,context:m,children:n,classNames:o,getButtonGroupProps:p}=function(a){var h,i;let j=(0,d.useProviderContext)(),[k,l]=(0,c.mapPropsVariants)(a,b.buttonGroup.variantKeys),{ref:m,as:n,children:o,color:p="default",size:q="md",variant:r="solid",radius:s,isDisabled:t=!1,isIconOnly:u=!1,disableRipple:v=null!=(h=null==j?void 0:j.disableRipple)&&h,disableAnimation:w=null!=(i=null==j?void 0:j.disableAnimation)&&i,className:x,...y}=k,z=(0,e.useDOMRef)(m),A=(0,f.useMemo)(()=>(0,b.buttonGroup)({...l,className:x}),[(0,g.objectToDeps)(l),x]),B=(0,f.useMemo)(()=>({size:q,color:p,variant:r,radius:s,isIconOnly:u,isDisabled:t,disableAnimation:w,disableRipple:v,fullWidth:!!(null==a?void 0:a.fullWidth)}),[q,p,r,s,t,u,w,v,null==a?void 0:a.fullWidth]);return{Component:n||"div",children:o,domRef:z,context:B,classNames:A,getButtonGroupProps:(0,f.useCallback)(()=>({role:"group",...y}),[y])}}({...a,ref:j});return(0,i.jsx)(h.ButtonGroupProvider,{value:m,children:(0,i.jsx)(k,{ref:l,className:o,...p(),children:n})})});j.displayName="HeroUI.ButtonGroup";var k=j},69532,9938,a=>{"use strict";a.s(["BaseSection",()=>d],69532);var b=a.i(72131);function c(a){return null}c.getCollectionNode=function*(a){let{children:c,title:d,items:e}=a;yield{type:"section",props:a,hasChildNodes:!0,rendered:d,"aria-label":a["aria-label"],*childNodes(){if("function"==typeof c){if(!e)throw Error("props.children was a function but props.items is missing");for(let a of e)yield{type:"item",value:a,renderer:c}}else{let a=[];b.default.Children.forEach(c,b=>{a.push({type:"item",element:b})}),yield*a}}}};let d=c;a.s(["FamiliarityList",()=>j,"FilterType",()=>e,"FilterTypeList",()=>f,"TagAll",()=>h,"TagNo",()=>i,"TagUnspecified",()=>g],9938);var e=function(a){return a.Normal="normal",a.Easy="easy",a.Unspecified="unspecified",a.Uncomplete="uncomplete",a}({});let f=[{value:"unspecified",description:"all"},{value:"normal",description:"familiarity < 6"},{value:"easy",description:"familiarity = 6"},{value:"uncomplete",description:"question or answer is empty"}],g="unspecified",h="all tagged",i="not tagged";!function(a){a[a.NewlyAdded=0]="NewlyAdded",a[a.StillUnfamiliar=1]="StillUnfamiliar",a[a.PassiveUnderstanding=2]="PassiveUnderstanding",a[a.RecognitionWithoutUnderstanding=3]="RecognitionWithoutUnderstanding",a[a.UnderstandingInContext=4]="UnderstandingInContext",a[a.ActiveRecall=5]="ActiveRecall",a[a.NaturalUsage=6]="NaturalUsage"}({});let j=[{value:0,description:"Newly Added",label:"newly added",color:"bg-slate-200"},{value:1,description:"Still Unfamiliar",label:"strange",color:"bg-red-200"},{value:2,description:"Passive Understanding",label:"known",color:"bg-orange-200"},{value:3,description:"Recognition Without Understanding",label:"familiar",color:"bg-amber-200"},{value:4,description:"Understanding in Context",label:"skilled",color:"bg-cyan-200"},{value:5,description:"Active Recall",label:"practiced",color:"bg-green-200"},{value:6,description:"Natural Usage",label:"easy & never appear again",color:"bg-lime-200"}]},90383,a=>{"use strict";a.s(["getTagAll",()=>c]);var b=a.i(5050),c=(0,b.createServerReference)("4095f7c893a6e8ff3a3cc28f9afa1133c52e04a5f0",b.callServer,void 0,b.findSourceMapURL,"getTagAll")},40253,a=>{"use strict";a.s(["DropdownSection",()=>b],40253);var b=a.i(69532).BaseSection},75511,a=>{"use strict";a.s(["default",()=>d]);var b=a.i(87924),c=a.i(38246);function d({list:a}){return(0,b.jsx)("div",{className:"flex flex-col w-full gap-4 py-4",children:a.map((a,d)=>(0,b.jsxs)("div",{className:"flex flex-col w-full items-start bg-slate-200 rounded-md p-1",children:[(0,b.jsx)("div",{className:"text-xl whitespace-pre-wrap",children:a}),(0,b.jsx)("div",{className:"flex flex-row w-full items-end justify-end gap-4",children:(0,b.jsx)(c.default,{className:"text-blue-600 hover:underline",target:"_blank",href:`/card/add?edit=y&content=${encodeURIComponent(a)}`,children:"Add to Card"})})]},d))})}},12924,a=>{"use strict";a.s(["default",()=>w],12924);var b=a.i(87924),c=a.i(32496),d=a.i(60955),e=a.i(95032),f=a.i(18745),g=a.i(27700),h=a.i(13046),i=a.i(84476),j=a.i(40253),k=a.i(47977),l=a.i(72131),m=a.i(68114),n=a.i(39154),o=a.i(75511),p=a.i(5050),q=(0,p.createServerReference)("606a918a95aa526d45257fa198e8861769431abd54",p.callServer,void 0,p.findSourceMapURL,"getCardTest"),r=(0,p.createServerReference)("40b7f31b3314f25033f6ad2ac38823191cb84a09d1",p.callServer,void 0,p.findSourceMapURL,"getCardTestByUUID"),s=(0,p.createServerReference)("40094db0b099f52cde170de7c95a3ff9f72e0982b9",p.callServer,void 0,p.findSourceMapURL,"saveCardReview"),t=a.i(9938),u=a.i(20094),v=(0,p.createServerReference)("40942d4c13b1a819e17bfd88fd751eb212f063d289",p.callServer,void 0,p.findSourceMapURL,"getExampleByWord");function w({user_id:a,tag_uuid:p,card_uuid:w}){let[x,y]=(0,l.useState)(),[z,A]=(0,l.useState)(!1),[B,C]=(0,l.useState)(!1),[D,E]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{if(w){let a=await r(w);"success"===a.status&&y(a.data)}else if(a&&p){let b=await q(a,p);"success"===b.status&&y(b.data)}})()},[w,p,a]);let F=async b=>{if(!x)return;if(a!==x.user_id)return void u.toast.error("this is not your card");let{repetitions:c,interval_days:d,ease_factor:e}=x;d||(d=0),e||(e=0),c||(c=0),b<3?(c=0,d=1):(d=0===c?1:1===c?6:Math.round(d*e),c+=1),(e+=.1-(5-b)*(.08+(5-b)*.02))<1.3&&(e=1.3);let f=new Date;f.setDate(f.getDate()+d),await s({uuid:x.uuid,card_uuid:x.card_uuid,user_id:x.user_id,interval_days:d,ease_factor:e,repetitions:c,familiarity:b,last_review_at:new Date,next_review_at:f})?window.location.reload():u.toast.error("save review error")};return(0,b.jsx)(b.Fragment,{children:x?(0,b.jsxs)("div",{className:"flex flex-col my-5 mx-5",children:[(0,b.jsxs)("div",{className:"flex flex-row gap-4 items-end justify-end",children:[(0,b.jsx)(c.Button,{as:k.Link,target:"_blank",color:"secondary",href:`/card/${x.uuid}/?edit=y`,children:"EDIT"}),(0,b.jsx)(c.Button,{color:"secondary",onPress:()=>window.location.reload(),children:"NEXT"})]}),(0,b.jsx)("div",{className:"flex flex-row items-center justify-center",children:x.card.question.length<30?(0,b.jsx)("div",{className:"my-5 font-bold text-2xl md:text-4xl lg:text-6xl xl:text-8xl",children:(0,b.jsx)("pre",{className:"font-roboto leading-none",children:x.card.question})}):(0,b.jsx)("div",{className:"my-5 font-bold text-base md:text-xl lg:text-2xl xl:text-4xl",children:(0,b.jsx)("pre",{className:"font-roboto leading-none",children:x.card.question})})}),(0,b.jsxs)("div",{className:"flex flex-row my-5 items-center justify-center gap-4",children:[x.card.suggestion.length>0?(0,b.jsx)(c.Button,{color:"primary",variant:"solid",onPress:()=>A(!z),children:z?"hide suggestion":"show suggestion"}):null,(0,b.jsx)(c.Button,{color:"primary",variant:"solid",onPress:()=>C(!B),children:B?"hide answer":"show answer"}),(0,b.jsx)(d.ButtonGroup,{variant:"solid",color:"primary",children:(0,b.jsxs)(e.Dropdown,{placement:"bottom-end",children:[(0,b.jsx)(f.DropdownTrigger,{children:(0,b.jsxs)(c.Button,{children:["feedback ",(0,b.jsx)(n.BiCaretDown,{})]})}),(0,b.jsx)(g.DropdownMenu,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",onSelectionChange:async a=>{a.currentKey&&await F(parseInt(a.currentKey))},children:(0,b.jsx)(j.DropdownSection,{items:t.FamiliarityList,children:t.FamiliarityList.map(a=>{let c;return(0,b.jsx)(h.DropdownItem,{description:a.description,className:`${(c=a.value,t.FamiliarityList.map(a=>a.color)[c])}`,children:`${a.value} - ${a.label}`},a.value)})})})]})})]}),z?(0,b.jsx)(i.Textarea,{isDisabled:!0,classNames:{input:"text-2xl leading-tight font-roboto"},defaultValue:x.card.suggestion}):null,B?(0,b.jsx)("div",{className:"MD my-1 text-base md:text-xl lg:text-2xl xl:text-4xl leading-tight font-roboto indent-0 whitespace-pre-wrap break-words hyphens-auto",dangerouslySetInnerHTML:{__html:(0,m.getHTML)(x.card.answer)}}):null,B?(0,b.jsx)(i.Textarea,{isDisabled:!0,classNames:{input:"text-2xl leading-tight font-roboto"},defaultValue:x.card.note}):null,x.card.note.indexOf('"lemma":"')>=0&&(0,b.jsx)("div",{className:"flex flex-row gap-4 items-center justify-center",children:(0,b.jsx)(c.Button,{color:"primary",onPress:async()=>{let a=x.card.note.match(/"lemma":"([^"]+)"/);if(a){let b=a[1].trim(),c=await v(b);"success"===c.status&&E(c.data)}},children:"View Examples"})}),D.length>0&&(0,b.jsx)(o.default,{list:D})]}):(0,b.jsx)("div",{children:"no test available"})})}},79452,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(87924),c=a.i(90383),d=a.i(72131),e=a.i(47977);function f({user_id:a}){let[f,g]=(0,d.useState)([]);return(0,d.useEffect)(()=>{(async()=>{if(!a)return;let b=await (0,c.getTagAll)(a);"success"===b.status&&g(b.data)})()},[a]),(0,b.jsxs)("div",{className:"flex flex-col items-start justify-center my-4",children:[(0,b.jsx)("div",{className:"text-2xl",children:"Select a tag as the scope"}),f.map(a=>(0,b.jsxs)(e.Link,{target:"_blank",className:"flex m-4 text-2xl font-bold text-blue-600 hover:underline",href:`/card/test?tag=${a.uuid}`,children:[a.tag," ",a.description?`(${a.description})`:""]},a.uuid))]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c501e67e._.js.map