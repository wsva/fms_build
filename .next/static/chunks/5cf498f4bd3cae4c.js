(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.s(["_",()=>t])},77148,e=>{"use strict";e.s(["Textarea",()=>z],77148);var t=e.i(34738),n=e.i(75540),s=e.i(73830),r=e.i(71645);function i(){return(i=Object.assign.bind()).apply(null,arguments)}var l=r.useLayoutEffect,a=function(e){var t=r.default.useRef(e);return l(function(){t.current=e}),t},o=function(e,t){if("function"==typeof e)return void e(t);e.current=t},d=function(e,t){var n=r.default.useRef();return r.default.useCallback(function(s){e.current=s,n.current&&o(n.current,null),n.current=t,t&&o(t,s)},[t])},c={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},u=function(e){Object.keys(c).forEach(function(t){e.style.setProperty(t,c[t],"important")})},h=null,p=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},m=function(){},f=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],x=!!document.documentElement.currentStyle,g=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=f.reduce(function(e,n){return e[n]=t[n],e},{}),s=n.boxSizing;if(""===s)return null;x&&"border-box"===s&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var r=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),i=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:r,borderSize:i}};function b(e,t,n){var s=a(n);r.useLayoutEffect(function(){var n=function(e){return s.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var v=function(e,t){b(document.body,"reset",function(n){e.current.form===n.target&&t(n)})},j=function(e){b(window,"resize",e)},y=function(e){b(document.fonts,"loadingdone",e)},_=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],w=r.forwardRef(function(e,t){var n=e.cacheMeasurements,s=e.maxRows,l=e.minRows,a=e.onChange,o=void 0===a?m:a,c=e.onHeightChange,f=void 0===c?m:c,x=function(e,t){if(null==e)return{};var n={};for(var s in e)if(({}).hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}(e,_),b=void 0!==x.value,w=r.useRef(null),C=d(w,t),S=r.useRef(0),N=r.useRef(),z=function(){var e=w.current,t=n&&N.current?N.current:g(e);if(t){N.current=t;var r,i,a,o,d,c,m,x,b,v,j,y=(r=e.value||e.placeholder||"x",void 0===(i=l)&&(i=1),void 0===(a=s)&&(a=1/0),h||((h=document.createElement("textarea")).setAttribute("tabindex","-1"),h.setAttribute("aria-hidden","true"),u(h)),null===h.parentNode&&document.body.appendChild(h),o=t.paddingSize,d=t.borderSize,m=(c=t.sizingStyle).boxSizing,Object.keys(c).forEach(function(e){h.style[e]=c[e]}),u(h),h.value=r,x=p(h,t),h.value=r,x=p(h,t),h.value="x",v=(b=h.scrollHeight-o)*i,"border-box"===m&&(v=v+o+d),x=Math.max(v,x),j=b*a,"border-box"===m&&(j=j+o+d),[x=Math.min(j,x),b]),_=y[0],C=y[1];S.current!==_&&(S.current=_,e.style.setProperty("height",_+"px","important"),f(_,{rowHeight:C}))}};return r.useLayoutEffect(z),v(w,function(){if(!b){var e=w.current.value;requestAnimationFrame(function(){var t=w.current;t&&e!==t.value&&z()})}}),j(z),y(z),r.createElement("textarea",i({},x,{onChange:function(e){b||z(),o(e)},ref:C}))}),C=e.i(19110),S=e.i(43476),N=(0,s.forwardRef)((e,s)=>{let{style:i,minRows:l=3,maxRows:a=8,cacheMeasurements:o=!1,disableAutosize:d=!1,onHeightChange:c,...u}=e,{Component:h,label:p,description:m,startContent:f,endContent:x,hasHelper:g,shouldLabelBeOutside:b,shouldLabelBeInside:v,isInvalid:j,errorMessage:y,getBaseProps:_,getLabelProps:N,getInputProps:z,getInnerWrapperProps:k,getInputWrapperProps:I,getHelperWrapperProps:R,getDescriptionProps:T,getErrorMessageProps:A,isClearable:M,getClearButtonProps:B}=(0,t.useInput)({...u,ref:s,isMultiline:!0}),[E,D]=(0,r.useState)(l>1),[W,L]=(0,r.useState)(!1),O=p?(0,S.jsx)("label",{...N(),children:p}):null,P=z(),F=d?(0,S.jsx)("textarea",{...P,style:(0,n.mergeProps)(P.style,null!=i?i:{})}):(0,S.jsx)(w,{...P,cacheMeasurements:o,"data-hide-scroll":(0,n.dataAttr)(!W),maxRows:a,minRows:l,style:(0,n.mergeProps)(P.style,null!=i?i:{}),onHeightChange:(e,t)=>{1===l&&D(e>=2*t.rowHeight),a>l&&L(e>=a*t.rowHeight),null==c||c(e,t)}}),H=(0,r.useMemo)(()=>M?(0,S.jsx)("button",{...B(),children:(0,S.jsx)(C.CloseFilledIcon,{})}):null,[M,B]),G=(0,r.useMemo)(()=>f||x?(0,S.jsxs)("div",{...k(),children:[f,F,x]}):(0,S.jsx)("div",{...k(),children:F}),[f,P,x,k]),U=j&&y,V=U||m;return(0,S.jsxs)(h,{..._(),children:[b?O:null,(0,S.jsxs)("div",{...I(),"data-has-multiple-rows":(0,n.dataAttr)(E),children:[v?O:null,G,H]}),g&&V?(0,S.jsx)("div",{...R(),children:U?(0,S.jsx)("div",{...A(),children:y}):(0,S.jsx)("div",{...T(),children:m})}):null]})});N.displayName="HeroUI.Textarea";var z=N},14877,e=>{"use strict";e.s(["default",()=>P],14877);var t=e.i(43476),n=e.i(71645),s=e.i(35889),r=e.i(86914),i=e.i(33716),l=e.i(72853),a=e.i(76331),o=e.i(8870),d=e.i(212),c=e.i(77148),u=e.i(24597),h=e.i(99749);class p{append(e){this.end_time=e.end_time,this.end_ms=e.end_ms,this.content_list.push(...e.content_list),this.translation_list.push(...e.translation_list)}playMedia(e,t){e.paused||e.pause();let n=t?this.extend_start_ms:this.start_ms,s=t?this.extend_end_ms:this.end_ms;e.currentTime=n/1e3,e.play();let r=setTimeout(()=>{e.removeEventListener("pause",i),e.pause()},s-n);function i(){clearTimeout(r)}e.addEventListener("pause",i)}getTip(){let e=this.content_list.join(" ").replaceAll(/[a-zA-Z0-9äÄöÖüÜßé]/g,"_"),t=0,n="";for(let s of e)"_"===s?t++:t>0&&(n+="".concat(t),t=0),n+=s;return t>0&&(n+="".concat(t)),n}cleanStyle(e){return e.replace(/<font[^>]*>/g,"").replace(/<\/font>/g,"")}content(){return this.content_list.join(" ")}translation(){return this.translation_list.join("\n")}first_line(){return this.content_list.length>0?this.content_list[0]:""}last_line(){return this.content_list.length>0?this.content_list[this.content_list.length-1]:""}time_str(){return"".concat(this.start_time," --> ").concat(this.end_time)}constructor(e,t){if((0,h._)(this,"init_status","error"),(0,h._)(this,"init_error","not initialized"),(0,h._)(this,"position",0),(0,h._)(this,"start_time",""),(0,h._)(this,"end_time",""),(0,h._)(this,"start_ms",0),(0,h._)(this,"end_ms",0),(0,h._)(this,"extend_start_ms",0),(0,h._)(this,"extend_end_ms",0),(0,h._)(this,"content_list",[]),(0,h._)(this,"translation_list",[]),e.length<2){this.init_error="too few lines";return}if(!e[0].match(/^\d+$/)){this.init_error="invalid position number: ".concat(e[0]);return}let n=f(e[1]);if(!n){this.init_error="invalid time format: ".concat(e[1]);return}this.init_status="success",this.init_error="",this.position=parseInt(e[0]),this.start_time=n.start_time,this.start_ms=n.start_ms,this.end_time=n.end_time,this.end_ms=n.end_ms,t?(e.length>2&&this.content_list.push(this.cleanStyle(e[2])),e.length>3&&e.slice(3).forEach(e=>this.translation_list.push(this.cleanStyle(e)))):e.length>2&&e.slice(2).forEach(e=>this.content_list.push(this.cleanStyle(e)))}}let m=(e,t,n,s)=>36e5*parseInt(e)+6e4*parseInt(t)+1e3*parseInt(n)+parseInt(s),f=e=>{let t=e.match(/((\d{2}):(\d{2}):(\d{2}),(\d{3})) --> ((\d{2}):(\d{2}):(\d{2}),(\d{3}))/);return t?{start_time:t[1],start_ms:m(t[2],t[3],t[4],t[5]),end_time:t[6],end_ms:m(t[7],t[8],t[9],t[10])}:null},x=e=>{let t=[];for(let n of e){if(t.length>0&&t[t.length-1].last_line().match(/[a-zA-Z0-9äÄöÖüÜßé,:-]$/)&&n.first_line().match(/^[0-9a-z]/)){t[t.length-1].append(n);continue}t.push(n)}for(let e=0;e<t.length;e++)t[e].position=e+1;return t},g=e=>{let t=e.replaceAll(/[a-zA-Z0-9äÄöÖüÜßé]/g,"_"),n=0,s="";for(let e of t)"_"===e?n++:n>0&&(s+="".concat(n),n=0),s+=e;return n>0&&(s+="".concat(n)),s},b=e=>e.replaceAll(/[^a-zA-Z0-9äÄöÖüÜßé]/g,""),v=(e,t)=>{let n=[],s="";for(let r of e){if(r.match(/[a-zA-Z0-9äÄöÖüÜßé]/)){s+=r;continue}""!==s&&(n.push({isWord:!0,content:s}),s=""),t||n.push({isWord:!1,content:r})}return""!==s&&n.push({isWord:!0,content:s}),n};var j=()=>(0,t.jsxs)("svg",{"aria-hidden":"true",fill:"none",height:"80%",role:"presentation",viewBox:"0 0 24 24",width:"80%",children:[(0,t.jsx)("path",{d:"M12 2C9.38 2 7.25 4.13 7.25 6.75C7.25 9.32 9.26 11.4 11.88 11.49C11.96 11.48 12.04 11.48 12.1 11.49C12.12 11.49 12.13 11.49 12.15 11.49C12.16 11.49 12.16 11.49 12.17 11.49C14.73 11.4 16.74 9.32 16.75 6.75C16.75 4.13 14.62 2 12 2Z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M17.0809 14.1489C14.2909 12.2889 9.74094 12.2889 6.93094 14.1489C5.66094 14.9989 4.96094 16.1489 4.96094 17.3789C4.96094 18.6089 5.66094 19.7489 6.92094 20.5889C8.32094 21.5289 10.1609 21.9989 12.0009 21.9989C13.8409 21.9989 15.6809 21.5289 17.0809 20.5889C18.3409 19.7389 19.0409 18.5989 19.0409 17.3589C19.0309 16.1289 18.3409 14.9889 17.0809 14.1489Z",fill:"currentColor"})]}),[y,_]=(0,e.i(26823).createContext)({name:"AvatarGroupContext",strict:!1}),w=e.i(52841),C=e.i(84898),S=e.i(79754),N=(0,C.tv)({slots:{base:["flex","relative","justify-center","items-center","box-border","overflow-hidden","align-middle","text-white","z-0",...S.dataFocusVisibleClasses],img:["flex","object-cover","w-full","h-full","transition-opacity","!duration-500","opacity-0","data-[loaded=true]:opacity-100"],fallback:[...S.translateCenterClasses,"flex","items-center","justify-center"],name:[...S.translateCenterClasses,"font-normal","text-center","text-inherit"],icon:[...S.translateCenterClasses,"flex","items-center","justify-center","text-inherit","w-full","h-full"]},variants:{size:{sm:{base:"w-8 h-8 text-tiny"},md:{base:"w-10 h-10 text-tiny"},lg:{base:"w-14 h-14 text-small"}},color:{default:{base:w.colorVariants.solid.default},primary:{base:w.colorVariants.solid.primary},secondary:{base:w.colorVariants.solid.secondary},success:{base:w.colorVariants.solid.success},warning:{base:w.colorVariants.solid.warning},danger:{base:w.colorVariants.solid.danger}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isBordered:{true:{base:"ring-2 ring-offset-2 ring-offset-background dark:ring-offset-background-dark"}},isDisabled:{true:{base:"opacity-disabled"}},isInGroup:{true:{base:["-ms-2 data-[hover=true]:-translate-x-3 rtl:data-[hover=true]:translate-x-3 transition-transform","data-[focus-visible=true]:-translate-x-3 rtl:data-[focus-visible=true]:translate-x-3"]}},isInGridGroup:{true:{base:"m-0 data-[hover=true]:translate-x-0"}},disableAnimation:{true:{base:"transition-none",img:"transition-none"},false:{}}},defaultVariants:{size:"md",color:"default",radius:"full"},compoundVariants:[{color:"default",isBordered:!0,class:{base:"ring-default"}},{color:"primary",isBordered:!0,class:{base:"ring-primary"}},{color:"secondary",isBordered:!0,class:{base:"ring-secondary"}},{color:"success",isBordered:!0,class:{base:"ring-success"}},{color:"warning",isBordered:!0,class:{base:"ring-warning"}},{color:"danger",isBordered:!0,class:{base:"ring-danger"}}]});(0,C.tv)({slots:{base:"flex items-center justify-center h-auto w-max",count:"hover:-translate-x-0"},variants:{isGrid:{true:"inline-grid grid-cols-4 gap-3"}}});var z=e.i(95494),k=e.i(20253),I=e.i(19477),R=e.i(75540),T=e.i(29427),A=e.i(23260),M=e.i(71330),B=(0,e.i(73830).forwardRef)((e,s)=>{let{Component:r,ImgComponent:i,src:l,icon:a=(0,t.jsx)(j,{}),alt:o,classNames:d,slots:c,name:u,showFallback:h,fallback:p,getInitials:m,getAvatarProps:f,getImageProps:x}=function(){var e,t,s,r,i,l,a,o;let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,z.useProviderContext)(),u=_(),h=!!u,{as:p,ref:m,src:f,name:x,icon:g,classNames:b,fallback:v,alt:j=x||"avatar",imgRef:y,color:w=null!=(e=null==u?void 0:u.color)?e:"default",radius:C=null!=(t=null==u?void 0:u.radius)?t:"full",size:S=null!=(s=null==u?void 0:u.size)?s:"md",isBordered:B=null!=(r=null==u?void 0:u.isBordered)&&r,isDisabled:E=null!=(i=null==u?void 0:u.isDisabled)&&i,isFocusable:D=!1,getInitials:W=R.safeText,ignoreFallback:L=!1,showFallback:O=!1,ImgComponent:P="img",imgProps:F,className:H,onError:G,disableAnimation:U,...V}=d,Z=p||"span",K=(0,k.useDOMRef)(m),q=(0,k.useDOMRef)(y),{isFocusVisible:$,isFocused:Y,focusProps:J}=(0,T.useFocusRing)(),{isHovered:Q,hoverProps:X}=(0,M.useHover)({isDisabled:E}),ee=null!=(l=null!=U?U:null==c?void 0:c.disableAnimation)&&l,et=null!=(o="object"==typeof P&&(null==(a=null==P?void 0:P.displayName)?void 0:a.includes("HeroUI")))&&o,en="loaded"===function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onLoad:t,onError:s,ignoreFallback:r,src:i,crossOrigin:l,srcSet:a,sizes:o,loading:d,shouldBypassImageLoad:c=!1}=e,u=n.useSyncExternalStore(()=>()=>{},()=>!0,()=>!1),h=(0,n.useRef)(u?new Image:null),[p,m]=(0,n.useState)("pending");(0,n.useEffect)(()=>{h.current&&(h.current.onload=e=>{f(),m("loaded"),null==t||t(e)},h.current.onerror=e=>{f(),m("failed"),null==s||s(e)})},[h.current]);let f=()=>{h.current&&(h.current.onload=null,h.current.onerror=null,h.current=null)},x=(0,n.useCallback)(()=>{if(!i)return"pending";if(r||c)return"loaded";let e=new Image;return(e.src=i,l&&(e.crossOrigin=l),a&&(e.srcset=a),o&&(e.sizes=o),d&&(e.loading=d),h.current=e,e.complete&&e.naturalWidth)?"loaded":"loading"},[i,l,a,o,t,s,d,c]);return(0,A.useSafeLayoutEffect)(()=>{u&&m(x())},[u,x]),r?"loaded":p}({src:f,onError:G,ignoreFallback:L,shouldBypassImageLoad:void 0!==p||"img"!==P&&!et}),es=!et,er=(!f||!en)&&O,ei=(0,n.useMemo)(()=>{var e;return N({color:w,radius:C,size:S,isBordered:B,isDisabled:E,isInGroup:h,disableAnimation:ee,isInGridGroup:null!=(e=null==u?void 0:u.isGrid)&&e})},[w,C,S,B,E,ee,h,null==u?void 0:u.isGrid]),el=(0,R.clsx)(null==b?void 0:b.base,H),ea=(0,n.useMemo)(()=>D||"button"===p,[D,p]),eo=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:K,tabIndex:ea?0:-1,"data-hover":(0,R.dataAttr)(Q),"data-focus":(0,R.dataAttr)(Y),"data-focus-visible":(0,R.dataAttr)($),className:ei.base({class:(0,R.clsx)(el,null==e?void 0:e.className)}),...(0,R.mergeProps)(V,X,ea?J:{})}},[ea,ei,el,J,V]),ed=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:q,src:f,"data-loaded":(0,R.dataAttr)(en),className:ei.img({class:null==b?void 0:b.img}),...(0,R.mergeProps)(F,e,(0,I.filterDOMProps)({disableAnimation:ee},{enabled:es}))}},[ei,en,F,ee,f,q,es]);return{Component:Z,ImgComponent:P,src:f,alt:j,icon:g,name:x,imgRef:q,slots:ei,classNames:b,fallback:v,isImgLoaded:en,showFallback:er,ignoreFallback:L,getInitials:W,getAvatarProps:eo,getImageProps:ed}}({...e,ref:s}),g=(0,n.useMemo)(()=>!h&&l?null:p?(0,t.jsx)("div",{"aria-label":o,className:c.fallback({class:null==d?void 0:d.fallback}),role:"img",children:p}):u?(0,t.jsx)("span",{"aria-label":o,className:c.name({class:null==d?void 0:d.name}),role:"img",children:m(u)}):(0,t.jsx)("span",{"aria-label":o,className:c.icon({class:null==d?void 0:d.icon}),role:"img",children:a}),[h,l,p,u,d]);return(0,t.jsxs)(r,{...f(),children:[l&&(0,t.jsx)(i,{...x(),alt:o}),g]})});B.displayName="HeroUI.Avatar";var E=e.i(64925),D=e.i(73665);function W(e){let{item:r,index:i,media:l,with_translation:a}=e,[o,c]=(0,n.useState)(""),[h,p]=(0,n.useState)(!1),[m,f]=(0,n.useState)(!1),x=e=>e===r.content()||b(e)===b(r.content());return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start w-full gap-1",children:[(0,t.jsx)(E.Tooltip,{content:"turn green on success: punctuation does not matter",children:(0,t.jsx)(B,{size:"sm",radius:"sm",name:"".concat(r.position),color:h?"success":"default"})}),(0,t.jsx)(E.Tooltip,{content:"shortcut: Ctrl+S, Ctrl+D, or type two spaces at the end",children:(0,t.jsx)(s.Button,{isIconOnly:!0,variant:"light",tabIndex:-1,onPress:()=>{l.paused?r.playMedia(l,!1):l.pause()},children:(0,t.jsx)(D.MdPlayCircle,{size:30})})}),(0,t.jsx)(E.Tooltip,{isOpen:m,placement:"top",className:"bg-slate-300",content:(0,t.jsx)("div",{className:"flex flex-col items-start justify-start text-xl px-4 py-2",children:(0,t.jsx)("div",{children:(e=>{let t=v(e,!0).map(e=>e.content),n=v(r.content(),!1);for(let e=0;e<n.length;e++)n[e].isWord&&!t.includes(n[e].content)&&(n[e].content=g(n[e].content));return n.map(e=>e.content).join("")})(o)})}),children:(0,t.jsx)(d.Input,{"aria-label":"input answer",variant:"bordered",id:"d-s-i-".concat(i),classNames:{input:"text-xl font-bold"},value:o,onChange:e=>{let t=e.target.value;t.endsWith("  ")?l.paused?r.playMedia(l,!1):l.pause():(c(t),!h&&x(t)&&p(!0),h&&!x(t)&&p(!1))},onFocus:()=>{f(!0)},onBlur:()=>{f(!1)},onKeyDown:e=>{e.ctrlKey&&"sS".includes(e.key)&&(l.paused?r.playMedia(l,!1):l.pause(),e.preventDefault()),e.ctrlKey&&"dD".includes(e.key)&&(l.paused?r.playMedia(l,!0):l.pause(),e.preventDefault())}})}),a?(0,t.jsx)(E.Tooltip,{placement:"top-end",className:"bg-slate-300",content:(0,t.jsx)("div",{className:"flex flex-col items-start justify-start text-xl px-4 py-2",children:(0,t.jsx)("pre",{children:r.translation_list.length>0?r.translation().replaceAll(/\d/g,"x"):"no translation"})}),children:(0,t.jsx)(s.Button,{isIconOnly:!0,variant:"light",tabIndex:-1,children:(0,t.jsx)(D.MdHelpOutline,{size:30})})}):null,(0,t.jsx)(E.Tooltip,{placement:"top-end",className:"bg-slate-300",content:(0,t.jsx)("div",{className:"text-xl px-4 py-2",children:r.content()}),children:(0,t.jsx)(s.Button,{isIconOnly:!0,variant:"light",tabIndex:-1,children:(0,t.jsx)(D.MdHelp,{size:30})})}),(0,t.jsx)(E.Tooltip,{color:"primary",content:"add card",children:(0,t.jsx)(s.Button,{isIconOnly:!0,variant:"light",tabIndex:-1,as:u.Link,target:"_blank",href:"/card/add?edit=y&question=".concat(encodeURIComponent(r.content())),children:(0,t.jsx)(D.MdFavorite,{size:20})})})]})}var L=e.i(33401);let O=e=>{let{href:n,children:s}=e;return(0,t.jsx)(u.Link,{href:n,className:"text-blue-600 underline",target:"_blank",children:s})};function P(){let[e,u]=(0,n.useState)(),[h,m]=(0,n.useState)(),[f,g]=(0,n.useState)(!1),[b,v]=(0,n.useState)(!1),[j,y]=(0,n.useState)(""),[_,w]=(0,n.useState)(""),[C,S]=(0,n.useState)([]),N=(0,n.useRef)(null),z=(0,n.useRef)(null),k=(0,n.useRef)(null),I=(0,n.useRef)(null),R=e=>{w(e);let t=((e,t)=>{let n=(e=>{let t=e.trim().replaceAll("\r\n","\n").replaceAll("\r","\n").split("\n"),n=[],s=[];for(let e of t){if(""===(e=e.trim())){s.length>0&&(n.push(s),s=[]);continue}s.push(e)}return s.length>0&&n.push(s),n})(e),s=[],r=n.map(e=>{let n=new p(e,t);return"error"===n.init_status&&s.push(n.init_error),n}).filter(e=>e.content_list.length>0);if(0===s.length){let e=x(x(x(r)));for(let t=0;t<e.length;t++)e[t].position=t+1,e[t].extend_start_ms=t>0?e[t-1].start_ms:e[t].start_ms,e[t].extend_end_ms=t+1<e.length?e[t+1].end_ms:e[t].end_ms;return{status:"success",data:e}}return{status:"error",error:s.join("\n")}})(e,f);"success"===t.status?t.data.length>0&&(S(t.data),y("")):y(t.error)},T=e=>()=>{let t=1e3*e.currentTime;for(let e=0;e<C.length;e++)if(t<=C[e].end_ms){let t=document.getElementById("d-s-i-".concat(e));null==t||t.scrollIntoView({behavior:"smooth",block:"center"}),null==t||t.focus();break}},A=e=>{e.addEventListener("timeupdate",T(e)),e.addEventListener("seeking",T(e))};return k.current&&A(k.current),I.current&&A(I.current),(0,t.jsxs)("div",{children:[e&&(0,t.jsx)("div",{className:"sticky top-0 p-4 z-50",children:(0,t.jsx)("audio",{className:"w-full",ref:k,controls:!0,src:e})}),h&&(0,t.jsx)("div",{className:"flex flex-row items-end justify-end fixed bottom-0 end-0 p-4 z-50",children:(0,t.jsx)("video",{className:"h-[30vh] w-auto max-w-full",ref:I,controls:!0,src:h})}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4 my-2",children:[(0,t.jsx)(d.Input,{className:"hidden",type:"file",ref:N,onChange:e=>{let t=e.target.files[0];return t.type.startsWith("audio/")?void u(URL.createObjectURL(t)):t.type.startsWith("video/")?void m(URL.createObjectURL(t)):void 0}}),!e&&!h&&(0,t.jsx)(s.Button,{variant:"solid",color:"primary",onPress:()=>{var e;return null==(e=N.current)?void 0:e.click()},children:"select audio/video"}),(0,t.jsx)(d.Input,{className:"hidden",type:"file",ref:z,onChange:async e=>{let t=e.target.files[0],n=(await t.text()).trim().replaceAll("\r\n","\n").replaceAll("\r","\n"),s=[];for(let e of n.split("\n"))if(!(s.length<1)||"1"===e){if(s.length>0&&e.endsWith("`;"))break;s.push(e)}R(s.join("\n"))}}),(!!e||!!h)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.ButtonGroup,{variant:"solid",color:"primary",isDisabled:!e&&!h,children:(0,t.jsxs)(i.Dropdown,{placement:"bottom-end",children:[(0,t.jsx)(l.DropdownTrigger,{children:(0,t.jsxs)(s.Button,{children:["select subtitle ",(0,t.jsx)(L.BiCaretDown,{})]})}),(0,t.jsxs)(a.DropdownMenu,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",onSelectionChange:e=>{var t;"no_translation"===e.currentKey?g(!1):g(!0),null==(t=z.current)||t.click()},children:[(0,t.jsx)(o.DropdownItem,{description:"This subtitle file does not contain translations.",children:"No Translation"},"no_translation"),(0,t.jsx)(o.DropdownItem,{description:"This subtitle file contains translations.",children:"With Translation"},"with_translation")]})]})}),(0,t.jsx)(s.Button,{variant:"solid",color:"primary",isDisabled:!e&&!h,onPress:()=>v(!b),children:"edit subtitle"})]})]}),j.length>0&&(0,t.jsx)("pre",{className:"my-4",children:j}),b&&(0,t.jsx)(c.Textarea,{variant:"bordered",value:_,className:"my-4",onChange:e=>R(e.target.value)}),!e&&!h&&(0,t.jsxs)("div",{className:"text-xl",children:[(0,t.jsx)("p",{children:"1, Practice dictation using videos (or audios) and their corresponding subtitles"}),(0,t.jsx)("p",{children:"2, Subtitle files should be in srt format"}),(0,t.jsx)("p",{children:"3, Example: TED"}),(0,t.jsxs)("div",{className:"ms-8 bg-slate-100",children:[(0,t.jsxs)("p",{children:["1, Download video from ",(0,t.jsx)(O,{href:"https://www.ted.com",children:"www.ted.com"}),': click "Share" to download MP4']}),(0,t.jsx)("p",{children:"2, Subtitles are already included in the video. You can extract them using an ffmpeg command:"}),(0,t.jsx)("p",{className:"ps-8",children:'ffprobe exampe.mp4 2>&1 | grep "Subtitle:"'}),(0,t.jsx)("p",{className:"ps-8",children:"find english subtitle, for example: #0:6[0x7](eng), to extract it:"}),(0,t.jsx)("p",{className:"ps-8",children:"ffmpeg -i exampe.mp4 -map 0:6 exampe.srt"})]}),(0,t.jsx)("p",{children:"4, Example: ARD Mediathek"}),(0,t.jsxs)("div",{className:"ms-8 bg-slate-100",children:[(0,t.jsxs)("p",{children:["1, Download video and subtitle using ",(0,t.jsx)(O,{href:"https://mediathekview.de/download/",children:"MediathekView"})]}),(0,t.jsxs)("p",{children:["2, Process and prepare subtitles ",(0,t.jsx)(O,{href:"/listening/subtitle/prepare",children:"here"})]})]}),(0,t.jsx)("p",{children:"5, Example: logo"}),(0,t.jsxs)("div",{className:"ms-8 bg-slate-100",children:[(0,t.jsx)("p",{children:"1, Download video/audio and html file from logo会员群"}),(0,t.jsx)("p",{children:"2, Use html file directly as subtitle file"})]})]}),(!!e||!!h)&&0===C.length&&(0,t.jsxs)("div",{className:"text-xl",children:[(0,t.jsx)("p",{children:"1, 如果是 logo 的用于听写的 html 文件，直接上传即可（选 With Translation）"}),(0,t.jsx)("p",{children:"2, 如果是其他字幕，文件应当是 srt 格式"}),(0,t.jsx)("p",{children:"3, 根据字幕中是否含有译文，点击不同的选项，同时应符合以下要求"}),(0,t.jsx)("p",{className:"ps-8",children:"a, 如果不包含译文，则每条字幕中原文可以有多行"}),(0,t.jsx)("p",{className:"ps-8",children:"b, 如果包含译文，则每条字幕中原文只能占一行，但译文可以有多行"}),(0,t.jsx)("p",{className:"ps-8",children:"c, 如果包含译文，原文在上，译文在下，且只能有一种译文"}),(0,t.jsx)("p",{className:"ps-8",children:"d, 原文和译文都要去掉格式信息，只保留文本"}),(0,t.jsx)("p",{children:"4, 如下字幕格式，包含原文和译文："}),(0,t.jsx)("pre",{className:"ps-8 bg-slate-100",children:"45\n00:02:32,560 --> 00:02:34,240\nWie bitte?\n你说什么？"}),(0,t.jsx)("p",{children:"5, 如下字幕格式，因为原文占用了 2 行，因此不再支持译文："}),(0,t.jsx)("pre",{className:"ps-8 bg-slate-100",children:"45\n00:02:32,560 --> 00:02:34,240\nWie \nbitte?"}),(0,t.jsxs)("p",{children:["6, 如下字幕格式是",(0,t.jsx)("b",{children:"不正确"}),"的，因为原文除了文本，还有字体、颜色等格式信息："]}),(0,t.jsx)("pre",{className:"ps-8 bg-slate-100",children:'45\n00:02:32,560 --> 00:02:34,240\n<font color="#ffffff">Wie bitte?</font>'})]}),(0,t.jsx)("div",{className:"flex flex-col items-center justify-start w-full gap-2 my-8",children:C.map((n,s)=>(0,t.jsx)(W,{item:n,index:s,with_translation:f,media:e?k.current:I.current},s))})]})}}]);