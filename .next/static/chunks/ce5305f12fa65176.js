(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,377148,e=>{"use strict";e.s(["Textarea",()=>M],377148);var t=e.i(834738),r=e.i(75540),a=e.i(273830),n=e.i(271645);function i(){return(i=Object.assign.bind()).apply(null,arguments)}var s=n.useLayoutEffect,o=function(e){var t=n.default.useRef(e);return s(function(){t.current=e}),t},l=function(e,t){if("function"==typeof e)return void e(t);e.current=t},d=function(e,t){var r=n.default.useRef();return n.default.useCallback(function(a){e.current=a,r.current&&l(r.current,null),r.current=t,t&&l(t,a)},[t])},c={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},u=function(e){Object.keys(c).forEach(function(t){e.style.setProperty(t,c[t],"important")})},f=null,g=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},m=function(){},h=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],x=!!document.documentElement.currentStyle,p=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=h.reduce(function(e,r){return e[r]=t[r],e},{}),a=r.boxSizing;if(""===a)return null;x&&"border-box"===a&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var n=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:n,borderSize:i}};function v(e,t,r){var a=o(r);n.useLayoutEffect(function(){var r=function(e){return a.current(e)};if(e)return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}},[])}var b=function(e,t){v(document.body,"reset",function(r){e.current.form===r.target&&t(r)})},y=function(e){v(window,"resize",e)},j=function(e){v(document.fonts,"loadingdone",e)},S=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],w=n.forwardRef(function(e,t){var r=e.cacheMeasurements,a=e.maxRows,s=e.minRows,o=e.onChange,l=void 0===o?m:o,c=e.onHeightChange,h=void 0===c?m:c,x=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,S),v=void 0!==x.value,w=n.useRef(null),T=d(w,t),R=n.useRef(0),z=n.useRef(),M=function(){var e=w.current,t=r&&z.current?z.current:p(e);if(t){z.current=t;var n,i,o,l,d,c,m,x,v,b,y,j=(n=e.value||e.placeholder||"x",void 0===(i=s)&&(i=1),void 0===(o=a)&&(o=1/0),f||((f=document.createElement("textarea")).setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),u(f)),null===f.parentNode&&document.body.appendChild(f),l=t.paddingSize,d=t.borderSize,m=(c=t.sizingStyle).boxSizing,Object.keys(c).forEach(function(e){f.style[e]=c[e]}),u(f),f.value=n,x=g(f,t),f.value=n,x=g(f,t),f.value="x",b=(v=f.scrollHeight-l)*i,"border-box"===m&&(b=b+l+d),x=Math.max(b,x),y=v*o,"border-box"===m&&(y=y+l+d),[x=Math.min(y,x),v]),S=j[0],T=j[1];R.current!==S&&(R.current=S,e.style.setProperty("height",S+"px","important"),h(S,{rowHeight:T}))}};return n.useLayoutEffect(M),b(w,function(){if(!v){var e=w.current.value;requestAnimationFrame(function(){var t=w.current;t&&e!==t.value&&M()})}}),y(M),j(M),n.createElement("textarea",i({},x,{onChange:function(e){v||M(),l(e)},ref:T}))}),T=e.i(619110),R=e.i(843476),z=(0,a.forwardRef)((e,a)=>{let{style:i,minRows:s=3,maxRows:o=8,cacheMeasurements:l=!1,disableAutosize:d=!1,onHeightChange:c,...u}=e,{Component:f,label:g,description:m,startContent:h,endContent:x,hasHelper:p,shouldLabelBeOutside:v,shouldLabelBeInside:b,isInvalid:y,errorMessage:j,getBaseProps:S,getLabelProps:z,getInputProps:M,getInnerWrapperProps:N,getInputWrapperProps:D,getHelperWrapperProps:P,getDescriptionProps:C,getErrorMessageProps:I,isClearable:O,getClearButtonProps:B}=(0,t.useInput)({...u,ref:a,isMultiline:!0}),[L,U]=(0,n.useState)(s>1),[F,H]=(0,n.useState)(!1),E=g?(0,R.jsx)("label",{...z(),children:g}):null,_=M(),A=d?(0,R.jsx)("textarea",{..._,style:(0,r.mergeProps)(_.style,null!=i?i:{})}):(0,R.jsx)(w,{..._,cacheMeasurements:l,"data-hide-scroll":(0,r.dataAttr)(!F),maxRows:o,minRows:s,style:(0,r.mergeProps)(_.style,null!=i?i:{}),onHeightChange:(e,t)=>{1===s&&U(e>=2*t.rowHeight),o>s&&H(e>=o*t.rowHeight),null==c||c(e,t)}}),W=(0,n.useMemo)(()=>O?(0,R.jsx)("button",{...B(),children:(0,R.jsx)(T.CloseFilledIcon,{})}):null,[O,B]),k=(0,n.useMemo)(()=>h||x?(0,R.jsxs)("div",{...N(),children:[h,A,x]}):(0,R.jsx)("div",{...N(),children:A}),[h,_,x,N]),Y=y&&j,K=Y||m;return(0,R.jsxs)(f,{...S(),children:[v?E:null,(0,R.jsxs)("div",{...D(),"data-has-multiple-rows":(0,r.dataAttr)(L),children:[b?E:null,k,W]}),p&&K?(0,R.jsx)("div",{...P(),children:Y?(0,R.jsx)("div",{...I(),children:j}):(0,R.jsx)("div",{...C(),children:m})}):null]})});z.displayName="HeroUI.Textarea";var M=z},31748,e=>{"use strict";e.s(["default",()=>j],31748);var t=e.i(843476),r=e.i(271645),a=e.i(736132),n=e.i(335889),i=e.i(356124),s=e.i(76220),o=e.i(377148),l=e.i(95187),d=(0,l.createServerReference)("408b8198d332645272c9534c57bdeba065c9c39ef4",l.callServer,void 0,l.findSourceMapURL,"getPlanAll"),c=(0,l.createServerReference)("4056a64720c76b13612801bae051511f2318a7e8f5",l.callServer,void 0,l.findSourceMapURL,"removePlan"),u=(0,l.createServerReference)("40bae7a31138ed4b570adbb979775db16b2a1ad634",l.callServer,void 0,l.findSourceMapURL,"savePlan"),f=e.i(714060),g=e.i(564925),m=e.i(473665);let h=new Map([["pending","bg-sand-300"],["completed","bg-green-200"],["failed","bg-red-200"]]);function x(e){let{item:r,handleUpdate:a}=e;return(0,t.jsx)("div",{className:"flex flex-col lg:flex-row items-center justify-start w-full ".concat(h.get(r.status)),children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,t.jsxs)("div",{className:"text-lg text-gray-500 select-none",children:[(e=>{let t=new Date(e),r=new Date;r.setHours(0,0,0,0);let a=new Date(r);return(a.setDate(r.getDate()-1),t.setHours(0,0,0,0),t.getTime()===r.getTime())?"Today":t.getTime()===a.getTime()?"Yesterday":t.toISOString().split("T")[0]})(r.start_at),"â€ƒfrom ",(e=>{let t=new Date(e);return t.setMinutes(t.getMinutes()),t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")})(r.start_at)]}),"pending"===r.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Tooltip,{placement:"bottom",content:"done",children:(0,t.jsx)(n.Button,{isIconOnly:!0,size:"sm",variant:"light",color:"success",onPress:async()=>{await a({...r,status:"completed"})},children:(0,t.jsx)(m.MdDone,{size:24})})}),(0,t.jsx)(g.Tooltip,{placement:"bottom",content:"failed",children:(0,t.jsx)(n.Button,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",onPress:async()=>{await a({...r,status:"failed"})},children:(0,t.jsx)(m.MdClose,{size:24})})})]})]})})}var p=(0,l.createServerReference)("40d7334b2285ba621268c728805ada6b8f5b842db9",l.callServer,void 0,l.findSourceMapURL,"getRecordAll"),v=(0,l.createServerReference)("404e9a418f2225a85b61a4685774ce60a1f2855c8f",l.callServer,void 0,l.findSourceMapURL,"saveRecord"),b=e.i(975157);function y(e){let{item:i,user_id:s,handleDelete:o,handleUpdate:l}=e,[d,c]=(0,r.useState)([]),[u,h]=(0,r.useState)(1),y=async()=>{let e=await v({uuid:(0,b.getUUID)(),user_id:s,plan_uuid:i.uuid,start_at:new Date,status:"pending",created_at:new Date,updated_at:new Date});"success"===e.status?h(e=>e+1):(console.log(e.error),(0,a.addToast)({title:"save data error",color:"danger"}))},j=async e=>{let t=await v({...e,updated_at:new Date});"success"===t.status?h(e=>e+1):(console.log(t.error),(0,a.addToast)({title:"save data error",color:"danger"}))};return(0,r.useEffect)(()=>{(async()=>{let e=await p(i.uuid);"success"===e.status?c(e.data):(console.log(e.error),(0,a.addToast)({title:"load data error",color:"danger"}))})()},[i,u]),(0,t.jsxs)("div",{className:"flex flex-col items-start justify-center w-full rounded-md mx-2 p-1 bg-sand-300",children:[(0,t.jsxs)("div",{className:"flex flex-row items-start justify-center w-full rounded-md p-1 gap-2",children:[(0,t.jsx)("div",{className:"flex-1 text-xl font-bold",children:"".concat(i.content," (").concat(i.minutes," min)")}),(0,t.jsx)(g.Tooltip,{placement:"bottom",content:"top",children:(0,t.jsx)(n.Button,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>l({...i,favorite:"Y"===i.favorite?"N":"Y"}),children:"Y"===i.favorite?(0,t.jsx)(m.MdOutlineStar,{className:"text-blue-700",size:24}):(0,t.jsx)(m.MdOutlineStarBorder,{size:24})})}),(0,t.jsx)(g.Tooltip,{placement:"bottom",content:"start",children:(0,t.jsx)(n.Button,{isIconOnly:!0,size:"sm",variant:"light",onPress:y,children:(0,t.jsx)(m.MdCelebration,{className:"text-blue-700",size:24})})}),"Y"!==i.favorite&&(0,t.jsx)(g.Tooltip,{placement:"bottom",content:"delete",children:(0,t.jsx)(n.Button,{isIconOnly:!0,size:"sm",variant:"light",onPress:async()=>{await o(i)},children:(0,t.jsx)(m.MdDelete,{className:"text-red-400",size:24})})})]}),d.length>0&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,t.jsx)(f.Divider,{}),d.map((e,r)=>(0,t.jsx)(x,{item:e,handleUpdate:j},r))]})]})}function j(e){let{user_id:l}=e,[f,g]=(0,r.useState)(!1),[m,h]=(0,r.useState)(15),[x,p]=(0,r.useState)(""),[v,j]=(0,r.useState)([]),[S,w]=(0,r.useState)(1),T=async e=>{let t=await c(e.uuid);"success"===t.status?w(e=>e+1):(console.log(t.error),(0,a.addToast)({title:"remove data error",color:"danger"}))},R=async e=>{let t=await u(e);"success"===t.status?w(e=>e+1):(console.log(t.error),(0,a.addToast)({title:"save data error",color:"danger"}))},z=async()=>{let e=x.trim();if(!e)return void(0,a.addToast)({title:"content is empty",color:"danger"});try{g(!0);let t=await u({uuid:(0,b.getUUID)(),user_id:l,content:e,favorite:"N",minutes:m,created_at:new Date,updated_at:new Date});"success"===t.status?(p(""),w(e=>e+1)):(console.log(t.error),(0,a.addToast)({title:"save data error",color:"danger"}))}finally{g(!1)}};return(0,r.useEffect)(()=>{(async()=>{let e=await d(l);"success"===e.status?j(e.data):(console.log(e.error),(0,a.addToast)({title:"load data error",color:"danger"}))})()},[l,S]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 my-4 bg-sand-300 p-2 rounded-md",children:[(0,t.jsx)(o.Textarea,{size:"lg",className:"w-full",label:"Plan content",classNames:{inputWrapper:"bg-sand-200",input:"text-md"},placeholder:"Do something",value:x,onChange:e=>p(e.target.value)}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,t.jsxs)(i.Select,{"aria-label":"time span",className:"max-w-sm",selectedKeys:[String(m)],onChange:e=>h(parseInt(e.target.value)),startContent:(0,t.jsx)("div",{className:"whitespace-nowrap font-bold",children:"for"}),children:[(0,t.jsx)(s.SelectItem,{textValue:"15 minutes",children:"15 minutes"},"15"),(0,t.jsx)(s.SelectItem,{textValue:"30 minutes",children:"30 minutes"},"30"),(0,t.jsx)(s.SelectItem,{textValue:"1 hour",children:"1 hour"},"60")]}),(0,t.jsx)(n.Button,{variant:"solid",color:"primary",isDisabled:f,onPress:z,children:"Add Plan"})]})]}),v.length>0&&(0,t.jsx)("div",{className:"flex flex-col items-center justify-center w-full gap-2 my-4",children:v.map(e=>(0,t.jsx)(y,{item:e,user_id:l,handleDelete:T,handleUpdate:R},e.uuid))})]})}}]);