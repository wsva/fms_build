(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.s(["_",()=>t])},77148,e=>{"use strict";e.s(["Textarea",()=>A],77148);var t=e.i(34738),r=e.i(75540),a=e.i(73830),i=e.i(71645);function n(){return(n=Object.assign.bind()).apply(null,arguments)}var s=i.useLayoutEffect,o=function(e){var t=i.default.useRef(e);return s(function(){t.current=e}),t},l=function(e,t){if("function"==typeof e)return void e(t);e.current=t},c=function(e,t){var r=i.default.useRef();return i.default.useCallback(function(a){e.current=a,r.current&&l(r.current,null),r.current=t,t&&l(t,a)},[t])},u={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},d=function(e){Object.keys(u).forEach(function(t){e.style.setProperty(t,u[t],"important")})},f=null,v=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},m=function(){},h=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],x=!!document.documentElement.currentStyle,p=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=h.reduce(function(e,r){return e[r]=t[r],e},{}),a=r.boxSizing;if(""===a)return null;x&&"border-box"===a&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),n=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:n}};function g(e,t,r){var a=o(r);i.useLayoutEffect(function(){var r=function(e){return a.current(e)};if(e)return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}},[])}var b=function(e,t){g(document.body,"reset",function(r){e.current.form===r.target&&t(r)})},y=function(e){g(window,"resize",e)},S=function(e){g(document.fonts,"loadingdone",e)},j=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],w=i.forwardRef(function(e,t){var r=e.cacheMeasurements,a=e.maxRows,s=e.minRows,o=e.onChange,l=void 0===o?m:o,u=e.onHeightChange,h=void 0===u?m:u,x=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,j),g=void 0!==x.value,w=i.useRef(null),R=c(w,t),L=i.useRef(0),k=i.useRef(),A=function(){var e=w.current,t=r&&k.current?k.current:p(e);if(t){k.current=t;var i,n,o,l,c,u,m,x,g,b,y,S=(i=e.value||e.placeholder||"x",void 0===(n=s)&&(n=1),void 0===(o=a)&&(o=1/0),f||((f=document.createElement("textarea")).setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),d(f)),null===f.parentNode&&document.body.appendChild(f),l=t.paddingSize,c=t.borderSize,m=(u=t.sizingStyle).boxSizing,Object.keys(u).forEach(function(e){f.style[e]=u[e]}),d(f),f.value=i,x=v(f,t),f.value=i,x=v(f,t),f.value="x",b=(g=f.scrollHeight-l)*n,"border-box"===m&&(b=b+l+c),x=Math.max(b,x),y=g*o,"border-box"===m&&(y=y+l+c),[x=Math.min(y,x),g]),j=S[0],R=S[1];L.current!==j&&(L.current=j,e.style.setProperty("height",j+"px","important"),h(j,{rowHeight:R}))}};return i.useLayoutEffect(A),b(w,function(){if(!g){var e=w.current.value;requestAnimationFrame(function(){var t=w.current;t&&e!==t.value&&A()})}}),y(A),S(A),i.createElement("textarea",n({},x,{onChange:function(e){g||A(),l(e)},ref:R}))}),R=e.i(19110),L=e.i(43476),k=(0,a.forwardRef)((e,a)=>{let{style:n,minRows:s=3,maxRows:o=8,cacheMeasurements:l=!1,disableAutosize:c=!1,onHeightChange:u,...d}=e,{Component:f,label:v,description:m,startContent:h,endContent:x,hasHelper:p,shouldLabelBeOutside:g,shouldLabelBeInside:b,isInvalid:y,errorMessage:S,getBaseProps:j,getLabelProps:k,getInputProps:A,getInnerWrapperProps:U,getInputWrapperProps:C,getHelperWrapperProps:N,getDescriptionProps:z,getErrorMessageProps:_,isClearable:O,getClearButtonProps:E}=(0,t.useInput)({...d,ref:a,isMultiline:!0}),[M,P]=(0,i.useState)(s>1),[T,F]=(0,i.useState)(!1),B=v?(0,L.jsx)("label",{...k(),children:v}):null,I=A(),H=c?(0,L.jsx)("textarea",{...I,style:(0,r.mergeProps)(I.style,null!=n?n:{})}):(0,L.jsx)(w,{...I,cacheMeasurements:l,"data-hide-scroll":(0,r.dataAttr)(!T),maxRows:o,minRows:s,style:(0,r.mergeProps)(I.style,null!=n?n:{}),onHeightChange:(e,t)=>{1===s&&P(e>=2*t.rowHeight),o>s&&F(e>=o*t.rowHeight),null==u||u(e,t)}}),W=(0,i.useMemo)(()=>O?(0,L.jsx)("button",{...E(),children:(0,L.jsx)(R.CloseFilledIcon,{})}):null,[O,E]),D=(0,i.useMemo)(()=>h||x?(0,L.jsxs)("div",{...U(),children:[h,H,x]}):(0,L.jsx)("div",{...U(),children:H}),[h,I,x,U]),K=y&&S,Q=K||m;return(0,L.jsxs)(f,{...j(),children:[g?B:null,(0,L.jsxs)("div",{...C(),"data-has-multiple-rows":(0,r.dataAttr)(M),children:[b?B:null,D,W]}),p&&Q?(0,L.jsx)("div",{...N(),children:K?(0,L.jsx)("div",{..._(),children:S}):(0,L.jsx)("div",{...z(),children:m})}):null]})});k.displayName="HeroUI.Textarea";var A=k},25093,33489,e=>{"use strict";e.s(["removeAudio",()=>r],25093);var t=e.i(95187),r=(0,t.createServerReference)("609477281c3fdc798568796631a9396a637055b1e7",t.callServer,void 0,t.findSourceMapURL,"removeAudio");e.s(["saveAudio",()=>a],33489);var a=(0,t.createServerReference)("701966b789c8cc0b1719fc94ef07fe6d1086a9b360",t.callServer,void 0,t.findSourceMapURL,"saveAudio")},55712,e=>{"use strict";e.s(["default",()=>y],55712);var t=e.i(43476),r=e.i(71645),a=e.i(35889),i=e.i(212),n=e.i(56124),s=e.i(76220),o=e.i(12041),l=e.i(77148),c=e.i(75157),u=e.i(70319),d=e.i(95187),f=(0,d.createServerReference)("00e126f498f5052a1ae3a379ceb1d3c92205c63618",d.callServer,void 0,d.findSourceMapURL,"getQuestionAll"),v=(0,d.createServerReference)("40cb24fe364a7d8f143f90ec78c0c6ab818ce0473b",d.callServer,void 0,d.findSourceMapURL,"removeQuestion"),m=(0,d.createServerReference)("40f47ad1b83b51788ddf901a01309f91c16f81c441",d.callServer,void 0,d.findSourceMapURL,"saveQuestion"),h=e.i(71508),x=e.i(25093),p=e.i(33489),g=e.i(24597);function b(e){let{user_id:r,item:a,handleDelete:i}=e;return(0,t.jsxs)("div",{className:"flex flex-col w-full items-start rounded-md p-1",children:[(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-start gap-2",children:(0,t.jsx)(g.Link,{target:"_blank",className:"text-2xl text-blue-600 hover:underline",href:"/speak/ask/".concat(a.uuid),children:a.title})}),(0,t.jsxs)("div",{className:"flex flex-row w-full items-center justify-end gap-4",children:[(0,t.jsx)(g.Link,{target:"_blank",href:"/speak/practice?user_id=".concat(a.user_id),className:"text-sm text-gray-500 hover:underline w-full",children:"by ".concat(a.user_id)}),a.user_id===r&&(0,t.jsx)(g.Link,{as:"button",isBlock:!0,color:"danger",className:"text-xl",onPress:async()=>{window.confirm("Are you sure to delete?")&&await i(a)},children:"delete"})]})]})}function y(e){let{user_id:d}=e,[g,y]=(0,r.useState)("local"),[S,j]=(0,r.useState)("video"),[w,R]=(0,r.useState)(),[L,k]=(0,r.useState)([]),[A,U]=(0,r.useState)(!1),[C,N]=(0,r.useState)(!1),[z,_]=(0,r.useState)(""),[O,E]=(0,r.useState)(),[M,P]=(0,r.useState)(),[T,F]=(0,r.useState)(),[B,I]=(0,r.useState)([]),[H,W]=(0,r.useState)(1),[D,K]=(0,r.useState)(!1),[Q,V]=(0,r.useState)(!1),[q,G]=(0,r.useState)(!1),J=(0,r.useRef)(null),X=async e=>{if(e.audio_path){let t=await (0,x.removeAudio)("ask","".concat(e.uuid,".wav"));if("error"===t.status){console.log(t.error),u.toast.error("delete failed");return}}if(e.video_path){let t=await (0,x.removeAudio)("ask","".concat(e.uuid,".mp4"));if("error"===t.status){console.log(t.error),u.toast.error("delete failed");return}}"success"===(await v(e.uuid)).status?(u.toast.success("delete success"),W(e=>e+1)):u.toast.error("delete failed")},Y=async()=>{if(!z)return void alert("title is empty");if(!T)return void alert("content is empty");if(!M)return void alert("audio is empty");let e=(0,c.getUUID)();if(G(!0),O&&"error"===(await (0,p.saveAudio)(O.data,"ask","".concat(e,".mp4"))).status){u.toast.error("save video failed"),G(!1);return}if(M&&"error"===(await (0,p.saveAudio)(M.data,"ask","".concat(e,".wav"))).status){u.toast.error("save audio failed"),G(!1);return}"success"===(await m({uuid:e,user_id:d,title:z,audio_path:M?"/api/data/ask/".concat(e,".wav"):"",video_path:O?"/api/data/ask/".concat(e,".mp4"):"",content:T,created_by:d,created_at:new Date,updated_at:new Date})).status?(u.toast.success("add success"),_(""),F(""),O&&(URL.revokeObjectURL(O.url),E(void 0)),M&&(URL.revokeObjectURL(M.url),P(void 0)),W(e=>e+1)):u.toast.error("add failed"),G(!1)},Z=async()=>{O&&(URL.revokeObjectURL(O.url),E(void 0)),M&&(URL.revokeObjectURL(M.url),P(void 0));let e=async e=>{E({data:e,url:URL.createObjectURL(e)})},t=async(e,t)=>{P({data:t,url:URL.createObjectURL(t)}),F("success"===e.status?e.data:""),"error"===e.status&&u.toast.error(e.error)};await (0,h.toggleRecording)({mode:S,setStateStream:R,stateRecorder:L,setStateRecorder:k,stateRecording:A,setStateRecording:U,recognize:!0,sttEngine:g,setStateProcessing:N,handleVideo:e,handleAudio:t})};return(0,r.useEffect)(()=>{(async()=>{V(!0);let e=await f();"success"===e.status?I(e.data):(console.log(e.error),u.toast.error("load data error")),V(!1)})(),J.current&&w&&(J.current.srcObject=w)},[H,J,w]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-4 my-4",children:[(0,t.jsx)(n.Select,{"aria-label":"stt engine",className:"max-w-sm",selectedKeys:[g],onChange:e=>y(e.target.value),startContent:(0,t.jsx)("div",{className:"whitespace-nowrap font-bold",children:"AI Engine"}),children:h.EngineList.map(e=>(0,t.jsx)(s.SelectItem,{textValue:e.value,children:e.value},e.key))}),(0,t.jsxs)(n.Select,{"aria-label":"stt engine",className:"max-w-sm",selectedKeys:[S],onChange:e=>j(e.target.value),startContent:(0,t.jsx)("div",{className:"whitespace-nowrap font-bold",children:"Mode"}),children:[(0,t.jsx)(s.SelectItem,{textValue:"video",children:"video"},"video"),(0,t.jsx)(s.SelectItem,{textValue:"audio",children:"audio"},"audio")]}),(0,t.jsx)(a.Button,{variant:"solid",color:"primary",id:"button-toggel-recording",isDisabled:!A&&C,onPress:async()=>{await Z()},children:A?"â¹ Stop Recording (Ctrl+A)":C?"Processing":"ðŸŽ¤ Read a Sentence (Ctrl+A)"})]}),A?(0,t.jsx)("video",{ref:J,autoPlay:!0,muted:!0,playsInline:!0}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center w-full gap-2 my-4",children:[(0,t.jsx)(i.Input,{label:"title",size:"lg",className:"w-full",value:z,onChange:e=>_(e.target.value)}),!!M&&(0,t.jsx)("audio",{controls:!0,src:M.url}),!!O&&(0,t.jsx)("video",{controls:!0,src:O.url}),(0,t.jsx)(l.Textarea,{size:"lg",className:"w-full",label:"content",classNames:{inputWrapper:"bg-sand-200",input:"text-xl"},value:T,onChange:e=>F(e.target.value)}),(0,t.jsx)(a.Button,{variant:"solid",color:"primary",id:"button-add-save",isDisabled:q,onPress:Y,children:"Add & Save (Ctrl+S)"})]}),Q&&(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4 my-4",children:(0,t.jsx)(o.Spinner,{classNames:{label:"text-foreground mt-4"},variant:"simple"})}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-end gap-4 my-4 mb-0",children:(0,t.jsx)(a.Button,{variant:"solid",color:"primary",isDisabled:!d,onPress:()=>K(!D),children:D?"All Texts":"Only My Texts"})}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-4 my-4",children:B.filter(e=>!D||e.user_id===d).map((e,r)=>(0,t.jsx)(b,{user_id:d,item:e,handleDelete:X},"".concat(r,"-").concat(e.uuid)))})]})}}]);