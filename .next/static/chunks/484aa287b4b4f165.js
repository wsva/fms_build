(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.s(["_",()=>t])},24597,e=>{"use strict";e.s(["Link",()=>h],24597);var t=e.i(84898),a=e.i(79754),s=(0,t.tv)({base:["relative inline-flex items-center outline-solid outline-transparent tap-highlight-transparent",...a.dataFocusVisibleClasses],variants:{size:{sm:"text-small",md:"text-medium",lg:"text-large"},color:{foreground:"text-foreground",primary:"text-primary",secondary:"text-secondary",success:"text-success",warning:"text-warning",danger:"text-danger"},underline:{none:"no-underline",hover:"hover:underline",always:"underline",active:"active:underline",focus:"focus:underline"},isBlock:{true:["px-2","py-1","hover:after:opacity-100","after:content-['']","after:inset-0","after:opacity-0","after:w-full","after:h-full","after:rounded-xl","after:transition-background","after:absolute"],false:"hover:opacity-hover active:opacity-disabled transition-opacity"},isDisabled:{true:"opacity-disabled cursor-default pointer-events-none"},disableAnimation:{true:"after:transition-none transition-none"}},compoundVariants:[{isBlock:!0,color:"foreground",class:"hover:after:bg-foreground/10"},{isBlock:!0,color:"primary",class:"hover:after:bg-primary/20"},{isBlock:!0,color:"secondary",class:"hover:after:bg-secondary/20"},{isBlock:!0,color:"success",class:"hover:after:bg-success/20"},{isBlock:!0,color:"warning",class:"hover:after:bg-warning/20"},{isBlock:!0,color:"danger",class:"hover:after:bg-danger/20"},{underline:["hover","always","active","focus"],class:"underline-offset-4"}],defaultVariants:{color:"primary",size:"md",isBlock:!1,underline:"none",isDisabled:!1}}),i=e.i(69080),r=e.i(50179),l=e.i(11458),n=e.i(49962),o=e.i(43027),c=e.i(73830),d=e.i(95494),u=e.i(20253),f=e.i(29427),x=e.i(75540),g=e.i(71645),m=e.i(43476),p=e=>(0,m.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",width:"1em",...e,children:[(0,m.jsx)("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),(0,m.jsx)("path",{d:"M15 3h6v6"}),(0,m.jsx)("path",{d:"M10 14L21 3"})]}),v=(0,c.forwardRef)((e,t)=>{let{Component:a,children:v,showAnchorIcon:h,anchorIcon:j=(0,m.jsx)(p,{className:"flex mx-1 text-current self-center"}),getLinkProps:b}=function(e){var t,a,m,p;let v=(0,d.useProviderContext)(),[h,j]=(0,c.mapPropsVariants)(e,s.variantKeys),{ref:b,as:y,children:w,anchorIcon:k,isExternal:C=!1,showAnchorIcon:N=!1,autoFocus:S=!1,className:_,onPress:P,onPressStart:L,onPressEnd:T,onClick:B,...D}=h,F=(0,u.useDOMRef)(b),R=null!=(a=null!=(t=null==e?void 0:e.disableAnimation)?t:null==v?void 0:v.disableAnimation)&&a,{linkProps:M}=function(e,t){let{elementType:a="a",onPress:s,onPressStart:c,onPressEnd:d,onClick:u,isDisabled:f,...x}=e,g={};"a"!==a&&(g={role:"link",tabIndex:f?void 0:0});let{focusableProps:m}=(0,n.useFocusable)(e,t),{pressProps:p,isPressed:v}=(0,o.usePress)({onClick:u,onPress:s,onPressStart:c,onPressEnd:d,isDisabled:f,ref:t}),h=(0,i.filterDOMProps)(x,{labelable:!0,isLink:"a"===a}),j=(0,r.mergeProps)(m,p),b=(0,l.useRouter)(),y=(0,l.useLinkProps)(e);return{isPressed:v,linkProps:(0,r.mergeProps)(h,y,{...j,...g,"aria-disabled":f||void 0,"aria-current":e["aria-current"],onClick:t=>{var a;null==(a=p.onClick)||a.call(p,t),(0,l.handleLinkClick)(t,b,e.href,e.routerOptions)}})}}({...D,onPress:P,onPressStart:L,onPressEnd:T,onClick:B,isDisabled:e.isDisabled,elementType:"".concat(y)},F),{isFocused:A,isFocusVisible:O,focusProps:U}=(0,f.useFocusRing)({autoFocus:S});C&&(D.rel=null!=(m=D.rel)?m:"noopener noreferrer",D.target=null!=(p=D.target)?p:"_blank");let V=(0,g.useMemo)(()=>s({...j,disableAnimation:R,className:_}),[(0,x.objectToDeps)(j),R,_]);return{Component:y||"a",children:w,anchorIcon:k,showAnchorIcon:N,getLinkProps:(0,g.useCallback)(()=>({ref:F,className:V,"data-focus":(0,x.dataAttr)(A),"data-disabled":(0,x.dataAttr)(e.isDisabled),"data-focus-visible":(0,x.dataAttr)(O),...(0,x.mergeProps)(U,M,D)}),[V,A,O,U,M,D])}}({ref:t,...e});return(0,m.jsx)(a,{...b(),children:(0,m.jsxs)(m.Fragment,{children:[v,h&&j]})})});v.displayName="HeroUI.Link";var h=v},35851,e=>{"use strict";e.s(["getCardTag",()=>a]);var t=e.i(95187),a=(0,t.createServerReference)("6038f68e3d063368453ef448c17f390899f805d334",t.callServer,void 0,t.findSourceMapURL,"getCardTag")},32049,e=>{"use strict";e.s(["DropdownSection",()=>t],32049);var t=e.i(99817).BaseSection},1138,e=>{"use strict";e.s(["default",()=>T],1138);var t=e.i(43476),a=e.i(86914),s=e.i(24597),i=e.i(42976),r=e.i(35577),l=e.i(46399),n=e.i(64925),o=e.i(33716),c=e.i(8870),d=e.i(76331),u=e.i(32049),f=e.i(72853),x=e.i(71645),g=e.i(35851),m=e.i(38063),p=e.i(30130),v=e.i(84735),h=e.i(52315),j=e.i(5483),b=e.i(53145),y=e.i(70319);function w(e){let{email:a,card:i,tag_list:r}=e,[l,n]=(0,x.useState)(!1),[o,c]=(0,x.useState)(r||[]),[d,u]=(0,x.useState)([]),[f,w]=(0,x.useState)([]),{handleSubmit:k}=(0,b.useForm)();(0,x.useEffect)(()=>{(async()=>{n(!0);let e=o;if(0==o.length){let t=await (0,m.getTagAll)(a);if("success"!==t.status)return;e=t.data,c(t.data)}let t=await (0,g.getCardTag)(a,i.uuid);"success"===t.status&&t.data.tag_list_added&&(u(t.data.tag_list_added),w(t.data.tag_list_added.filter(t=>e.map(e=>e.uuid).includes(t)))),n(!1)})()},[]);let C=async()=>{let e={uuid:i.uuid,tag_list_new:f.filter(e=>!d.includes(e)),tag_list_remove:d.filter(e=>!f.includes(e))};"success"===(await (0,p.saveCardTag)(e)).status?y.toast.success("save tag successfully"):y.toast.error("save tag failed")};return(0,t.jsx)(t.Fragment,{children:l?(0,t.jsx)(j.CircularProgress,{}):(0,t.jsx)("form",{onSubmit:k(C),children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-1",children:o.length>0?(0,t.jsx)(h.CheckboxGroup,{color:"success",value:f,onValueChange:w,orientation:"vertical",children:o.map(e=>(0,t.jsx)(v.Checkbox,{value:e.uuid,children:e.tag},e.uuid))}):(0,t.jsx)("div",{children:"not tag found"})}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-end gap-1",children:(0,t.jsx)(s.Link,{as:"button",type:"submit",className:"bg-blue-500 rounded-md text-slate-50 px-2",children:"save"})})]})})})}var k=e.i(49649),C=e.i(95187),N=(0,C.createServerReference)("600c1f02929ad62810bf187e9c34fac39abb79670f",C.callServer,void 0,C.findSourceMapURL,"setCardFamiliarity"),S=e.i(76854),_=e.i(75157);function P(e){let{email:a,card:i}=e,[r,l]=(0,x.useState)([]),[n,o]=(0,x.useState)([]),{handleSubmit:c}=(0,b.useForm)();(0,x.useEffect)(()=>{(async()=>{let e=await (0,m.getTagAll)(a);"success"===e.status&&l(e.data)})()},[]);let d=async()=>{let e={...i,uuid:(0,_.getUUID)(),user_id:a,familiarity:0,note:(i.note?i.note+"\n":"")+'{"collect_from":'.concat(JSON.stringify(i.user_id),', "source_uuid":').concat(JSON.stringify(i.uuid),"}"),updated_at:new Date};if("success"!==(await (0,S.saveCard)(e)).status)return void y.toast.error("save card failed");y.toast.success("save card successfully"),"success"===(await (0,p.saveCardTag)({uuid:i.uuid,tag_list_new:n})).status?y.toast.success("save tag successfully"):y.toast.error("save tag failed")};return(0,t.jsx)("form",{onSubmit:c(d),children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-1",children:r.length>0?(0,t.jsx)(h.CheckboxGroup,{color:"success",value:n,onValueChange:o,children:r.map(e=>(0,t.jsx)(v.Checkbox,{value:e.uuid,children:e.tag},e.uuid))}):(0,t.jsx)("div",{className:"px-1 pt-1",children:"not tag found"})}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-end gap-1",children:(0,t.jsx)(s.Link,{as:"button",type:"submit",className:"bg-blue-500 rounded-md text-slate-50 px-2",children:"save"})})]})})}function L(e){let{email:g,card:m,edit_view:p,tag_list:v}=e,[h,j]=(0,x.useState)(m.familiarity),b=m.user_id===g,C=e=>b?k.FamiliarityList.map(e=>e.color)[e]:k.FamiliarityList.map(e=>e.color)[0];return(0,t.jsxs)("div",{className:"flex flex-col w-full items-start rounded-md p-1 ".concat(C(h)),children:[(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-start gap-2",children:(0,t.jsx)(s.Link,{target:"_blank",href:"/card/".concat(m.uuid).concat(p?"?edit=y":""),className:"text-2xl text-blue-600 hover:underline",children:(0,t.jsx)("pre",{className:"font-roboto leading-none text-wrap",children:m.question})})}),!b&&(0,t.jsx)(s.Link,{target:"_blank",href:"/card/market?user_id=".concat(m.user_id),className:"text-sm text-gray-500 hover:underline",children:"by ".concat(m.user_id)}),(0,t.jsxs)("div",{className:"flex flex-row w-full items-end justify-end gap-4",children:[b&&(0,t.jsx)(n.Tooltip,{content:"current: ".concat(h,"\n").concat(k.FamiliarityList.map(e=>e.description)[h]),children:(0,t.jsx)(a.ButtonGroup,{variant:"solid",color:"primary",children:(0,t.jsxs)(o.Dropdown,{placement:"bottom-end",children:[(0,t.jsx)(f.DropdownTrigger,{children:(0,t.jsx)(s.Link,{as:"button",isBlock:!0,className:"text-xl",children:"set familiarity"})}),(0,t.jsx)(d.DropdownMenu,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",defaultSelectedKeys:[h],onSelectionChange:async e=>{if(e.currentKey){let t=parseInt(e.currentKey);j(t),await N(m.uuid,t)?y.toast.success("save familiarity successfully"):y.toast.error("save familiarity failed")}},children:(0,t.jsx)(u.DropdownSection,{items:k.FamiliarityList,children:k.FamiliarityList.map(e=>(0,t.jsx)(c.DropdownItem,{description:e.description,className:"".concat(C(e.value)),children:"".concat(e.value," - ").concat(e.label)},e.value))})})]})})}),b&&(0,t.jsxs)(i.Popover,{placement:"top-end",classNames:{content:"bg-slate-200"},children:[(0,t.jsx)(l.PopoverTrigger,{children:(0,t.jsx)(s.Link,{as:"button",isBlock:!0,className:"text-xl",children:"edit tag"})}),(0,t.jsx)(r.PopoverContent,{children:(0,t.jsx)(w,{email:g,card:m,tag_list:v||[]})})]}),!b&&(0,t.jsxs)(i.Popover,{placement:"top-end",classNames:{content:"bg-slate-200"},children:[(0,t.jsx)(l.PopoverTrigger,{children:(0,t.jsx)(s.Link,{as:"button",isBlock:!0,className:"text-xl",children:"collect"})}),(0,t.jsx)(r.PopoverContent,{children:(0,t.jsx)(P,{email:g,card:m})})]})]})]})}function T(e){let{email:a,edit_view:s,card_list:i}=e;return(0,t.jsx)("div",{className:"flex flex-col w-full gap-2",children:i.map(e=>(0,t.jsx)(L,{email:a,card:e,edit_view:s},e.uuid))})}},31060,e=>{"use strict";e.s(["default",()=>o],31060);var t=e.i(43476),a=e.i(71645),s=e.i(5483),i=e.i(98245),r=e.i(1138),l=e.i(95187),n=(0,l.createServerReference)("78c161b23102c4b7289ce56f518843cf6ee731a9e3",l.callServer,void 0,l.findSourceMapURL,"getCardsOfOthers");function o(e){let{email:l,user_id:o}=e,[c,d]=(0,a.useState)(!1),[u,f]=(0,a.useState)([]),[x,g]=(0,a.useState)(1),[m,p]=(0,a.useState)(0);return(0,a.useEffect)(()=>{(async()=>{d(!0);let e=await n(l,o,x,20);"success"===e.status?(console.log(e.total_records),f(e.data),p(e.total_pages||0)):console.log(e.error),d(!1)})()},[x]),(0,t.jsxs)("div",{className:"flex flex-col w-full gap-2 py-2 px-2",children:[(0,t.jsx)("div",{children:"Cards"}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,t.jsx)("div",{children:"Page"}),(0,t.jsx)(i.Pagination,{showControls:!0,loop:!0,variant:"bordered",total:m,page:x,onChange:g})]}),c?(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4",children:(0,t.jsx)(s.CircularProgress,{label:"Loading..."})}):(0,t.jsx)(r.default,{email:l,card_list:u,edit_view:!1}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,t.jsx)("div",{children:"Page"}),(0,t.jsx)(i.Pagination,{showControls:!0,loop:!0,variant:"bordered",total:m,page:x,onChange:g})]})]})}}]);