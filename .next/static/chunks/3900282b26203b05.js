(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,377148,e=>{"use strict";e.s(["Textarea",()=>z],377148);var t=e.i(834738),r=e.i(75540),a=e.i(273830),n=e.i(271645);function i(){return(i=Object.assign.bind()).apply(null,arguments)}var o=n.useLayoutEffect,s=function(e){var t=n.default.useRef(e);return o(function(){t.current=e}),t},l=function(e,t){if("function"==typeof e)return void e(t);e.current=t},c=function(e,t){var r=n.default.useRef();return n.default.useCallback(function(a){e.current=a,r.current&&l(r.current,null),r.current=t,t&&l(t,a)},[t])},u={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},d=function(e){Object.keys(u).forEach(function(t){e.style.setProperty(t,u[t],"important")})},f=null,p=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},h=function(){},v=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],g=!!document.documentElement.currentStyle,m=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=v.reduce(function(e,r){return e[r]=t[r],e},{}),a=r.boxSizing;if(""===a)return null;g&&"border-box"===a&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var n=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:n,borderSize:i}};function y(e,t,r){var a=s(r);n.useLayoutEffect(function(){var r=function(e){return a.current(e)};if(e)return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}},[])}var x=function(e,t){y(document.body,"reset",function(r){e.current.form===r.target&&t(r)})},b=function(e){y(window,"resize",e)},_=function(e){y(document.fonts,"loadingdone",e)},w=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],S=n.forwardRef(function(e,t){var r=e.cacheMeasurements,a=e.maxRows,o=e.minRows,s=e.onChange,l=void 0===s?h:s,u=e.onHeightChange,v=void 0===u?h:u,g=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,w),y=void 0!==g.value,S=n.useRef(null),j=c(S,t),P=n.useRef(0),C=n.useRef(),z=function(){var e=S.current,t=r&&C.current?C.current:m(e);if(t){C.current=t;var n,i,s,l,c,u,h,g,y,x,b,_=(n=e.value||e.placeholder||"x",void 0===(i=o)&&(i=1),void 0===(s=a)&&(s=1/0),f||((f=document.createElement("textarea")).setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),d(f)),null===f.parentNode&&document.body.appendChild(f),l=t.paddingSize,c=t.borderSize,h=(u=t.sizingStyle).boxSizing,Object.keys(u).forEach(function(e){f.style[e]=u[e]}),d(f),f.value=n,g=p(f,t),f.value=n,g=p(f,t),f.value="x",x=(y=f.scrollHeight-l)*i,"border-box"===h&&(x=x+l+c),g=Math.max(x,g),b=y*s,"border-box"===h&&(b=b+l+c),[g=Math.min(b,g),y]),w=_[0],j=_[1];P.current!==w&&(P.current=w,e.style.setProperty("height",w+"px","important"),v(w,{rowHeight:j}))}};return n.useLayoutEffect(z),x(S,function(){if(!y){var e=S.current.value;requestAnimationFrame(function(){var t=S.current;t&&e!==t.value&&z()})}}),b(z),_(z),n.createElement("textarea",i({},g,{onChange:function(e){y||z(),l(e)},ref:j}))}),j=e.i(619110),P=e.i(843476),C=(0,a.forwardRef)((e,a)=>{let{style:i,minRows:o=3,maxRows:s=8,cacheMeasurements:l=!1,disableAutosize:c=!1,onHeightChange:u,...d}=e,{Component:f,label:p,description:h,startContent:v,endContent:g,hasHelper:m,shouldLabelBeOutside:y,shouldLabelBeInside:x,isInvalid:b,errorMessage:_,getBaseProps:w,getLabelProps:C,getInputProps:z,getInnerWrapperProps:R,getInputWrapperProps:N,getHelperWrapperProps:O,getDescriptionProps:A,getErrorMessageProps:T,isClearable:F,getClearButtonProps:D}=(0,t.useInput)({...d,ref:a,isMultiline:!0}),[M,E]=(0,n.useState)(o>1),[L,k]=(0,n.useState)(!1),I=p?(0,P.jsx)("label",{...C(),children:p}):null,B=z(),U=c?(0,P.jsx)("textarea",{...B,style:(0,r.mergeProps)(B.style,null!=i?i:{})}):(0,P.jsx)(S,{...B,cacheMeasurements:l,"data-hide-scroll":(0,r.dataAttr)(!L),maxRows:s,minRows:o,style:(0,r.mergeProps)(B.style,null!=i?i:{}),onHeightChange:(e,t)=>{1===o&&E(e>=2*t.rowHeight),s>o&&k(e>=s*t.rowHeight),null==u||u(e,t)}}),W=(0,n.useMemo)(()=>F?(0,P.jsx)("button",{...D(),children:(0,P.jsx)(j.CloseFilledIcon,{})}):null,[F,D]),H=(0,n.useMemo)(()=>v||g?(0,P.jsxs)("div",{...R(),children:[v,U,g]}):(0,P.jsx)("div",{...R(),children:U}),[v,B,g,R]),q=b&&_,K=q||h;return(0,P.jsxs)(f,{...w(),children:[y?I:null,(0,P.jsxs)("div",{...N(),"data-has-multiple-rows":(0,r.dataAttr)(M),children:[x?I:null,H,W]}),m&&K?(0,P.jsx)("div",{...O(),children:q?(0,P.jsx)("div",{...T(),children:_}):(0,P.jsx)("div",{...A(),children:h})}):null]})});C.displayName="HeroUI.Textarea";var z=C},565236,e=>{"use strict";e.s(["getCardAll",()=>r]);var t=e.i(95187),r=(0,t.createServerReference)("7e696da51911ff4208e08cf8b6d31ff98018bc46cb",t.callServer,void 0,t.findSourceMapURL,"getCardAll")},832986,e=>{"use strict";e.s(["removeCard",()=>r]);var t=e.i(95187),r=(0,t.createServerReference)("409a0ae6314ffe62fe0a46074c485a706904507c6e",t.callServer,void 0,t.findSourceMapURL,"removeCard")},649980,e=>{"use strict";e.s(["useImmer",()=>W],649980),e.i(247167);var t,r=Symbol.for("immer-nothing"),a=Symbol.for("immer-draftable"),n=Symbol.for("immer-state");function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];throw Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var o=Object.getPrototypeOf;function s(e){return!!e&&!!e[n]}function l(e){var t;return!!e&&(u(e)||Array.isArray(e)||!!e[a]||!!(null==(t=e.constructor)?void 0:t[a])||v(e)||g(e))}var c=Object.prototype.constructor.toString();function u(e){if(!e||"object"!=typeof e)return!1;let t=o(e);if(null===t)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===c}function d(e,t){0===f(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function f(e){let t=e[n];return t?t.type_:Array.isArray(e)?1:v(e)?2:3*!!g(e)}function p(e,t){return 2===f(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function h(e,t,r){let a=f(e);2===a?e.set(t,r):3===a?e.add(r):e[t]=r}function v(e){return e instanceof Map}function g(e){return e instanceof Set}function m(e){return e.copy_||e.base_}function y(e,t){if(v(e))return new Map(e);if(g(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=u(e);if(!0!==t&&("class_only"!==t||r)){let t=o(e);return null!==t&&r?{...e}:Object.assign(Object.create(t),e)}{let t=Object.getOwnPropertyDescriptors(e);delete t[n];let r=Reflect.ownKeys(t);for(let a=0;a<r.length;a++){let n=r[a],i=t[n];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[n]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[n]})}return Object.create(o(e),t)}}function x(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _(e)||s(e)||!l(e)||(f(e)>1&&Object.defineProperties(e,{set:{value:b},add:{value:b},clear:{value:b},delete:{value:b}}),Object.freeze(e),t&&Object.values(e).forEach(e=>x(e,!0))),e}function b(){i(2)}function _(e){return Object.isFrozen(e)}var w={};function S(e){let t=w[e];return t||i(0,e),t}function j(e,t){t&&(S("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function P(e){C(e),e.drafts_.forEach(R),e.drafts_=null}function C(e){e===t&&(t=e.parent_)}function z(e){return t={drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function R(e){let t=e[n];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function N(e,t){t.unfinalizedDrafts_=t.drafts_.length;let a=t.drafts_[0];return void 0!==e&&e!==a?(a[n].modified_&&(P(t),i(4)),l(e)&&(e=O(t,e),t.parent_||T(t,e)),t.patches_&&S("Patches").generateReplacementPatches_(a[n].base_,e,t.patches_,t.inversePatches_)):e=O(t,a,[]),P(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==r?e:void 0}function O(e,t,r){if(_(t))return t;let a=t[n];if(!a)return d(t,(n,i)=>A(e,a,t,n,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return T(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;let t=a.copy_,n=t,i=!1;3===a.type_&&(n=new Set(t),t.clear(),i=!0),d(n,(n,o)=>A(e,a,t,n,o,r,i)),T(e,t,!1),r&&e.patches_&&S("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function A(e,t,r,a,n,i,o){if(s(n)){let o=O(e,n,i&&t&&3!==t.type_&&!p(t.assigned_,a)?i.concat(a):void 0);if(h(r,a,o),!s(o))return;e.canAutoFreeze_=!1}else o&&r.add(n);if(l(n)&&!_(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;O(e,n),(!t||!t.scope_.parent_)&&"symbol"!=typeof a&&(v(r)?r.has(a):Object.prototype.propertyIsEnumerable.call(r,a))&&T(e,n)}}function T(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&x(t,r)}var F={get(e,t){if(t===n)return e;let r=m(e);if(!p(r,t)){var a,i=e,o=r,s=t;let n=E(o,s);return n?"value"in n?n.value:null==(a=n.get)?void 0:a.call(i.draft_):void 0}let c=r[t];return e.finalized_||!l(c)?c:c===M(e.base_,t)?(k(e),e.copy_[t]=I(c,e)):c},has:(e,t)=>t in m(e),ownKeys:e=>Reflect.ownKeys(m(e)),set(e,t,r){let a=E(m(e),t);if(null==a?void 0:a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){let a=M(m(e),t),i=null==a?void 0:a[n];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if((r===a?0!==r||1/r==1/a:r!=r&&a!=a)&&(void 0!==r||p(e.base_,t)))return!0;k(e),L(e)}return!!(e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=r,e.assigned_[t]=!0,!0)},deleteProperty:(e,t)=>(void 0!==M(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,k(e),L(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let r=m(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:a.enumerable,value:r[t]}:a},defineProperty(){i(11)},getPrototypeOf:e=>o(e.base_),setPrototypeOf(){i(12)}},D={};function M(e,t){let r=e[n];return(r?m(r):e)[t]}function E(e,t){if(!(t in e))return;let r=o(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=o(r)}}function L(e){!e.modified_&&(e.modified_=!0,e.parent_&&L(e.parent_))}function k(e){e.copy_||(e.copy_=y(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function I(e,r){let a=v(e)?S("MapSet").proxyMap_(e,r):g(e)?S("MapSet").proxySet_(e,r):function(e,r){let a=Array.isArray(e),n={type_:+!!a,scope_:r?r.scope_:t,modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=F;a&&(i=[n],o=D);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}(e,r);return(r?r.scope_:t).drafts_.push(a),a}d(F,(e,t)=>{D[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),D.deleteProperty=function(e,t){return D.set.call(this,e,t,void 0)},D.set=function(e,t,r){return F.set.call(this,e[0],t,r,e[0])};var B=new class{createDraft(e){var t;l(e)||i(8),s(e)&&(s(t=e)||i(10,t),e=function e(t){let r;if(!l(t)||_(t))return t;let a=t[n];if(a){if(!a.modified_)return a.base_;a.finalized_=!0,r=y(t,a.scope_.immer_.useStrictShallowCopy_)}else r=y(t,!0);return d(r,(t,a)=>{h(r,t,e(a))}),a&&(a.finalized_=!1),r}(t));let r=z(this),a=I(e,void 0);return a[n].isManual_=!0,C(r),a}finishDraft(e,t){let r=e&&e[n];r&&r.isManual_||i(9);let{scope_:a}=r;return j(a,t),N(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let a=t[r];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}r>-1&&(t=t.slice(r+1));let a=S("Patches").applyPatches_;return s(e)?a(e,t):this.produce(e,e=>a(e,t))}constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,a)=>{let n;if("function"==typeof e&&"function"!=typeof t){let r=t;t=e;let a=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return a.produce(e,e=>t.call(this,e,...i))}}if("function"!=typeof t&&i(6),void 0!==a&&"function"!=typeof a&&i(7),l(e)){let r=z(this),i=I(e,void 0),o=!0;try{n=t(i),o=!1}finally{o?P(r):C(r)}return j(r,a),N(n,r)}if(e&&"object"==typeof e)i(1,e);else{if(void 0===(n=t(e))&&(n=e),n===r&&(n=void 0),this.autoFreeze_&&x(n,!0),a){let t=[],r=[];S("Patches").generateReplacementPatches_(e,n,t,r),a(t,r)}return n}},this.produceWithPatches=(e,t)=>{let r,a;if("function"==typeof e){var n=this;return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return n.produceWithPatches(t,t=>e(t,...a))}}return[this.produce(e,t,(e,t)=>{r=e,a=t}),r,a]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}}().produce,U=e.i(271645);function W(e){var t=(0,U.useState)(function(){return x("function"==typeof e?e():e,!0)}),r=t[1];return[t[0],(0,U.useCallback)(function(e){r("function"==typeof e?B(e):x(e))},[])]}},830902,662549,e=>{"use strict";e.s(["default",()=>h],830902);var t=e.i(843476),r=e.i(95187),a=(0,r.createServerReference)("40bfc869bbbf20b507a6e5e08f1954f7b95c338b87",r.callServer,void 0,r.findSourceMapURL,"getBookAll"),n=(0,r.createServerReference)("404d7a8d219053f95e9d63ee59197247826f3e1ac1",r.callServer,void 0,r.findSourceMapURL,"removeBook"),i=(0,r.createServerReference)("4034efe90032ca82773a090203323fe6fa291498fe",r.callServer,void 0,r.findSourceMapURL,"saveBook"),o=e.i(975157),s=e.i(736132),l=e.i(335889),c=e.i(805483),u=e.i(900212),d=e.i(356124),f=e.i(76220),p=e.i(271645);function h(e){let{user_id:r,onSelect:h}=e,[v,g]=(0,p.useState)([]),[m,y]=(0,p.useState)(1),[x,b]=(0,p.useState)(""),[_,w]=(0,p.useState)(!1),[S,j]=(0,p.useState)(!1),[P,C]=(0,p.useState)(!1),z=async()=>{j(!0);let e=await i({uuid:(0,o.getUUID)(),user_id:r,name:x,created_by:r,created_at:new Date,updated_at:new Date});"success"===e.status?(b(""),y(e=>e+1)):(console.log(e.error),(0,s.addToast)({title:"save data error",color:"danger"})),j(!1)},R=async e=>{j(!0);let t=await n(e);"success"===t.status?y(e=>e+1):(console.log(t.error),(0,s.addToast)({title:"remove data error",color:"danger"})),j(!1)};return(0,p.useEffect)(()=>{(async()=>{C(!0);let e=await a(r);"success"===e.status?g(e.data):(console.log(e.error),(0,s.addToast)({title:"load data error",color:"danger"})),C(!1)})()},[r,m]),(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsx)(d.Select,{label:"Select book",onChange:async e=>{let t=e.target.value;await h(t)},endContent:P&&(0,t.jsx)(c.CircularProgress,{"aria-label":"Loading...",color:"default"}),children:v.map(e=>(0,t.jsx)(f.SelectItem,{textValue:e.name,children:e.name},e.uuid))}),(0,t.jsx)("div",{className:"flex flex-row gap-1",children:(0,t.jsx)(l.Button,{size:"sm",radius:"full",onPress:()=>w(!_),children:_?"finish":"edit"})}),_&&(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 mx-0",children:[(0,t.jsx)(u.Input,{label:"Name",labelPlacement:"outside-left",size:"sm",classNames:{mainWrapper:"w-full"},onChange:e=>b(e.target.value)}),(0,t.jsx)(l.Button,{size:"sm",isDisabled:S,onPress:z,children:"add"})]}),v.map(e=>(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start px-2 gap-2 bg-sand-300",children:[e.name,(0,t.jsx)(l.Button,{size:"sm",isDisabled:S,onPress:()=>R(e.uuid),children:"delete"})]},e.uuid))]})]})}e.s(["default",()=>y],662549);var v=(0,r.createServerReference)("400be05ef2c3afb7bc69326ca1f01ef5a1fde7b160",r.callServer,void 0,r.findSourceMapURL,"getChapterAll"),g=(0,r.createServerReference)("40c2a59eb19ba6ac9c5b5c7648688130c9e5ad7031",r.callServer,void 0,r.findSourceMapURL,"removeChapter"),m=(0,r.createServerReference)("40fac8f82be15fe108ec31a0097e5540dd10bb2b23",r.callServer,void 0,r.findSourceMapURL,"saveChapter");function y(e){let{user_id:r,book_uuid:a,onSelect:n}=e,[i,h]=(0,p.useState)([]),[y,x]=(0,p.useState)(1),[b,_]=(0,p.useState)(""),[w,S]=(0,p.useState)(""),[j,P]=(0,p.useState)(!1),[C,z]=(0,p.useState)(!1),[R,N]=(0,p.useState)(!1),O=async()=>{if(!a)return void(0,s.addToast)({title:"no book selected",color:"danger"});z(!0);let e=await m({uuid:(0,o.getUUID)(),book_uuid:a,order_num:parseInt(b,10),name:w,created_by:r,created_at:new Date,updated_at:new Date});"success"===e.status?(S(""),x(e=>e+1)):(console.log(e.error),(0,s.addToast)({title:"save data error",color:"danger"})),z(!1)},A=async e=>{z(!0);let t=await g(e);"success"===t.status?x(e=>e+1):(console.log(t.error),(0,s.addToast)({title:"remove data error",color:"danger"})),z(!1)};return(0,p.useEffect)(()=>{(async()=>{if(!a)return;N(!0);let e=await v(a);"success"===e.status?h(e.data):(console.log(e.error),(0,s.addToast)({title:"load data error",color:"danger"})),N(!1)})()},[a,y]),(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsx)(d.Select,{label:"Select chapter",onChange:async e=>{let t=e.target.value;await n(t)},endContent:R&&(0,t.jsx)(c.CircularProgress,{"aria-label":"Loading...",color:"default"}),children:i.map(e=>(0,t.jsxs)(f.SelectItem,{textValue:"".concat(e.order_num,", ").concat(e.name),children:[e.order_num,", ",e.name]},e.uuid))}),(0,t.jsx)("div",{className:"flex flex-row gap-1",children:(0,t.jsx)(l.Button,{size:"sm",radius:"full",onPress:()=>P(!j),children:j?"finish":"edit"})}),j&&(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,t.jsx)(u.Input,{label:"Order",labelPlacement:"outside-left",type:"number",size:"sm",className:"w-2/5",onChange:e=>_(e.target.value)}),(0,t.jsx)(u.Input,{label:"Name",labelPlacement:"outside-left",size:"sm",classNames:{mainWrapper:"w-full"},onChange:e=>S(e.target.value)}),(0,t.jsx)(l.Button,{size:"sm",isDisabled:C,onPress:O,children:"add"})]}),i.map(e=>(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 bg-sand-300",children:[e.order_num," - ",e.name,(0,t.jsx)(l.Button,{size:"sm",isDisabled:C,onPress:()=>A(e.uuid),children:"delete"})]},e.uuid))]})]})}},25642,e=>{"use strict";e.s(["Item",()=>b,"default",()=>_]);var t=e.i(843476),r=e.i(271645),a=e.i(649980),n=e.i(736132),i=e.i(335889),o=e.i(805483),s=e.i(798245),l=e.i(112041),c=e.i(377148),u=e.i(564925),d=e.i(975157),f=e.i(830902),p=e.i(662549),h=e.i(473665),v=e.i(565236),g=e.i(832986),m=e.i(416168),y=e.i(882823),x=e.i(249649);function b(e){let{item:a,handleUpdate:n,handleDelete:o}=e,[s,l]=(0,r.useState)(!1),[d,f]=(0,r.useState)(a);return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[(0,t.jsx)(i.Button,{variant:"solid",color:"primary",id:"button-add-save",onPress:()=>l(!s),children:s?"Cancel":"Edit"}),s&&(0,t.jsx)(i.Button,{variant:"solid",color:"primary",id:"button-add-save",onPress:async()=>await n(d),children:"Save"}),(0,t.jsx)(u.Tooltip,{placement:"top",content:"delete",children:(0,t.jsx)(i.Button,{isIconOnly:!0,variant:"light",color:"danger",className:"w-fit h-fit",onPress:async()=>{window.confirm("Are you sure to delete?")&&await o(a)},children:(0,t.jsx)(h.MdDelete,{size:20})})})]}),s?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(c.Textarea,{label:"sentence",classNames:{input:"text-xl leading-tight font-roboto"},value:d.question,onChange:e=>f({...d,question:e.target.value})}),(0,t.jsx)(c.Textarea,{label:"note",classNames:{input:"text-xl leading-tight font-roboto"},value:d.answer,onChange:e=>f({...d,answer:e.target.value})})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:d.question}),(0,t.jsx)("div",{children:d.answer})]})]})}function _(e){let{user_id:u}=e,[h,_]=(0,r.useState)(""),[w,S]=(0,r.useState)(""),[j,P]=(0,r.useState)(),[C,z]=(0,a.useImmer)([]),[R,N]=(0,r.useState)(!1),[O,A]=(0,r.useState)(!1),[T,F]=(0,r.useState)(1),[D,M]=(0,r.useState)(0),E=(0,r.useMemo)(()=>C.slice().reverse(),[C]),L=async e=>{N(!0);let t=await (0,v.getCardAll)(u,x.FilterType.Unspecified,e,"",T,20);"success"===t.status&&(M(t.total_pages||0),z(e=>{for(let r of(e.length=0,t.data))e.push(r)})),N(!1)},k=async e=>{let t=await (0,m.saveCard)(e);if("success"!==t.status){console.log(t.error),(0,n.addToast)({title:"save data error",color:"danger"});return}z(t=>{let r=t.findIndex(t=>t.uuid===e.uuid);r>=0&&(t[r]={...e})})},I=async e=>{let t=await (0,g.removeCard)(e.uuid);if("success"!==t.status){console.log(t.error),(0,n.addToast)({title:"remove data error",color:"danger"});return}z(t=>{let r=t.findIndex(t=>t.uuid===e.uuid);r>=0&&t.splice(r,1)}),(0,n.addToast)({title:"remove data success",color:"success"})},B=async()=>{if(!j||!j.question||!j.answer)return;A(!0);let e={uuid:(0,d.getUUID)(),user_id:u,question:j.question,suggestion:"",answer:j.answer,familiarity:0,note:"",created_at:new Date,updated_at:new Date},t=await (0,m.saveCard)(e);if("error"===t.status){console.log(t.error),(0,n.addToast)({title:"save data error",color:"danger"}),A(!1);return}let r=await (0,y.saveCardTag)({...e,tag_list_new:[w]});if("error"===r.status){console.log(r.error),(0,n.addToast)({title:"save data error",color:"danger"}),A(!1);return}z(t=>{t.push(e)}),P(void 0),(0,n.addToast)({title:"save data success",color:"success"}),A(!1)};return(0,r.useEffect)(()=>{let e=e=>{if(e.ctrlKey&&"s"===e.key){e.preventDefault();let t=document.getElementById("button-add-save");null==t||t.click()}};return document.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 my-4",children:[(0,t.jsx)(f.default,{user_id:u,onSelect:async e=>{_(e)}}),(0,t.jsx)(p.default,{user_id:u,book_uuid:h,onSelect:async e=>{S(e),P(void 0),await L(e)}})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(c.Textarea,{label:"sentence",classNames:{input:"text-xl leading-tight font-roboto"},value:null==j?void 0:j.question,onChange:e=>P({...j,question:e.target.value})}),(0,t.jsx)(c.Textarea,{label:"note",classNames:{input:"text-xl leading-tight font-roboto"},value:null==j?void 0:j.answer,onChange:e=>P({...j,answer:e.target.value})}),(0,t.jsx)(i.Button,{variant:"solid",color:"primary",id:"button-add-save",isDisabled:!j||O,onPress:B,children:"Add & Save (Ctrl+S)"})]}),R&&(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4 my-4",children:(0,t.jsx)(l.Spinner,{classNames:{label:"text-foreground mt-4"},variant:"simple"})}),R?(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4",children:(0,t.jsx)(o.CircularProgress,{label:"Loading..."})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,t.jsx)("div",{children:"Page"}),(0,t.jsx)(s.Pagination,{showControls:!0,loop:!0,variant:"bordered",total:D,page:T,onChange:F})]}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-4 my-4",children:E.map((e,r)=>(0,t.jsx)(b,{item:e,handleUpdate:k,handleDelete:I},"".concat(r,"-").concat(e.uuid)))}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,t.jsx)("div",{children:"Page"}),(0,t.jsx)(s.Pagination,{showControls:!0,loop:!0,variant:"bordered",total:D,page:T,onChange:F})]})]})]})}}]);