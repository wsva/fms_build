(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.s(["_",()=>t])},77148,e=>{"use strict";e.s(["Textarea",()=>C],77148);var t=e.i(34738),n=e.i(75540),r=e.i(73830),a=e.i(71645);function i(){return(i=Object.assign.bind()).apply(null,arguments)}var s=a.useLayoutEffect,l=function(e){var t=a.default.useRef(e);return s(function(){t.current=e}),t},o=function(e,t){if("function"==typeof e)return void e(t);e.current=t},u=function(e,t){var n=a.default.useRef();return a.default.useCallback(function(r){e.current=r,n.current&&o(n.current,null),n.current=t,t&&o(t,r)},[t])},c={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},d=function(e){Object.keys(c).forEach(function(t){e.style.setProperty(t,c[t],"important")})},f=null,m=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},g=function(){},h=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],p=!!document.documentElement.currentStyle,x=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=h.reduce(function(e,n){return e[n]=t[n],e},{}),r=n.boxSizing;if(""===r)return null;p&&"border-box"===r&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var a=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),i=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:a,borderSize:i}};function v(e,t,n){var r=l(n);a.useLayoutEffect(function(){var n=function(e){return r.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var b=function(e,t){v(document.body,"reset",function(n){e.current.form===n.target&&t(n)})},y=function(e){v(window,"resize",e)},S=function(e){v(document.fonts,"loadingdone",e)},w=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],j=a.forwardRef(function(e,t){var n=e.cacheMeasurements,r=e.maxRows,s=e.minRows,l=e.onChange,o=void 0===l?g:l,c=e.onHeightChange,h=void 0===c?g:c,p=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,w),v=void 0!==p.value,j=a.useRef(null),R=u(j,t),z=a.useRef(0),P=a.useRef(),C=function(){var e=j.current,t=n&&P.current?P.current:x(e);if(t){P.current=t;var a,i,l,o,u,c,g,p,v,b,y,S=(a=e.value||e.placeholder||"x",void 0===(i=s)&&(i=1),void 0===(l=r)&&(l=1/0),f||((f=document.createElement("textarea")).setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),d(f)),null===f.parentNode&&document.body.appendChild(f),o=t.paddingSize,u=t.borderSize,g=(c=t.sizingStyle).boxSizing,Object.keys(c).forEach(function(e){f.style[e]=c[e]}),d(f),f.value=a,p=m(f,t),f.value=a,p=m(f,t),f.value="x",b=(v=f.scrollHeight-o)*i,"border-box"===g&&(b=b+o+u),p=Math.max(b,p),y=v*l,"border-box"===g&&(y=y+o+u),[p=Math.min(y,p),v]),w=S[0],R=S[1];z.current!==w&&(z.current=w,e.style.setProperty("height",w+"px","important"),h(w,{rowHeight:R}))}};return a.useLayoutEffect(C),b(j,function(){if(!v){var e=j.current.value;requestAnimationFrame(function(){var t=j.current;t&&e!==t.value&&C()})}}),y(C),S(C),a.createElement("textarea",i({},p,{onChange:function(e){v||C(),o(e)},ref:R}))}),R=e.i(19110),z=e.i(43476),P=(0,r.forwardRef)((e,r)=>{let{style:i,minRows:s=3,maxRows:l=8,cacheMeasurements:o=!1,disableAutosize:u=!1,onHeightChange:c,...d}=e,{Component:f,label:m,description:g,startContent:h,endContent:p,hasHelper:x,shouldLabelBeOutside:v,shouldLabelBeInside:b,isInvalid:y,errorMessage:S,getBaseProps:w,getLabelProps:P,getInputProps:C,getInnerWrapperProps:M,getInputWrapperProps:N,getHelperWrapperProps:F,getDescriptionProps:T,getErrorMessageProps:L,isClearable:B,getClearButtonProps:E}=(0,t.useInput)({...d,ref:r,isMultiline:!0}),[H,I]=(0,a.useState)(s>1),[W,A]=(0,a.useState)(!1),D=m?(0,z.jsx)("label",{...P(),children:m}):null,O=C(),U=u?(0,z.jsx)("textarea",{...O,style:(0,n.mergeProps)(O.style,null!=i?i:{})}):(0,z.jsx)(j,{...O,cacheMeasurements:o,"data-hide-scroll":(0,n.dataAttr)(!W),maxRows:l,minRows:s,style:(0,n.mergeProps)(O.style,null!=i?i:{}),onHeightChange:(e,t)=>{1===s&&I(e>=2*t.rowHeight),l>s&&A(e>=l*t.rowHeight),null==c||c(e,t)}}),_=(0,a.useMemo)(()=>B?(0,z.jsx)("button",{...E(),children:(0,z.jsx)(R.CloseFilledIcon,{})}):null,[B,E]),k=(0,a.useMemo)(()=>h||p?(0,z.jsxs)("div",{...M(),children:[h,U,p]}):(0,z.jsx)("div",{...M(),children:U}),[h,O,p,M]),K=y&&S,V=K||g;return(0,z.jsxs)(f,{...w(),children:[v?D:null,(0,z.jsxs)("div",{...N(),"data-has-multiple-rows":(0,n.dataAttr)(H),children:[b?D:null,k,_]}),x&&V?(0,z.jsx)("div",{...F(),children:K?(0,z.jsx)("div",{...L(),children:S}):(0,z.jsx)("div",{...T(),children:g})}):null]})});P.displayName="HeroUI.Textarea";var C=P},31748,e=>{"use strict";e.s(["default",()=>p],31748);var t=e.i(43476),n=e.i(71645),r=e.i(35889),a=e.i(56124),i=e.i(76220),s=e.i(12041),l=e.i(77148),o=e.i(70319),u=e.i(95187),c=(0,u.createServerReference)("40f61cccdf870504f7c7eb210906625f0c57a962cb",u.callServer,void 0,u.findSourceMapURL,"getPlanAll"),d=(0,u.createServerReference)("40e38fef6529a3fc80c80afa7ab2fb3ba71962167b",u.callServer,void 0,u.findSourceMapURL,"removePlan"),f=(0,u.createServerReference)("40b5b29ec7a1471815d74b90ac91060f827b6eb352",u.callServer,void 0,u.findSourceMapURL,"savePlan");let m=new Map([["pending","bg-sand-300"],["completed","bg-green-200"],["failed","bg-red-200"]]);function g(e){let{item:n,handleDelete:a,handleUpdate:i}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-start justify-center w-full rounded-md p-1 ".concat(m.get(n.status)),children:[(0,t.jsx)("div",{className:"flex-1 text-xl font-bold mx-2",children:n.content}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row items-end justify-center w-full",children:[(0,t.jsxs)("div",{className:"text-lg text-gray-500 w-full select-none",children:[(()=>{let e=new Date(n.created_at);return e.setMinutes(e.getMinutes()+1),e.toISOString().split("T")[0]})()," ",n.minutes," min (from ",(()=>{let e=new Date(n.created_at);return e.setMinutes(e.getMinutes()+1),e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")})(),") ",n.status]}),(0,t.jsxs)("div",{className:"flex flex-row items-start justify-center gap-4",children:["pending"===n.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Button,{size:"sm",color:"success",onPress:async()=>{await i({...n,status:"completed"})},children:"Complete"}),(0,t.jsx)(r.Button,{size:"sm",color:"warning",onPress:async()=>{await i({...n,status:"failed"})},children:"Fail"})]}),(0,t.jsx)(r.Button,{size:"sm",color:"danger",onPress:async()=>{await a(n)},children:"Delete"})]})]})]})}var h=e.i(75157);function p(e){let{user_id:u}=e,[m,p]=(0,n.useState)(!1),[x,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)(15),[S,w]=(0,n.useState)(""),[j,R]=(0,n.useState)([]),[z,P]=(0,n.useState)(1),C=async e=>{"success"===(await d(e.uuid)).status?(o.toast.success("delete plan success"),P(e=>e+1)):o.toast.error("delete plan failed")},M=async e=>{"success"===(await f(e)).status?(o.toast.success("status updated"),P(e=>e+1)):o.toast.error("update failed")},N=async()=>{let e=S.trim();if(!e)return void o.toast.error("Plan content cannot be empty");try{v(!0);let t=await f({uuid:(0,h.getUUID)(),user_id:u,content:e,minutes:b,status:"pending",created_by:u,created_at:new Date,updated_at:new Date});"success"===t.status?(o.toast.success("Plan added"),w(""),P(e=>e+1)):o.toast.error(String(t.error))}finally{v(!1)}};return(0,n.useEffect)(()=>{(async()=>{p(!0);let e=await c(u);"success"===e.status?R(e.data):(console.log(e.error),o.toast.error("load data error")),p(!1)})()},[u,z]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 my-4 bg-sand-300 p-2 rounded-md",children:[(0,t.jsx)(l.Textarea,{size:"lg",className:"w-full",label:"Plan content",classNames:{inputWrapper:"bg-sand-200",input:"text-md"},placeholder:"Describe your plan...",value:S,onChange:e=>w(e.target.value)}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,t.jsxs)(a.Select,{"aria-label":"time span",className:"max-w-sm",selectedKeys:[String(b)],onChange:e=>y(parseInt(e.target.value)),startContent:(0,t.jsx)("div",{className:"whitespace-nowrap font-bold",children:"Time Span"}),children:[(0,t.jsx)(i.SelectItem,{textValue:"15 minutes",children:"15 minutes"},"15"),(0,t.jsx)(i.SelectItem,{textValue:"30 minutes",children:"30 minutes"},"30"),(0,t.jsx)(i.SelectItem,{textValue:"1 hour",children:"1 hour"},"60")]}),(0,t.jsx)(r.Button,{variant:"solid",color:"primary",isDisabled:x,onPress:N,children:"Add Plan"})]})]}),m&&(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4 my-4",children:(0,t.jsx)(s.Spinner,{classNames:{label:"text-foreground mt-4"},variant:"simple"})}),j.length>0&&(0,t.jsx)("div",{className:"flex flex-col w-full gap-2 my-4",children:j.map(e=>(0,t.jsx)(g,{item:e,handleDelete:C,handleUpdate:M},e.uuid))})]})}}]);