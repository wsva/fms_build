(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,377148,e=>{"use strict";e.s(["Textarea",()=>A],377148);var t=e.i(834738),r=e.i(75540),a=e.i(273830),i=e.i(271645);function n(){return(n=Object.assign.bind()).apply(null,arguments)}var o=i.useLayoutEffect,l=function(e){var t=i.default.useRef(e);return o(function(){t.current=e}),t},s=function(e,t){if("function"==typeof e)return void e(t);e.current=t},d=function(e,t){var r=i.default.useRef();return i.default.useCallback(function(a){e.current=a,r.current&&s(r.current,null),r.current=t,t&&s(t,a)},[t])},c={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},u=function(e){Object.keys(c).forEach(function(t){e.style.setProperty(t,c[t],"important")})},f=null,v=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},g=function(){},m=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],h=!!document.documentElement.currentStyle,x=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=m.reduce(function(e,r){return e[r]=t[r],e},{}),a=r.boxSizing;if(""===a)return null;h&&"border-box"===a&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),n=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:n}};function p(e,t,r){var a=l(r);i.useLayoutEffect(function(){var r=function(e){return a.current(e)};if(e)return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}},[])}var b=function(e,t){p(document.body,"reset",function(r){e.current.form===r.target&&t(r)})},y=function(e){p(window,"resize",e)},S=function(e){p(document.fonts,"loadingdone",e)},j=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],w=i.forwardRef(function(e,t){var r=e.cacheMeasurements,a=e.maxRows,o=e.minRows,l=e.onChange,s=void 0===l?g:l,c=e.onHeightChange,m=void 0===c?g:c,h=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,j),p=void 0!==h.value,w=i.useRef(null),R=d(w,t),L=i.useRef(0),k=i.useRef(),A=function(){var e=w.current,t=r&&k.current?k.current:x(e);if(t){k.current=t;var i,n,l,s,d,c,g,h,p,b,y,S=(i=e.value||e.placeholder||"x",void 0===(n=o)&&(n=1),void 0===(l=a)&&(l=1/0),f||((f=document.createElement("textarea")).setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),u(f)),null===f.parentNode&&document.body.appendChild(f),s=t.paddingSize,d=t.borderSize,g=(c=t.sizingStyle).boxSizing,Object.keys(c).forEach(function(e){f.style[e]=c[e]}),u(f),f.value=i,h=v(f,t),f.value=i,h=v(f,t),f.value="x",b=(p=f.scrollHeight-s)*n,"border-box"===g&&(b=b+s+d),h=Math.max(b,h),y=p*l,"border-box"===g&&(y=y+s+d),[h=Math.min(y,h),p]),j=S[0],R=S[1];L.current!==j&&(L.current=j,e.style.setProperty("height",j+"px","important"),m(j,{rowHeight:R}))}};return i.useLayoutEffect(A),b(w,function(){if(!p){var e=w.current.value;requestAnimationFrame(function(){var t=w.current;t&&e!==t.value&&A()})}}),y(A),S(A),i.createElement("textarea",n({},h,{onChange:function(e){p||A(),s(e)},ref:R}))}),R=e.i(619110),L=e.i(843476),k=(0,a.forwardRef)((e,a)=>{let{style:n,minRows:o=3,maxRows:l=8,cacheMeasurements:s=!1,disableAutosize:d=!1,onHeightChange:c,...u}=e,{Component:f,label:v,description:g,startContent:m,endContent:h,hasHelper:x,shouldLabelBeOutside:p,shouldLabelBeInside:b,isInvalid:y,errorMessage:S,getBaseProps:j,getLabelProps:k,getInputProps:A,getInnerWrapperProps:T,getInputWrapperProps:U,getHelperWrapperProps:C,getDescriptionProps:N,getErrorMessageProps:z,isClearable:_,getClearButtonProps:O}=(0,t.useInput)({...u,ref:a,isMultiline:!0}),[E,M]=(0,i.useState)(o>1),[P,F]=(0,i.useState)(!1),B=v?(0,L.jsx)("label",{...k(),children:v}):null,I=A(),H=d?(0,L.jsx)("textarea",{...I,style:(0,r.mergeProps)(I.style,null!=n?n:{})}):(0,L.jsx)(w,{...I,cacheMeasurements:s,"data-hide-scroll":(0,r.dataAttr)(!P),maxRows:l,minRows:o,style:(0,r.mergeProps)(I.style,null!=n?n:{}),onHeightChange:(e,t)=>{1===o&&M(e>=2*t.rowHeight),l>o&&F(e>=l*t.rowHeight),null==c||c(e,t)}}),W=(0,i.useMemo)(()=>_?(0,L.jsx)("button",{...O(),children:(0,L.jsx)(R.CloseFilledIcon,{})}):null,[_,O]),D=(0,i.useMemo)(()=>m||h?(0,L.jsxs)("div",{...T(),children:[m,H,h]}):(0,L.jsx)("div",{...T(),children:H}),[m,I,h,T]),K=y&&S,Q=K||g;return(0,L.jsxs)(f,{...j(),children:[p?B:null,(0,L.jsxs)("div",{...U(),"data-has-multiple-rows":(0,r.dataAttr)(E),children:[b?B:null,D,W]}),x&&Q?(0,L.jsx)("div",{...C(),children:K?(0,L.jsx)("div",{...z(),children:S}):(0,L.jsx)("div",{...N(),children:g})}):null]})});k.displayName="HeroUI.Textarea";var A=k},558793,588558,e=>{"use strict";e.s(["removeAudio",()=>r],558793);var t=e.i(95187),r=(0,t.createServerReference)("6019a4879fcd648989e85c208e617c812e7a7c93fc",t.callServer,void 0,t.findSourceMapURL,"removeAudio");e.s(["saveAudio",()=>a],588558);var a=(0,t.createServerReference)("706a51ecb7fe3d0b5ea7c40d1bad71759e0614d17d",t.callServer,void 0,t.findSourceMapURL,"saveAudio")},455712,e=>{"use strict";e.s(["default",()=>y],455712);var t=e.i(843476),r=e.i(271645),a=e.i(736132),i=e.i(335889),n=e.i(900212),o=e.i(356124),l=e.i(76220),s=e.i(112041),d=e.i(377148),c=e.i(975157),u=e.i(95187),f=(0,u.createServerReference)("00db48cf614284f670667744c7596c7334ef53b2bb",u.callServer,void 0,u.findSourceMapURL,"getQuestionAll"),v=(0,u.createServerReference)("40110d969f2dc8012f925593a05384fb22a986e52e",u.callServer,void 0,u.findSourceMapURL,"removeQuestion"),g=(0,u.createServerReference)("40d955c950ab0dd6641aae98403a7aed9f3a5d8356",u.callServer,void 0,u.findSourceMapURL,"saveQuestion"),m=e.i(671508),h=e.i(558793),x=e.i(588558),p=e.i(24597);function b(e){let{user_id:r,item:a,handleDelete:i}=e;return(0,t.jsxs)("div",{className:"flex flex-col w-full items-start rounded-md p-1",children:[(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-start gap-2",children:(0,t.jsx)(p.Link,{target:"_blank",className:"text-2xl text-blue-600 hover:underline",href:"/speak/ask/".concat(a.uuid),children:a.title})}),(0,t.jsxs)("div",{className:"flex flex-row w-full items-center justify-end gap-4",children:[(0,t.jsx)(p.Link,{target:"_blank",href:"/speak/practice?user_id=".concat(a.user_id),className:"text-sm text-gray-500 hover:underline w-full",children:"by ".concat(a.user_id)}),a.user_id===r&&(0,t.jsx)(p.Link,{as:"button",isBlock:!0,color:"danger",className:"text-xl",onPress:async()=>{window.confirm("Are you sure to delete?")&&await i(a)},children:"delete"})]})]})}function y(e){let{user_id:u}=e,[p,y]=(0,r.useState)("local"),[S,j]=(0,r.useState)("video"),[w,R]=(0,r.useState)(),[L,k]=(0,r.useState)([]),[A,T]=(0,r.useState)(!1),[U,C]=(0,r.useState)(!1),[N,z]=(0,r.useState)(""),[_,O]=(0,r.useState)(),[E,M]=(0,r.useState)(),[P,F]=(0,r.useState)(),[B,I]=(0,r.useState)([]),[H,W]=(0,r.useState)(1),[D,K]=(0,r.useState)(!1),[Q,V]=(0,r.useState)(!1),[q,G]=(0,r.useState)(!1),J=(0,r.useRef)(null),X=async e=>{if(e.audio_path){let t=await (0,h.removeAudio)("ask","".concat(e.uuid,".wav"));if("error"===t.status){console.log(t.error),(0,a.addToast)({title:"remove data error",color:"danger"});return}}if(e.video_path){let t=await (0,h.removeAudio)("ask","".concat(e.uuid,".mp4"));if("error"===t.status){console.log(t.error),(0,a.addToast)({title:"remove data error",color:"danger"});return}}let t=await v(e.uuid);"success"===t.status?W(e=>e+1):(console.log(t.error),(0,a.addToast)({title:"remove data error",color:"danger"}))},Y=async()=>{if(!N)return void alert("title is empty");if(!P)return void alert("content is empty");if(!E)return void alert("audio is empty");let e=(0,c.getUUID)();if(G(!0),_){let t=await (0,x.saveAudio)(_.data,"ask","".concat(e,".mp4"));if("error"===t.status){console.log(t.error),(0,a.addToast)({title:"save data error",color:"danger"}),G(!1);return}}if(E){let t=await (0,x.saveAudio)(E.data,"ask","".concat(e,".wav"));if("error"===t.status){console.log(t.error),(0,a.addToast)({title:"save data error",color:"danger"}),G(!1);return}}let t=await g({uuid:e,user_id:u,title:N,audio_path:E?"/api/data/ask/".concat(e,".wav"):"",video_path:_?"/api/data/ask/".concat(e,".mp4"):"",content:P,created_by:u,created_at:new Date,updated_at:new Date});"success"===t.status?(z(""),F(""),_&&(URL.revokeObjectURL(_.url),O(void 0)),E&&(URL.revokeObjectURL(E.url),M(void 0)),W(e=>e+1)):(console.log(t.error),(0,a.addToast)({title:"save data error",color:"danger"})),G(!1)},Z=async()=>{_&&(URL.revokeObjectURL(_.url),O(void 0)),E&&(URL.revokeObjectURL(E.url),M(void 0));let e=async e=>{O({data:e,url:URL.createObjectURL(e)})},t=async(e,t)=>{M({data:t,url:URL.createObjectURL(t)}),F("success"===e.status?e.data:""),"error"===e.status&&(0,a.addToast)({title:e.error,color:"danger"})};await (0,m.toggleRecording)({mode:S,setStateStream:R,stateRecorder:L,setStateRecorder:k,stateRecording:A,setStateRecording:T,recognize:!0,sttEngine:p,setStateProcessing:C,handleVideo:e,handleAudio:t})};return(0,r.useEffect)(()=>{(async()=>{V(!0);let e=await f();"success"===e.status?I(e.data):(console.log(e.error),(0,a.addToast)({title:"load data error",color:"danger"})),V(!1)})(),J.current&&w&&(J.current.srcObject=w)},[H,J,w]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-4 my-4",children:[(0,t.jsx)(o.Select,{"aria-label":"stt engine",className:"max-w-sm",selectedKeys:[p],onChange:e=>y(e.target.value),startContent:(0,t.jsx)("div",{className:"whitespace-nowrap font-bold",children:"AI Engine"}),children:m.EngineList.map(e=>(0,t.jsx)(l.SelectItem,{textValue:e.value,children:e.value},e.key))}),(0,t.jsxs)(o.Select,{"aria-label":"stt engine",className:"max-w-sm",selectedKeys:[S],onChange:e=>j(e.target.value),startContent:(0,t.jsx)("div",{className:"whitespace-nowrap font-bold",children:"Mode"}),children:[(0,t.jsx)(l.SelectItem,{textValue:"video",children:"video"},"video"),(0,t.jsx)(l.SelectItem,{textValue:"audio",children:"audio"},"audio")]}),(0,t.jsx)(i.Button,{variant:"solid",color:"primary",id:"button-toggel-recording",isDisabled:!A&&U,onPress:async()=>{await Z()},children:A?"â¹ Stop Recording (Ctrl+A)":U?"Processing":"ðŸŽ¤ Read a Sentence (Ctrl+A)"})]}),A?(0,t.jsx)("video",{ref:J,autoPlay:!0,muted:!0,playsInline:!0}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center w-full gap-2 my-4",children:[(0,t.jsx)(n.Input,{label:"title",size:"lg",className:"w-full",value:N,onChange:e=>z(e.target.value)}),!!E&&(0,t.jsx)("audio",{controls:!0,src:E.url}),!!_&&(0,t.jsx)("video",{controls:!0,src:_.url}),(0,t.jsx)(d.Textarea,{size:"lg",className:"w-full",label:"content",classNames:{inputWrapper:"bg-sand-200",input:"text-xl"},value:P,onChange:e=>F(e.target.value)}),(0,t.jsx)(i.Button,{variant:"solid",color:"primary",id:"button-add-save",isDisabled:q,onPress:Y,children:"Add & Save (Ctrl+S)"})]}),Q&&(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4 my-4",children:(0,t.jsx)(s.Spinner,{classNames:{label:"text-foreground mt-4"},variant:"simple"})}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-end gap-4 my-4 mb-0",children:(0,t.jsx)(i.Button,{variant:"solid",color:"primary",isDisabled:!u,onPress:()=>K(!D),children:D?"All Texts":"Only My Texts"})}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-4 my-4",children:B.filter(e=>!D||e.user_id===u).map((e,r)=>(0,t.jsx)(b,{user_id:u,item:e,handleDelete:X},"".concat(r,"-").concat(e.uuid)))})]})}}]);