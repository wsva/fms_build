(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function a(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}e.s(["_",()=>a])},88430,e=>{"use strict";e.s(["default",()=>f],88430);var a=e.i(43476),t=e.i(75157),r=e.i(35889),s=e.i(71645),i=e.i(70319),d=e.i(95187),l=(0,d.createServerReference)("40033f286943d0805e936490a31b9c78cbc3fabb3c",d.callServer,void 0,d.findSourceMapURL,"getAnswerAll"),c=(0,d.createServerReference)("40b5d1df9afad57323d3ee5beb0811d6cc46d86e85",d.callServer,void 0,d.findSourceMapURL,"saveAnswer"),n=(0,d.createServerReference)("40ea035051d6e6791c9a954a531aa767726bae4d68",d.callServer,void 0,d.findSourceMapURL,"saveQuestion"),u=e.i(71508),o=e.i(73665);function f(e){let{item:d,email:f}=e,[v,p]=(0,s.useState)(""),[y,_]=(0,s.useState)(),[m,w]=(0,s.useState)([]),[x,b]=(0,s.useState)([]),[g,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=async()=>{if(!(null==d?void 0:d.uuid))return;let e=await l(null==d?void 0:d.uuid);"success"===e.status&&w(e.data.map(e=>({path:e.audio_path,created_by:e.created_by,created_at:e.created_at,updated_at:e.updated_at})))};p((null==d?void 0:d.uuid)&&d.user_id===f?d.uuid:(0,t.getUUID)()),e()},[]);let j=async()=>{for(let e of(y&&y.url&&"error"===(await n({uuid:v,user_id:f,audio_path:"/ask/".concat(v,".wav"),recognized:"",created_by:f,created_at:(null==d?void 0:d.created_at)?d.created_at:new Date,updated_at:new Date})).status&&i.toast.error("save question failed"),m)){if(!e.url)continue;let a=(0,t.getUUID)();"error"===(await c({uuid:a,user_id:f,question_uuid:v,audio_path:"/ask/".concat(v,"_").concat(a,".wav"),recognized:"",created_by:f,created_at:(null==d?void 0:d.created_at)?d.created_at:new Date,updated_at:new Date})).status&&i.toast.error("save answer failed")}i.toast.success("save answer success")};return(0,a.jsxs)("div",{className:"w-full space-y-4 px-2 mb-10",children:[(!(null==d?void 0:d.user_id)||d.user_id===f)&&(0,a.jsx)("div",{className:"flex flex-row my-1 items-end justify-end gap-4",children:(0,a.jsx)(r.Button,{color:"primary",variant:"solid",size:"sm",type:"submit",onPress:j,children:"Save"})}),(0,a.jsxs)("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:[(0,a.jsx)(r.Button,{variant:"solid",color:"primary",isDisabled:!g,onPress:async()=>{let e=async(e,a)=>{_({url:URL.createObjectURL(a),created_by:f,created_at:new Date,updated_at:new Date})};await (0,u.toggleRecording)({mode:"audio",stateRecorder:x,setStateRecorder:b,stateRecording:g,setStateRecording:h,recognize:!1,handleAudio:e})},children:g?"â¹ Stop Recording":"ðŸŽ¤ Add Question"}),!!y&&(!!y.url||!!y.path)&&(0,a.jsx)(r.Button,{isIconOnly:!0,variant:"light",size:"sm",onPress:()=>{new Audio(y.url?y.url:y.path).play()},children:(0,a.jsx)(o.MdPlayCircle,{size:30})})]}),(0,a.jsx)(r.Button,{variant:"solid",color:"primary",isDisabled:!y||!g,onPress:async()=>{let e=async(e,a)=>{w(e=>[...e,{url:URL.createObjectURL(a),created_by:f,created_at:new Date,updated_at:new Date}])};await (0,u.toggleRecording)({mode:"audio",stateRecorder:x,setStateRecorder:b,stateRecording:g,setStateRecording:h,recognize:!1,handleAudio:e})},children:g?"â¹ Stop Recording":"ðŸŽ¤ Add Answer"}),m.length>0&&(0,a.jsx)("div",{className:"flex flex-col items-start justify-start w-full gap-2 my-8",children:[...m].reverse().map((e,s)=>(0,a.jsxs)("div",{className:"flex flex-col my-1 items-start justify-start gap-4",children:[(0,a.jsx)("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:(0,a.jsx)(r.Button,{isIconOnly:!0,variant:"light",size:"sm",onPress:()=>{new Audio(e.url?e.url:e.path).play()},children:(0,a.jsx)(o.MdPlayCircle,{size:30})})}),(0,a.jsxs)("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:[(0,a.jsx)("p",{children:(null==d?void 0:d.created_at)?(0,t.formatDate)(null==d?void 0:d.created_at):""}),(0,a.jsx)("p",{children:null==d?void 0:d.created_by})]})]},s))})]})}}]);