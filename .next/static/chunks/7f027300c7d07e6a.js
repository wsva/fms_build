(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function a(e,a,s){return a in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s,e}e.s(["_",()=>a])},24597,e=>{"use strict";e.s(["Link",()=>g],24597);var a=e.i(84898),s=e.i(79754),r=(0,a.tv)({base:["relative inline-flex items-center outline-solid outline-transparent tap-highlight-transparent",...s.dataFocusVisibleClasses],variants:{size:{sm:"text-small",md:"text-medium",lg:"text-large"},color:{foreground:"text-foreground",primary:"text-primary",secondary:"text-secondary",success:"text-success",warning:"text-warning",danger:"text-danger"},underline:{none:"no-underline",hover:"hover:underline",always:"underline",active:"active:underline",focus:"focus:underline"},isBlock:{true:["px-2","py-1","hover:after:opacity-100","after:content-['']","after:inset-0","after:opacity-0","after:w-full","after:h-full","after:rounded-xl","after:transition-background","after:absolute"],false:"hover:opacity-hover active:opacity-disabled transition-opacity"},isDisabled:{true:"opacity-disabled cursor-default pointer-events-none"},disableAnimation:{true:"after:transition-none transition-none"}},compoundVariants:[{isBlock:!0,color:"foreground",class:"hover:after:bg-foreground/10"},{isBlock:!0,color:"primary",class:"hover:after:bg-primary/20"},{isBlock:!0,color:"secondary",class:"hover:after:bg-secondary/20"},{isBlock:!0,color:"success",class:"hover:after:bg-success/20"},{isBlock:!0,color:"warning",class:"hover:after:bg-warning/20"},{isBlock:!0,color:"danger",class:"hover:after:bg-danger/20"},{underline:["hover","always","active","focus"],class:"underline-offset-4"}],defaultVariants:{color:"primary",size:"md",isBlock:!1,underline:"none",isDisabled:!1}}),t=e.i(69080),o=e.i(50179),n=e.i(11458),i=e.i(49962),l=e.i(43027),c=e.i(73830),d=e.i(95494),u=e.i(20253),f=e.i(29427),b=e.i(75540),m=e.i(71645),h=e.i(43476),p=e=>(0,h.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",width:"1em",...e,children:[(0,h.jsx)("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),(0,h.jsx)("path",{d:"M15 3h6v6"}),(0,h.jsx)("path",{d:"M10 14L21 3"})]}),v=(0,c.forwardRef)((e,a)=>{let{Component:s,children:v,showAnchorIcon:g,anchorIcon:x=(0,h.jsx)(p,{className:"flex mx-1 text-current self-center"}),getLinkProps:w}=function(e){var a,s,h,p;let v=(0,d.useProviderContext)(),[g,x]=(0,c.mapPropsVariants)(e,r.variantKeys),{ref:w,as:y,children:j,anchorIcon:C,isExternal:S=!1,showAnchorIcon:k=!1,autoFocus:V=!1,className:B,onPress:P,onPressStart:N,onPressEnd:_,onClick:R,...D}=g,z=(0,u.useDOMRef)(w),M=null!=(s=null!=(a=null==e?void 0:e.disableAnimation)?a:null==v?void 0:v.disableAnimation)&&s,{linkProps:O}=function(e,a){let{elementType:s="a",onPress:r,onPressStart:c,onPressEnd:d,onClick:u,isDisabled:f,...b}=e,m={};"a"!==s&&(m={role:"link",tabIndex:f?void 0:0});let{focusableProps:h}=(0,i.useFocusable)(e,a),{pressProps:p,isPressed:v}=(0,l.usePress)({onClick:u,onPress:r,onPressStart:c,onPressEnd:d,isDisabled:f,ref:a}),g=(0,t.filterDOMProps)(b,{labelable:!0,isLink:"a"===s}),x=(0,o.mergeProps)(h,p),w=(0,n.useRouter)(),y=(0,n.useLinkProps)(e);return{isPressed:v,linkProps:(0,o.mergeProps)(g,y,{...x,...m,"aria-disabled":f||void 0,"aria-current":e["aria-current"],onClick:a=>{var s;null==(s=p.onClick)||s.call(p,a),(0,n.handleLinkClick)(a,w,e.href,e.routerOptions)}})}}({...D,onPress:P,onPressStart:N,onPressEnd:_,onClick:R,isDisabled:e.isDisabled,elementType:"".concat(y)},z),{isFocused:L,isFocusVisible:U,focusProps:I}=(0,f.useFocusRing)({autoFocus:V});S&&(D.rel=null!=(h=D.rel)?h:"noopener noreferrer",D.target=null!=(p=D.target)?p:"_blank");let E=(0,m.useMemo)(()=>r({...x,disableAnimation:M,className:B}),[(0,b.objectToDeps)(x),M,B]);return{Component:y||"a",children:j,anchorIcon:C,showAnchorIcon:k,getLinkProps:(0,m.useCallback)(()=>({ref:z,className:E,"data-focus":(0,b.dataAttr)(L),"data-disabled":(0,b.dataAttr)(e.isDisabled),"data-focus-visible":(0,b.dataAttr)(U),...(0,b.mergeProps)(I,O,D)}),[E,L,U,I,O,D])}}({ref:a,...e});return(0,h.jsx)(s,{...w(),children:(0,h.jsxs)(h.Fragment,{children:[v,g&&x]})})});v.displayName="HeroUI.Link";var g=v},58033,e=>{"use strict";e.s(["Chip",()=>m],58033);var a=e.i(73830),s=e.i(43027),r=e.i(29427),t=e.i(52841),o=e.i(84898),n=e.i(79754),i=(0,o.tv)({slots:{base:["relative","max-w-fit","min-w-min","inline-flex","items-center","justify-between","box-border","whitespace-nowrap"],content:"flex-1 text-inherit font-normal",dot:["w-2","h-2","ml-1","rounded-full"],avatar:"shrink-0",closeButton:["z-10","appearance-none","outline-solid outline-transparent","select-none","transition-opacity","opacity-70","hover:opacity-100","cursor-pointer","active:opacity-disabled","tap-highlight-transparent"]},variants:{variant:{solid:{},bordered:{base:"border-medium bg-transparent"},light:{base:"bg-transparent"},flat:{},faded:{base:"border-medium"},shadow:{},dot:{base:"border-medium border-default text-foreground bg-transparent"}},color:{default:{dot:"bg-default-400"},primary:{dot:"bg-primary"},secondary:{dot:"bg-secondary"},success:{dot:"bg-success"},warning:{dot:"bg-warning"},danger:{dot:"bg-danger"}},size:{sm:{base:"px-1 h-6 text-tiny",content:"px-1",closeButton:"text-medium",avatar:"w-4 h-4"},md:{base:"px-1 h-7 text-small",content:"px-2",closeButton:"text-large",avatar:"w-5 h-5"},lg:{base:"px-2 h-8 text-medium",content:"px-2",closeButton:"text-xl",avatar:"w-6 h-6"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isOneChar:{true:{},false:{}},isCloseable:{true:{},false:{}},hasStartContent:{true:{}},hasEndContent:{true:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isCloseButtonFocusVisible:{true:{closeButton:[...n.ringClasses,"ring-1","rounded-full"]}}},defaultVariants:{variant:"solid",color:"default",size:"md",radius:"full",isDisabled:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:t.colorVariants.solid.default}},{variant:"solid",color:"primary",class:{base:t.colorVariants.solid.primary}},{variant:"solid",color:"secondary",class:{base:t.colorVariants.solid.secondary}},{variant:"solid",color:"success",class:{base:t.colorVariants.solid.success}},{variant:"solid",color:"warning",class:{base:t.colorVariants.solid.warning}},{variant:"solid",color:"danger",class:{base:t.colorVariants.solid.danger}},{variant:"shadow",color:"default",class:{base:t.colorVariants.shadow.default}},{variant:"shadow",color:"primary",class:{base:t.colorVariants.shadow.primary}},{variant:"shadow",color:"secondary",class:{base:t.colorVariants.shadow.secondary}},{variant:"shadow",color:"success",class:{base:t.colorVariants.shadow.success}},{variant:"shadow",color:"warning",class:{base:t.colorVariants.shadow.warning}},{variant:"shadow",color:"danger",class:{base:t.colorVariants.shadow.danger}},{variant:"bordered",color:"default",class:{base:t.colorVariants.bordered.default}},{variant:"bordered",color:"primary",class:{base:t.colorVariants.bordered.primary}},{variant:"bordered",color:"secondary",class:{base:t.colorVariants.bordered.secondary}},{variant:"bordered",color:"success",class:{base:t.colorVariants.bordered.success}},{variant:"bordered",color:"warning",class:{base:t.colorVariants.bordered.warning}},{variant:"bordered",color:"danger",class:{base:t.colorVariants.bordered.danger}},{variant:"flat",color:"default",class:{base:t.colorVariants.flat.default}},{variant:"flat",color:"primary",class:{base:t.colorVariants.flat.primary}},{variant:"flat",color:"secondary",class:{base:t.colorVariants.flat.secondary}},{variant:"flat",color:"success",class:{base:t.colorVariants.flat.success}},{variant:"flat",color:"warning",class:{base:t.colorVariants.flat.warning}},{variant:"flat",color:"danger",class:{base:t.colorVariants.flat.danger}},{variant:"faded",color:"default",class:{base:t.colorVariants.faded.default}},{variant:"faded",color:"primary",class:{base:t.colorVariants.faded.primary}},{variant:"faded",color:"secondary",class:{base:t.colorVariants.faded.secondary}},{variant:"faded",color:"success",class:{base:t.colorVariants.faded.success}},{variant:"faded",color:"warning",class:{base:t.colorVariants.faded.warning}},{variant:"faded",color:"danger",class:{base:t.colorVariants.faded.danger}},{variant:"light",color:"default",class:{base:t.colorVariants.light.default}},{variant:"light",color:"primary",class:{base:t.colorVariants.light.primary}},{variant:"light",color:"secondary",class:{base:t.colorVariants.light.secondary}},{variant:"light",color:"success",class:{base:t.colorVariants.light.success}},{variant:"light",color:"warning",class:{base:t.colorVariants.light.warning}},{variant:"light",color:"danger",class:{base:t.colorVariants.light.danger}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"sm",class:{base:"w-5 h-5 min-w-5 min-h-5"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"md",class:{base:"w-6 h-6 min-w-6 min-h-6"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"lg",class:{base:"w-7 h-7 min-w-7 min-h-7"}},{isOneChar:!0,isCloseable:!1,hasStartContent:!1,hasEndContent:!1,class:{base:"px-0 justify-center",content:"px-0 flex-none"}},{isOneChar:!0,isCloseable:!0,hasStartContent:!1,hasEndContent:!1,class:{base:"w-auto"}},{isOneChar:!0,variant:"dot",class:{base:"w-auto h-7 px-1 items-center",content:"px-2"}},{hasStartContent:!0,size:"sm",class:{content:"pl-0.5"}},{hasStartContent:!0,size:["md","lg"],class:{content:"pl-1"}},{hasEndContent:!0,size:"sm",class:{content:"pr-0.5"}},{hasEndContent:!0,size:["md","lg"],class:{content:"pr-1"}}]}),l=e.i(20253),c=e.i(75540),d=e.i(71645),u=e.i(19110),f=e.i(43476),b=(0,a.forwardRef)((e,t)=>{let{Component:o,children:n,slots:b,classNames:m,isDot:h,isCloseable:p,startContent:v,endContent:g,getCloseButtonProps:x,getChipProps:w}=function(e){let[t,o]=(0,a.mapPropsVariants)(e,i.variantKeys),{ref:n,as:u,children:f,avatar:b,startContent:m,endContent:h,onClose:p,classNames:v,className:g,...x}=t,w=(0,l.useDOMRef)(n),y=(0,c.clsx)(null==v?void 0:v.base,g),j=!!p,C="dot"===e.variant,{focusProps:S,isFocusVisible:k}=(0,r.useFocusRing)(),V=(0,d.useMemo)(()=>"string"==typeof f&&(null==f?void 0:f.length)===1,[f]),B=(0,d.useMemo)(()=>!!b||!!m,[b,m]),P=(0,d.useMemo)(()=>!!h||j,[h,j]),N=(0,d.useMemo)(()=>i({...o,hasStartContent:B,hasEndContent:P,isOneChar:V,isCloseable:j,isCloseButtonFocusVisible:k}),[(0,c.objectToDeps)(o),k,B,P,V,j]),{pressProps:_}=(0,s.usePress)({isDisabled:!!(null==e?void 0:e.isDisabled),onPress:p}),R=e=>(0,d.isValidElement)(e)?(0,d.cloneElement)(e,{className:(0,c.clsx)("max-h-[80%]",e.props.className)}):null;return{Component:u||"div",children:f,slots:N,classNames:v,isDot:C,isCloseable:j,startContent:((0,d.isValidElement)(b)?(0,d.cloneElement)(b,{className:N.avatar({class:null==v?void 0:v.avatar})}):null)||R(m),endContent:R(h),getCloseButtonProps:()=>({role:"button",tabIndex:0,className:N.closeButton({class:null==v?void 0:v.closeButton}),"aria-label":"close chip",...(0,c.mergeProps)(_,S)}),getChipProps:()=>({ref:w,className:N.base({class:y}),...x})}}({...e,ref:t}),y=(0,d.useMemo)(()=>h&&!v?(0,f.jsx)("span",{className:b.dot({class:null==m?void 0:m.dot})}):v,[b,v,h]),j=(0,d.useMemo)(()=>p?(0,f.jsx)("span",{...x(),children:g||(0,f.jsx)(u.CloseFilledIcon,{})}):g,[g,p,x]);return(0,f.jsxs)(o,{...w(),children:[y,(0,f.jsx)("span",{className:b.content({class:null==m?void 0:m.content}),children:n}),j]})});b.displayName="HeroUI.Chip";var m=b},78117,e=>{"use strict";e.s(["saveBook",()=>s]);var a=e.i(95187),s=(0,a.createServerReference)("40f0c87f05058f75bece5ac7caf11c252f42ea6e51",a.callServer,void 0,a.findSourceMapURL,"saveBook")},22980,e=>{"use strict";e.s(["default",()=>N],22980);var a=e.i(43476),s=e.i(71645),r=e.i(35889),t=e.i(58033),o=e.i(42976),n=e.i(35577),i=e.i(46399),l=e.i(56124),c=e.i(76220),d=e.i(212),u=e.i(24597),f=e.i(64925),b=e.i(73665),m=e.i(71508),h=e.i(70319);function p(e){let{rsp:t,onUpdate:o,onDelete:n}=e,[i,l]=(0,s.useState)(!1),[c,p]=s.default.useState(!1),[v,g]=(0,s.useState)(t.original),[x,w]=(0,s.useState)(!1),y=(0,s.useRef)([]),j=(0,s.useRef)(null);return(0,a.jsxs)("div",{className:"flex flex-col gap-2 p-2 bg-sand-300",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 w-full",children:[(0,a.jsx)(f.Tooltip,{placement:"right",content:"original text, should be corrected",children:(0,a.jsx)(b.MdHelpOutline,{size:24})}),x?(0,a.jsx)(d.Input,{size:"lg",className:"w-full",onValueChange:e=>{g(e),o(t.uuid,e,"",null)},value:v}):(0,a.jsx)("div",{className:"flex-grow whitespace-normal break-words text-2xl",children:v}),(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsx)(f.Tooltip,{content:x?"done":"edit",children:(0,a.jsx)(r.Button,{isIconOnly:!0,variant:"light",onPress:()=>w(!x),children:x?(0,a.jsx)(b.MdDone,{size:30}):(0,a.jsx)(b.MdEdit,{size:30})})}),(0,a.jsx)(f.Tooltip,{content:"save",children:(0,a.jsx)(r.Button,{isIconOnly:!0,variant:"light",onPress:()=>{},children:(0,a.jsx)(b.MdSave,{size:30})})}),(0,a.jsx)(f.Tooltip,{content:"delete",children:(0,a.jsx)(r.Button,{isIconOnly:!0,variant:"light",onPress:()=>n(t.uuid),children:(0,a.jsx)(b.MdDelete,{size:30})})})]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 w-full",children:[(0,a.jsx)(f.Tooltip,{placement:"right",content:"recognised from audio",children:(0,a.jsx)(b.MdHelpOutline,{size:24})}),(0,a.jsx)("div",{className:"flex-grow whitespace-normal break-words text-2xl",children:t.recognized}),(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsx)(f.Tooltip,{placement:"bottom",content:"re-record",children:(0,a.jsx)(r.Button,{isIconOnly:!0,variant:"light",isDisabled:!i&&c,onPress:()=>{(0,m.toggleRecording)(i,l,y,j,!0,p,e=>{console.log(e)},(e,a)=>{"success"===e.status?o(t.uuid,"",e.data,a):h.toast.error(e.error)})},children:i?(0,a.jsx)(b.MdMic,{size:30}):(0,a.jsx)(b.MdMicOff,{size:30})})}),(0,a.jsx)(f.Tooltip,{placement:"bottom",content:"play audio",children:(0,a.jsx)(r.Button,{isIconOnly:!0,variant:"light",onPress:()=>{new Audio(t.audioBlob?URL.createObjectURL(t.audioBlob):t.audio_path).play()},children:(0,a.jsx)(b.MdPlayCircle,{size:30})})}),(0,a.jsx)(f.Tooltip,{placement:"bottom",content:"download audio",children:(0,a.jsx)(r.Button,{isIconOnly:!0,variant:"light",as:u.Link,href:t.audioBlob?URL.createObjectURL(t.audioBlob):t.audio_path,download:"sentence.wav",children:(0,a.jsx)(b.MdDownloadForOffline,{size:30})})})]})]})]})}var v=e.i(75157),g=e.i(78117),x=e.i(53145);function w(e){let{email:r}=e,{register:t,handleSubmit:o}=(0,x.useForm)(),[n,i]=s.default.useState(!1),l=async e=>{if(i(!0),!r){h.toast.error("not logged in"),i(!1);return}if("success"===(await (0,g.saveBook)({...e,uuid:(0,v.getUUID)(),user_id:r,created_by:r,created_at:new Date,updated_at:new Date})).status)h.toast.success("save book success");else{h.toast.error("save book failed"),i(!1);return}};return(0,a.jsx)("form",{onSubmit:o(l),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)(d.Input,{label:"Name",variant:"bordered",size:"sm",...t("name")}),(0,a.jsx)(u.Link,{as:"button",isDisabled:n,type:"submit",className:"bg-blue-500 rounded-md text-slate-50 px-2",children:"add new book"})]})})}var y=e.i(95187),j=(0,y.createServerReference)("4066333f5a969a0ee3d399a2cfb0759e9f4f1d42f4",y.callServer,void 0,y.findSourceMapURL,"getBookAll"),C=(0,y.createServerReference)("4045c88c718e5de8fc1ce42d425ad7dbde8ba8e669",y.callServer,void 0,y.findSourceMapURL,"getChapterAll"),S=(0,y.createServerReference)("40a5c79da7061f9cd2a7c00fd89e0e5eb4979ad8fb",y.callServer,void 0,y.findSourceMapURL,"getSentenceAll"),k=(0,y.createServerReference)("4043d6950c8a80b58d213cf4839287826a80d9e48a",y.callServer,void 0,y.findSourceMapURL,"saveSentence"),V=(0,y.createServerReference)("40be2fcfdc7b60850ba73cbca06c40eb529556d3bc",y.callServer,void 0,y.findSourceMapURL,"saveChapter");function B(e){let{book_uuid:r,email:t}=e,{register:o,handleSubmit:n}=(0,x.useForm)(),[i,l]=s.default.useState(!1),c=async e=>{if(l(!0),!r){h.toast.error("no book selected"),l(!1);return}if(!t){h.toast.error("not logged in"),l(!1);return}if("success"===(await V({...e,uuid:(0,v.getUUID)(),book_uuid:r,order_num:parseInt("".concat(e.order_num),10),created_by:t,created_at:new Date,updated_at:new Date})).status)h.toast.success("save chapter success");else{h.toast.error("save chapter failed"),l(!1);return}};return(0,a.jsx)("form",{onSubmit:n(c),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)(d.Input,{label:"Order",variant:"bordered",type:"number",size:"sm",...o("order_num")}),(0,a.jsx)(d.Input,{label:"Name",variant:"bordered",size:"sm",...o("name")}),(0,a.jsx)(u.Link,{as:"button",isDisabled:i,type:"submit",className:"bg-blue-500 rounded-md text-slate-50 px-2",children:"add new chapter"})]})})}var P=(0,y.createServerReference)("70017b48f383b93bb8a5de2c930594fc0da9411bd0",y.callServer,void 0,y.findSourceMapURL,"saveAudio");function N(e){let{email:d}=e,[u,f]=(0,s.useState)([]),[b,g]=(0,s.useState)(""),[x,y]=(0,s.useState)([]),[V,N]=(0,s.useState)(""),[_,R]=(0,s.useState)(!1),[D,z]=s.default.useState(!1),[M,O]=(0,s.useState)([]),L=(0,s.useRef)([]),U=(0,s.useRef)(null),I=(e,a,s,r)=>{O(t=>t.map(t=>t.uuid===e?{uuid:t.uuid,chapter_uuid:t.chapter_uuid,order_num:t.order_num,original:a||t.original,recognized:s||t.recognized,audioBlob:r||t.audioBlob,modified_db:!!a,modified_fs:!!r}:t))},E=e=>{O(a=>a.filter(a=>a.uuid!==e))},T=()=>{(0,m.toggleRecording)(_,R,L,U,!0,z,e=>{console.log(e)},(e,a)=>{"success"===e.status?O(s=>[...s,{uuid:(0,v.getUUID)(),chapter_uuid:"",order_num:M.length,original:e.data,recognized:e.data,audioBlob:a,modified_db:!0,modified_fs:!0}]):h.toast.error(e.error)})};return(0,s.useEffect)(()=>{(async()=>{if(!d)return;let e=await j(d);"success"===e.status&&f(e.data)})();let e=e=>{e.ctrlKey&&"y"===e.key.toLowerCase()&&!(!_&&D)&&(e.preventDefault(),T())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[_,D]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-row gap-4 my-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,a.jsx)(l.Select,{label:"Select book",onChange:async e=>{let a=e.target.value;g(a);let s=await C(a);"success"===s.status&&y(s.data)},children:u.map(e=>(0,a.jsx)(c.SelectItem,{children:e.name},e.uuid))}),(0,a.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,a.jsxs)(o.Popover,{placement:"bottom",classNames:{content:"bg-slate-200"},children:[(0,a.jsx)(i.PopoverTrigger,{children:(0,a.jsx)(t.Chip,{children:"new"})}),(0,a.jsx)(n.PopoverContent,{children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)(w,{email:d})})})]}),(0,a.jsx)(t.Chip,{onClick:async()=>{let e=await j(d);"success"===e.status&&f(e.data)},children:"refresh"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,a.jsx)(l.Select,{label:"Select chapter",onChange:async e=>{let a=e.target.value;N(a);let s=await S(a);"success"===s.status&&O(s.data.map(e=>({...e,modified_db:!1,modified_fs:!1})))},children:x.map(e=>(0,a.jsx)(c.SelectItem,{children:e.name},e.uuid))}),(0,a.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,a.jsxs)(o.Popover,{placement:"bottom",classNames:{content:"bg-slate-200"},children:[(0,a.jsx)(i.PopoverTrigger,{children:(0,a.jsx)(t.Chip,{children:"new"})}),(0,a.jsx)(n.PopoverContent,{children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)(B,{book_uuid:b,email:d})})})]}),(0,a.jsx)(t.Chip,{onClick:async()=>{let e=await C(b);"success"===e.status&&y(e.data)},children:"refresh"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4 my-2",children:[(0,a.jsx)(r.Button,{variant:"solid",color:"primary",onPress:T,isDisabled:!_&&D,children:_?"⏹ Stop Recording (Ctrl+Y)":"🎤 Speak a Sentence (Ctrl+Y)"}),(0,a.jsx)(r.Button,{variant:"solid",color:"primary",onPress:()=>{M.forEach(async(e,a)=>e.modified_fs&&e.audioBlob&&"error"===(await P(e.audioBlob,"reading","".concat(e.uuid,".wav"))).status?void h.toast.error("save audio failed"):e.modified_db&&"error"===(await k({uuid:e.uuid,chapter_uuid:V,order_num:a,original:e.original,recognized:e.recognized,audio_path:"reading/".concat(e.uuid,".wav"),created_by:d,created_at:new Date,updated_at:new Date})).status?void h.toast.error("save sentence failed"):void 0)},children:"save all sentences"})]}),M.length>0&&(0,a.jsx)("div",{className:"flex flex-col items-start justify-start w-full gap-2 my-8",children:[...M].reverse().map(e=>(0,a.jsx)(p,{rsp:e,onUpdate:I,onDelete:E},e.uuid))})]})}},75977,e=>{e.v(a=>Promise.all(["static/chunks/1301d5d9c51b8254.js"].map(a=>e.l(a))).then(()=>a(40588)))}]);