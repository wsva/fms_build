(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.s(["_",()=>t])},77148,e=>{"use strict";e.s(["Textarea",()=>B],77148);var t=e.i(34738),a=e.i(75540),r=e.i(73830),s=e.i(71645);function i(){return(i=Object.assign.bind()).apply(null,arguments)}var n=s.useLayoutEffect,o=function(e){var t=s.default.useRef(e);return n(function(){t.current=e}),t},l=function(e,t){if("function"==typeof e)return void e(t);e.current=t},d=function(e,t){var a=s.default.useRef();return s.default.useCallback(function(r){e.current=r,a.current&&l(a.current,null),a.current=t,t&&l(t,r)},[t])},c={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},u=function(e){Object.keys(c).forEach(function(t){e.style.setProperty(t,c[t],"important")})},f=null,m=function(e,t){var a=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?a+t.borderSize:a-t.paddingSize},h=function(){},v=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],p=!!document.documentElement.currentStyle,x=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var a=v.reduce(function(e,a){return e[a]=t[a],e},{}),r=a.boxSizing;if(""===r)return null;p&&"border-box"===r&&(a.width=parseFloat(a.width)+parseFloat(a.borderRightWidth)+parseFloat(a.borderLeftWidth)+parseFloat(a.paddingRight)+parseFloat(a.paddingLeft)+"px");var s=parseFloat(a.paddingBottom)+parseFloat(a.paddingTop),i=parseFloat(a.borderBottomWidth)+parseFloat(a.borderTopWidth);return{sizingStyle:a,paddingSize:s,borderSize:i}};function g(e,t,a){var r=o(a);s.useLayoutEffect(function(){var a=function(e){return r.current(e)};if(e)return e.addEventListener(t,a),function(){return e.removeEventListener(t,a)}},[])}var b=function(e,t){g(document.body,"reset",function(a){e.current.form===a.target&&t(a)})},j=function(e){g(window,"resize",e)},y=function(e){g(document.fonts,"loadingdone",e)},S=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],w=s.forwardRef(function(e,t){var a=e.cacheMeasurements,r=e.maxRows,n=e.minRows,o=e.onChange,l=void 0===o?h:o,c=e.onHeightChange,v=void 0===c?h:c,p=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,S),g=void 0!==p.value,w=s.useRef(null),_=d(w,t),R=s.useRef(0),z=s.useRef(),B=function(){var e=w.current,t=a&&z.current?z.current:x(e);if(t){z.current=t;var s,i,o,l,d,c,h,p,g,b,j,y=(s=e.value||e.placeholder||"x",void 0===(i=n)&&(i=1),void 0===(o=r)&&(o=1/0),f||((f=document.createElement("textarea")).setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),u(f)),null===f.parentNode&&document.body.appendChild(f),l=t.paddingSize,d=t.borderSize,h=(c=t.sizingStyle).boxSizing,Object.keys(c).forEach(function(e){f.style[e]=c[e]}),u(f),f.value=s,p=m(f,t),f.value=s,p=m(f,t),f.value="x",b=(g=f.scrollHeight-l)*i,"border-box"===h&&(b=b+l+d),p=Math.max(b,p),j=g*o,"border-box"===h&&(j=j+l+d),[p=Math.min(j,p),g]),S=y[0],_=y[1];R.current!==S&&(R.current=S,e.style.setProperty("height",S+"px","important"),v(S,{rowHeight:_}))}};return s.useLayoutEffect(B),b(w,function(){if(!g){var e=w.current.value;requestAnimationFrame(function(){var t=w.current;t&&e!==t.value&&B()})}}),j(B),y(B),s.createElement("textarea",i({},p,{onChange:function(e){g||B(),l(e)},ref:_}))}),_=e.i(19110),R=e.i(43476),z=(0,r.forwardRef)((e,r)=>{let{style:i,minRows:n=3,maxRows:o=8,cacheMeasurements:l=!1,disableAutosize:d=!1,onHeightChange:c,...u}=e,{Component:f,label:m,description:h,startContent:v,endContent:p,hasHelper:x,shouldLabelBeOutside:g,shouldLabelBeInside:b,isInvalid:j,errorMessage:y,getBaseProps:S,getLabelProps:z,getInputProps:B,getInnerWrapperProps:N,getInputWrapperProps:k,getHelperWrapperProps:M,getDescriptionProps:P,getErrorMessageProps:C,isClearable:L,getClearButtonProps:U}=(0,t.useInput)({...u,ref:r,isMultiline:!0}),[T,D]=(0,s.useState)(n>1),[E,I]=(0,s.useState)(!1),O=m?(0,R.jsx)("label",{...z(),children:m}):null,A=B(),F=d?(0,R.jsx)("textarea",{...A,style:(0,a.mergeProps)(A.style,null!=i?i:{})}):(0,R.jsx)(w,{...A,cacheMeasurements:l,"data-hide-scroll":(0,a.dataAttr)(!E),maxRows:o,minRows:n,style:(0,a.mergeProps)(A.style,null!=i?i:{}),onHeightChange:(e,t)=>{1===n&&D(e>=2*t.rowHeight),o>n&&I(e>=o*t.rowHeight),null==c||c(e,t)}}),H=(0,s.useMemo)(()=>L?(0,R.jsx)("button",{...U(),children:(0,R.jsx)(_.CloseFilledIcon,{})}):null,[L,U]),W=(0,s.useMemo)(()=>v||p?(0,R.jsxs)("div",{...N(),children:[v,F,p]}):(0,R.jsx)("div",{...N(),children:F}),[v,A,p,N]),K=j&&y,V=K||h;return(0,R.jsxs)(f,{...S(),children:[g?O:null,(0,R.jsxs)("div",{...k(),"data-has-multiple-rows":(0,a.dataAttr)(T),children:[b?O:null,W,H]}),x&&V?(0,R.jsx)("div",{...M(),children:K?(0,R.jsx)("div",{...C(),children:y}):(0,R.jsx)("div",{...P(),children:h})}):null]})});z.displayName="HeroUI.Textarea";var B=z},12123,e=>{"use strict";e.s(["removeBook",()=>a]);var t=e.i(95187),a=(0,t.createServerReference)("4089fa4291985b50d4ab32df81fc44d963d332b0f2",t.callServer,void 0,t.findSourceMapURL,"removeBook")},1089,e=>{"use strict";e.s(["saveBook",()=>a]);var t=e.i(95187),a=(0,t.createServerReference)("40ccb0c66d8d24ea0cb38312b30504a1368e8d8fec",t.callServer,void 0,t.findSourceMapURL,"saveBook")},22980,e=>{"use strict";e.s(["default",()=>C],22980);var t=e.i(43476),a=e.i(71645),r=e.i(35889),s=e.i(12041),i=e.i(77148),n=e.i(64925),o=e.i(73665),l=e.i(71508),d=e.i(70319);function c(e){return(e=e.replace(/\s+/g," ").trim())?e.split(/(\s+|[.,!?;:\-—()"'“”„«»…])/).filter(e=>null!=e&&""!==e).filter(e=>e.trim().length>0||" "===e):[]}function u(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var f=e.i(95187),m=(0,f.createServerReference)("60d9c3f941c125b63e0aa1adb2fa0eba070b5270f1",f.callServer,void 0,f.findSourceMapURL,"removeAudio"),h=(0,f.createServerReference)("70cfe5fc28df709d91d11e63f1788b23cdb1dbe014",f.callServer,void 0,f.findSourceMapURL,"saveAudio"),v=(0,f.createServerReference)("40c50dfb27c0f832147ed7663fe379ead2868be74e",f.callServer,void 0,f.findSourceMapURL,"removeSentence"),p=(0,f.createServerReference)("40bf60983a191c687ce2c3ff867b598f3f467c9a8d",f.callServer,void 0,f.findSourceMapURL,"saveSentence"),x=(0,f.createServerReference)("60b4b8bc9527648522fc8b629028fcb28cb69085be",f.callServer,void 0,f.findSourceMapURL,"callTTS");function g(e){let{user_id:s,item:f,onUpdate:g,onDelete:b}=e,[j,y]=(0,a.useState)(!1),[S,w]=(0,a.useState)(!1),[_,R]=(0,a.useState)(!1),[z,B]=(0,a.useState)(!1),N=(0,a.useRef)([]),k=(0,a.useRef)(null),M=async()=>{f.modified_fs&&f.audioBlob&&("success"===(await h(f.audioBlob,"reading","".concat(f.uuid,".wav"))).status?(d.toast.success("save audio success"),g({...f,on_fs:!0,modified_fs:!1})):d.toast.error("save audio failed")),f.modified_db&&("success"===(await p({uuid:f.uuid,chapter_uuid:f.chapter_uuid,order_num:f.order_num,original:f.original,recognized:f.recognized,audio_path:"/api/data/reading/".concat(f.uuid,".wav"),created_by:s,created_at:f.created_at||new Date,updated_at:new Date})).status?(d.toast.success("save sentence success"),g({...f,in_db:!0,modified_db:!1})):d.toast.error("save sentence failed"))},P=async()=>{if(f.on_fs){if("success"!==(await m("reading","".concat(f.uuid,".wav"))).status)return void d.toast.error("delete audio failed");d.toast.success("delete audio success")}if(f.in_db){if("success"!==(await v(f.uuid)).status)return void d.toast.error("delete sentence failed");d.toast.success("delete sentence success")}b(f.uuid)};return(0,t.jsxs)("div",{className:"flex flex-row items-start justify-start w-full bg-sand-300",children:[f.modified_db||f.modified_fs?(0,t.jsx)(n.Tooltip,{placement:"bottom",content:"unsaved",children:(0,t.jsx)("div",{className:"text-red-500",children:"●"})}):(0,t.jsx)("div",{className:"text-transparent",children:"●"}),(0,t.jsxs)("div",{className:"flex flex-col w-full p-2",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start",children:[(0,t.jsx)("div",{className:"text-md text-gray-400",children:"recognized from audio:"}),(0,t.jsx)(n.Tooltip,{placement:"top",content:"re-record",children:(0,t.jsx)(r.Button,{isIconOnly:!0,variant:"light",className:"h-fit",isDisabled:!j&&S,onPress:()=>{(0,l.toggleRecording)(j,y,N,k,!0,w,e=>{console.log(e)},(e,t)=>{"success"===e.status?g({...f,recognized:e.data,audioBlob:t,modified_db:!0,modified_fs:!0}):d.toast.error(e.error)})},children:j?(0,t.jsx)(o.MdMic,{size:20}):(0,t.jsx)(o.MdMicOff,{size:20})})}),(0,t.jsx)(n.Tooltip,{placement:"top",content:"play audio",children:(0,t.jsx)(r.Button,{isIconOnly:!0,variant:"light",className:"h-fit",onPress:()=>{new Audio(f.audioBlob?URL.createObjectURL(f.audioBlob):f.audio_path).play()},children:(0,t.jsx)(o.MdPlayCircle,{size:20})})})]}),(0,t.jsx)("div",{className:"text-xl",children:((e,a)=>{let r=c(e),s=c(a),{matchesB:i}=function(e,t){let a=e.length,r=t.length,s=Array.from({length:a+1},()=>Array(r+1).fill(0));for(let i=a-1;i>=0;i--)for(let a=r-1;a>=0;a--)e[i]===t[a]?s[i][a]=1+s[i+1][a+1]:s[i][a]=Math.max(s[i+1][a],s[i][a+1]);let i=0,n=0,o=[];for(;i<a&&n<r;)e[i]===t[n]?(o.push(n),i++,n++):s[i+1][n]>=s[i][n+1]?i++:n++;return{matchesB:o}}(r,s),n=new Set(i);return s.map((e,a)=>n.has(a)?(0,t.jsx)("span",{children:u(e)},a):(0,t.jsx)("span",{style:{background:"#ffeb3b"},children:u(e)},a))})(f.original,f.recognized)})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4",children:[(0,t.jsx)("div",{className:"text-md text-gray-400",children:"original text:"}),(0,t.jsx)(n.Tooltip,{placement:"top",content:"edit original",children:(0,t.jsx)(r.Button,{isIconOnly:!0,variant:"light",className:"h-fit",onPress:()=>R(!_),children:_?(0,t.jsx)(o.MdEditOff,{size:20}):(0,t.jsx)(o.MdEdit,{size:20})})}),(0,t.jsx)(n.Tooltip,{placement:"top",content:"play audio",children:(0,t.jsx)(r.Button,{isIconOnly:!0,variant:"light",className:"h-fit",isDisabled:z,onPress:async()=>{let e="/api/data/tts/".concat(f.uuid,".wav");if(!await fetch(e,{method:"HEAD"}).then(e=>e.ok).catch(()=>!1)){B(!0);let e=await x(f.uuid,f.original);if(B(!1),"error"===e.status)return void console.error(e.error)}new Audio(e).play().catch(e=>console.error("error: ",e))},children:(0,t.jsx)(o.MdPlayCircle,{size:20})})})]}),_?(0,t.jsx)(i.Textarea,{size:"lg",className:"w-full",classNames:{inputWrapper:"bg-sand-200",input:"text-xl"},defaultValue:f.original,onChange:e=>{g({...f,original:e.target.value,modified_db:!0})}}):(0,t.jsx)("div",{className:"text-xl",children:f.original})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center w-fit gap-1 py-2",children:[(0,t.jsx)(n.Tooltip,{placement:"left",content:"save",children:(0,t.jsx)(r.Button,{isIconOnly:!0,variant:"light",className:"h-fit",onPress:()=>g(f,f.order_num+1),children:(0,t.jsx)(o.MdArrowUpward,{size:20})})}),(0,t.jsx)("div",{children:f.order_num}),(0,t.jsx)(n.Tooltip,{placement:"left",content:"save",children:(0,t.jsx)(r.Button,{isIconOnly:!0,variant:"light",className:"h-fit",onPress:()=>g(f,f.order_num-1),children:(0,t.jsx)(o.MdArrowDownward,{size:20})})}),(0,t.jsx)(n.Tooltip,{placement:"left",content:"save",children:(0,t.jsx)(r.Button,{isIconOnly:!0,variant:"light",className:"h-fit",onPress:M,children:(0,t.jsx)(o.MdOutlineSave,{size:20})})}),(0,t.jsx)(n.Tooltip,{placement:"left",content:"delete",children:(0,t.jsx)(r.Button,{isIconOnly:!0,variant:"light",className:"h-fit",onPress:P,children:(0,t.jsx)(o.MdDelete,{size:20})})})]})]})}var b=e.i(75157),j=(0,f.createServerReference)("404d33ddbb902c446660565f1438cc49c917bb7662",f.callServer,void 0,f.findSourceMapURL,"getBookAll"),y=e.i(12123),S=e.i(1089),w=e.i(212),_=e.i(56124),R=e.i(76220);function z(e){let{user_id:s,onSelect:i}=e,[n,o]=(0,a.useState)([]),[l,c]=(0,a.useState)(""),[u,f]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),v=async()=>{let e=await j(s);"success"===e.status&&o(e.data)},p=async()=>{if(!s)return void d.toast.error("not logged in");h(!0),"success"===(await (0,S.saveBook)({uuid:(0,b.getUUID)(),user_id:s,name:l,created_by:s,created_at:new Date,updated_at:new Date})).status?(d.toast.success("save book success"),c("")):d.toast.error("save book failed"),h(!1)},x=async e=>{h(!0),"success"===(await (0,y.removeBook)(e)).status?d.toast.success("delete book success"):d.toast.error("delete book failed"),h(!1)};return(0,a.useEffect)(()=>{(async()=>{let e=await j(s);"success"===e.status&&o(e.data)})()},[s]),(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsx)(_.Select,{label:"Select book",onChange:async e=>{let t=e.target.value;await i(t)},children:n.map(e=>(0,t.jsx)(R.SelectItem,{textValue:e.name,children:e.name},e.uuid))}),(0,t.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,t.jsx)(r.Button,{size:"sm",radius:"full",onPress:()=>f(!u),children:u?"finish":"edit"}),(0,t.jsx)(r.Button,{size:"sm",radius:"full",onPress:v,children:"refresh"})]}),u&&(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,t.jsx)(w.Input,{label:"Name of Book",size:"sm",onChange:e=>c(e.target.value)}),(0,t.jsx)(r.Button,{size:"sm",radius:"full",isDisabled:m,onPress:p,children:"add"})]}),n.map(e=>(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start px-2 gap-2 bg-sand-300",children:[e.name,(0,t.jsx)(r.Button,{size:"sm",radius:"full",onPress:()=>x(e.uuid),children:"delete"})]},e.uuid))]})]})}var B=(0,f.createServerReference)("40929886a6de2c21098e00591a05d0a70c19383133",f.callServer,void 0,f.findSourceMapURL,"getSentenceAll"),N=(0,f.createServerReference)("40bcd55cd9728332be06a1905a5cbe0fca3c0af1d8",f.callServer,void 0,f.findSourceMapURL,"getChapterAll"),k=(0,f.createServerReference)("401d55f5d40017bb08acde33b419ec434f64d36c23",f.callServer,void 0,f.findSourceMapURL,"removeChapter"),M=(0,f.createServerReference)("400d4ad85ef1f62b816c76214ee5c64cbd77b15f36",f.callServer,void 0,f.findSourceMapURL,"saveChapter");function P(e){let{user_id:s,book_uuid:i,onSelect:n}=e,[o,l]=(0,a.useState)([]),[c,u]=(0,a.useState)(""),[f,m]=(0,a.useState)(""),[h,v]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),g=async()=>{let e=await N(i);"success"===e.status&&l(e.data)},j=async()=>s?i?void(x(!0),"success"===(await M({uuid:(0,b.getUUID)(),book_uuid:i,order_num:parseInt(c,10),name:f,created_by:s,created_at:new Date,updated_at:new Date})).status?(d.toast.success("save chapter success"),m("")):d.toast.error("save chapter failed"),x(!1)):void d.toast.error("no book selected"):void d.toast.error("not logged in"),y=async e=>{x(!0),"success"===(await k(e)).status?d.toast.success("delete chapter success"):d.toast.error("delete chapter failed"),x(!1)};return(0,a.useEffect)(()=>{(async()=>{let e=await N(i);"success"===e.status&&l(e.data)})()},[i]),(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsx)(_.Select,{label:"Select chapter",onChange:async e=>{let t=e.target.value;await n(t)},children:o.map(e=>(0,t.jsxs)(R.SelectItem,{textValue:"".concat(e.order_num,", ").concat(e.name),children:[e.order_num,", ",e.name]},e.uuid))}),(0,t.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,t.jsx)(r.Button,{size:"sm",radius:"full",onPress:()=>v(!h),children:h?"finish":"edit"}),(0,t.jsx)(r.Button,{size:"sm",radius:"full",onPress:g,children:"refresh"})]}),h&&(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,t.jsx)(w.Input,{label:"Order",type:"number",size:"sm",className:"w-1/5",onChange:e=>u(e.target.value)}),(0,t.jsx)(w.Input,{label:"Name of Book",size:"sm",onChange:e=>m(e.target.value)}),(0,t.jsx)(r.Button,{size:"sm",radius:"full",isDisabled:p,onPress:j,children:"add"})]}),o.map(e=>(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 bg-sand-300",children:[e.order_num," - ",e.name,(0,t.jsx)(r.Button,{size:"sm",radius:"full",onPress:()=>y(e.uuid),children:"delete"})]},e.uuid))]})]})}function C(e){let{email:i}=e,[n,o]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[f,m]=(0,a.useState)(!1),[v,x]=a.default.useState(!1),[j,y]=(0,a.useState)([]),[S,w]=a.default.useState(!1),_=(0,a.useRef)([]),R=(0,a.useRef)(null),N=async e=>{w(!0);let t=await B(e);"success"===t.status&&y(t.data.map((e,t)=>({...(0,b.toExactType)(e),order_num:t+1,in_db:!0,on_fs:!0,modified_db:e.order_num!==t+1,modified_fs:!1}))),w(!1)},k=(e,t)=>{if(t){if(t<1&&(t=1),t>j.length&&(t=j.length),e.order_num!==t){let a=[...j],r=a.splice(e.order_num-1,1)[0];a.splice(t-1,0,r),y(a.map((e,t)=>({...e,order_num:t+1,modified_db:e.order_num!==t+1})))}}else y(t=>t.map((t,a)=>t.uuid===e.uuid?{...e,order_num:a+1,modified_db:e.order_num!==a+1}:{...t,order_num:a+1,modified_db:t.order_num!==a+1}))},M=e=>{y(t=>t.filter(t=>t.uuid!==e)),y(e=>e.map((e,t)=>({...e,order_num:t+1,modified_db:e.order_num!==t+1})))},C=async()=>{x(!0);try{await Promise.all(j.map(async(e,t)=>{if(e.modified_fs&&e.audioBlob){let t=await h(e.audioBlob,"reading","".concat(e.uuid,".wav"));if("error"===t.status)throw Error("save audio failed");y(t=>t.map(t=>t.uuid===e.uuid?{...t,on_fs:!0,modified_fs:!1}:t))}let a=await p({uuid:e.uuid,chapter_uuid:e.chapter_uuid,order_num:e.order_num,original:e.original,recognized:e.recognized,audio_path:"/api/data/reading/".concat(e.uuid,".wav"),created_by:i,created_at:e.created_at||new Date,updated_at:new Date});if("error"===a.status)throw Error("save sentence failed");return y(t=>t.map(t=>t.uuid===e.uuid?{...t,in_db:!0,modified_db:!1}:t)),!0})),d.toast.success("All sentences saved successfully!")}catch(e){d.toast.error(e.message||"Failed to save sentences")}x(!1)};return(0,a.useEffect)(()=>{let e=e=>{if(e.ctrlKey&&"y"===e.key){e.preventDefault();let t=document.getElementById("button-toggel-recording");null==t||t.click()}e.ctrlKey&&"s"===e.key&&(e.preventDefault(),C())};return document.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[f,v]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 my-2",children:[(0,t.jsx)(z,{user_id:i,onSelect:async e=>{o(e)}}),(0,t.jsx)(P,{user_id:i,book_uuid:n,onSelect:async e=>{u(e),await N(e)}})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4 my-2",children:[(0,t.jsx)(r.Button,{variant:"solid",color:"primary",id:"button-toggel-recording",isDisabled:!f&&v,onPress:()=>{n&&c?(0,l.toggleRecording)(f,m,_,R,!0,x,e=>{console.log(e)},(e,t)=>{"success"===e.status?y(a=>[...a,{uuid:(0,b.getUUID)(),chapter_uuid:c,order_num:j.length+1,original:e.data,recognized:e.data,audioBlob:t,in_db:!1,on_fs:!1,modified_db:!0,modified_fs:!0}]):d.toast.error(e.error)}):alert("select book and chapter first")},children:f?"⏹ Stop Recording (Ctrl+Y)":"🎤 Speak a Sentence (Ctrl+Y)"}),(0,t.jsx)(r.Button,{variant:"solid",color:"primary",isDisabled:f||v,onPress:C,children:"Save (Ctrl+S)"})]}),S&&(0,t.jsx)(s.Spinner,{classNames:{label:"text-foreground mt-4"},variant:"simple"}),j.length>0&&(0,t.jsx)("div",{className:"flex flex-col items-start justify-start w-full gap-2 my-8",children:[...j].reverse().map(e=>(0,t.jsx)(g,{user_id:i,item:e,onUpdate:k,onDelete:M},e.uuid))})]})}},75977,e=>{e.v(t=>Promise.all(["static/chunks/1301d5d9c51b8254.js"].map(t=>e.l(t))).then(()=>t(40588)))}]);