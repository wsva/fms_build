(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.s(["_",()=>t])},88430,e=>{"use strict";e.s(["default",()=>f],88430);var t=e.i(43476),a=e.i(75157),r=e.i(35889),s=e.i(71645),i=e.i(70319),l=e.i(95187),d=(0,l.createServerReference)("40263f540b16e578c87900d9d1df432444f56f89e5",l.callServer,void 0,l.findSourceMapURL,"getAnswerAll"),c=(0,l.createServerReference)("408e884102910308a47ea32be849c0f13ae6c44d56",l.callServer,void 0,l.findSourceMapURL,"saveAnswer"),u=(0,l.createServerReference)("4067154297104c967804154ea841a2ae8561c26ec8",l.callServer,void 0,l.findSourceMapURL,"saveQuestion"),n=e.i(71508),o=e.i(73665);function f(e){let{item:l,email:f}=e,[v,p]=(0,s.useState)(""),[_,y]=(0,s.useState)(),[m,x]=(0,s.useState)([]),[g,h]=(0,s.useState)(!1),[w,j]=s.default.useState(!1),b=(0,s.useRef)([]),R=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=async()=>{if(!(null==l?void 0:l.uuid))return;let e=await d(null==l?void 0:l.uuid);"success"===e.status&&x(e.data.map(e=>({path:e.audio_path,created_by:e.created_by,created_at:e.created_at,updated_at:e.updated_at})))};p((null==l?void 0:l.uuid)&&l.user_id===f?l.uuid:(0,a.getUUID)()),e()},[]);let S=async()=>{for(let e of(_&&_.url&&"error"===(await u({uuid:v,user_id:f,audio_path:"/ask/".concat(v,".wav"),recognized:"",created_by:f,created_at:(null==l?void 0:l.created_at)?l.created_at:new Date,updated_at:new Date})).status&&i.toast.error("save question failed"),m)){if(!e.url)continue;let t=(0,a.getUUID)();"error"===(await c({uuid:t,user_id:f,question_uuid:v,audio_path:"/ask/".concat(v,"_").concat(t,".wav"),recognized:"",created_by:f,created_at:(null==l?void 0:l.created_at)?l.created_at:new Date,updated_at:new Date})).status&&i.toast.error("save answer failed")}i.toast.success("save answer success")};return(0,t.jsxs)("div",{className:"w-full space-y-4 px-2 mb-10",children:[(!(null==l?void 0:l.user_id)||l.user_id===f)&&(0,t.jsx)("div",{className:"flex flex-row my-1 items-end justify-end gap-4",children:(0,t.jsx)(r.Button,{color:"primary",variant:"solid",size:"sm",type:"submit",onPress:S,children:"Save"})}),(0,t.jsxs)("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:[(0,t.jsx)(r.Button,{variant:"solid",color:"primary",isDisabled:!g&&w,onPress:()=>{(0,n.toggleRecording)(g,h,b,R,!1,j,e=>{console.log(e)},(e,t)=>{y({url:URL.createObjectURL(t),created_by:f,created_at:new Date,updated_at:new Date})})},children:g?"â¹ Stop Recording":"ðŸŽ¤ Add Question"}),!!_&&(!!_.url||!!_.path)&&(0,t.jsx)(r.Button,{isIconOnly:!0,variant:"light",size:"sm",onPress:()=>{new Audio(_.url?_.url:_.path).play()},children:(0,t.jsx)(o.MdPlayCircle,{size:30})})]}),(0,t.jsx)(r.Button,{variant:"solid",color:"primary",isDisabled:!_||!g&&w,onPress:()=>{(0,n.toggleRecording)(g,h,b,R,!1,j,e=>{console.log(e)},(e,t)=>{x(e=>[...e,{url:URL.createObjectURL(t),created_by:f,created_at:new Date,updated_at:new Date}])})},children:g?"â¹ Stop Recording":"ðŸŽ¤ Add Answer"}),m.length>0&&(0,t.jsx)("div",{className:"flex flex-col items-start justify-start w-full gap-2 my-8",children:[...m].reverse().map((e,s)=>(0,t.jsxs)("div",{className:"flex flex-col my-1 items-start justify-start gap-4",children:[(0,t.jsx)("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:(0,t.jsx)(r.Button,{isIconOnly:!0,variant:"light",size:"sm",onPress:()=>{new Audio(e.url?e.url:e.path).play()},children:(0,t.jsx)(o.MdPlayCircle,{size:30})})}),(0,t.jsxs)("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:[(0,t.jsx)("p",{children:(null==l?void 0:l.created_at)?(0,a.formatDate)(null==l?void 0:l.created_at):""}),(0,t.jsx)("p",{children:null==l?void 0:l.created_by})]})]},s))})]})}}]);