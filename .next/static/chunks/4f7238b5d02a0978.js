(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.s(["_",()=>t])},77148,e=>{"use strict";e.s(["Textarea",()=>z],77148);var t=e.i(34738),r=e.i(75540),a=e.i(73830),n=e.i(71645);function i(){return(i=Object.assign.bind()).apply(null,arguments)}var s=n.useLayoutEffect,o=function(e){var t=n.default.useRef(e);return s(function(){t.current=e}),t},l=function(e,t){if("function"==typeof e)return void e(t);e.current=t},c=function(e,t){var r=n.default.useRef();return n.default.useCallback(function(a){e.current=a,r.current&&l(r.current,null),r.current=t,t&&l(t,a)},[t])},u={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},d=function(e){Object.keys(u).forEach(function(t){e.style.setProperty(t,u[t],"important")})},f=null,p=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},h=function(){},v=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],m=!!document.documentElement.currentStyle,g=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=v.reduce(function(e,r){return e[r]=t[r],e},{}),a=r.boxSizing;if(""===a)return null;m&&"border-box"===a&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var n=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:n,borderSize:i}};function y(e,t,r){var a=o(r);n.useLayoutEffect(function(){var r=function(e){return a.current(e)};if(e)return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}},[])}var b=function(e,t){y(document.body,"reset",function(r){e.current.form===r.target&&t(r)})},x=function(e){y(window,"resize",e)},_=function(e){y(document.fonts,"loadingdone",e)},w=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],S=n.forwardRef(function(e,t){var r=e.cacheMeasurements,a=e.maxRows,s=e.minRows,o=e.onChange,l=void 0===o?h:o,u=e.onHeightChange,v=void 0===u?h:u,m=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,w),y=void 0!==m.value,S=n.useRef(null),j=c(S,t),P=n.useRef(0),C=n.useRef(),z=function(){var e=S.current,t=r&&C.current?C.current:g(e);if(t){C.current=t;var n,i,o,l,c,u,h,m,y,b,x,_=(n=e.value||e.placeholder||"x",void 0===(i=s)&&(i=1),void 0===(o=a)&&(o=1/0),f||((f=document.createElement("textarea")).setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),d(f)),null===f.parentNode&&document.body.appendChild(f),l=t.paddingSize,c=t.borderSize,h=(u=t.sizingStyle).boxSizing,Object.keys(u).forEach(function(e){f.style[e]=u[e]}),d(f),f.value=n,m=p(f,t),f.value=n,m=p(f,t),f.value="x",b=(y=f.scrollHeight-l)*i,"border-box"===h&&(b=b+l+c),m=Math.max(b,m),x=y*o,"border-box"===h&&(x=x+l+c),[m=Math.min(x,m),y]),w=_[0],j=_[1];P.current!==w&&(P.current=w,e.style.setProperty("height",w+"px","important"),v(w,{rowHeight:j}))}};return n.useLayoutEffect(z),b(S,function(){if(!y){var e=S.current.value;requestAnimationFrame(function(){var t=S.current;t&&e!==t.value&&z()})}}),x(z),_(z),n.createElement("textarea",i({},m,{onChange:function(e){y||z(),l(e)},ref:j}))}),j=e.i(19110),P=e.i(43476),C=(0,a.forwardRef)((e,a)=>{let{style:i,minRows:s=3,maxRows:o=8,cacheMeasurements:l=!1,disableAutosize:c=!1,onHeightChange:u,...d}=e,{Component:f,label:p,description:h,startContent:v,endContent:m,hasHelper:g,shouldLabelBeOutside:y,shouldLabelBeInside:b,isInvalid:x,errorMessage:_,getBaseProps:w,getLabelProps:C,getInputProps:z,getInnerWrapperProps:R,getInputWrapperProps:N,getHelperWrapperProps:O,getDescriptionProps:A,getErrorMessageProps:F,isClearable:k,getClearButtonProps:D}=(0,t.useInput)({...d,ref:a,isMultiline:!0}),[M,E]=(0,n.useState)(s>1),[L,B]=(0,n.useState)(!1),I=p?(0,P.jsx)("label",{...C(),children:p}):null,U=z(),T=c?(0,P.jsx)("textarea",{...U,style:(0,r.mergeProps)(U.style,null!=i?i:{})}):(0,P.jsx)(S,{...U,cacheMeasurements:l,"data-hide-scroll":(0,r.dataAttr)(!L),maxRows:o,minRows:s,style:(0,r.mergeProps)(U.style,null!=i?i:{}),onHeightChange:(e,t)=>{1===s&&E(e>=2*t.rowHeight),o>s&&B(e>=o*t.rowHeight),null==u||u(e,t)}}),W=(0,n.useMemo)(()=>k?(0,P.jsx)("button",{...D(),children:(0,P.jsx)(j.CloseFilledIcon,{})}):null,[k,D]),H=(0,n.useMemo)(()=>v||m?(0,P.jsxs)("div",{...R(),children:[v,T,m]}):(0,P.jsx)("div",{...R(),children:T}),[v,U,m,R]),q=x&&_,K=q||h;return(0,P.jsxs)(f,{...w(),children:[y?I:null,(0,P.jsxs)("div",{...N(),"data-has-multiple-rows":(0,r.dataAttr)(M),children:[b?I:null,H,W]}),g&&K?(0,P.jsx)("div",{...O(),children:q?(0,P.jsx)("div",{...F(),children:_}):(0,P.jsx)("div",{...A(),children:h})}):null]})});C.displayName="HeroUI.Textarea";var z=C},97291,e=>{"use strict";e.s(["getCardAll",()=>r]);var t=e.i(95187),r=(0,t.createServerReference)("7e0c9e1c307f4fa24003dc1916a2192e4f77249b7c",t.callServer,void 0,t.findSourceMapURL,"getCardAll")},59938,e=>{"use strict";e.s(["removeCard",()=>r]);var t=e.i(95187),r=(0,t.createServerReference)("40c018267e8b51d271a86f43c31dcef4a227030b8d",t.callServer,void 0,t.findSourceMapURL,"removeCard")},49980,30902,62549,e=>{"use strict";e.s(["useImmer",()=>W],49980),e.i(47167);var t,r=Symbol.for("immer-nothing"),a=Symbol.for("immer-draftable"),n=Symbol.for("immer-state");function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];throw Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var s=Object.getPrototypeOf;function o(e){return!!e&&!!e[n]}function l(e){var t;return!!e&&(u(e)||Array.isArray(e)||!!e[a]||!!(null==(t=e.constructor)?void 0:t[a])||v(e)||m(e))}var c=Object.prototype.constructor.toString();function u(e){if(!e||"object"!=typeof e)return!1;let t=s(e);if(null===t)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===c}function d(e,t){0===f(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function f(e){let t=e[n];return t?t.type_:Array.isArray(e)?1:v(e)?2:3*!!m(e)}function p(e,t){return 2===f(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function h(e,t,r){let a=f(e);2===a?e.set(t,r):3===a?e.add(r):e[t]=r}function v(e){return e instanceof Map}function m(e){return e instanceof Set}function g(e){return e.copy_||e.base_}function y(e,t){if(v(e))return new Map(e);if(m(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=u(e);if(!0!==t&&("class_only"!==t||r)){let t=s(e);return null!==t&&r?{...e}:Object.assign(Object.create(t),e)}{let t=Object.getOwnPropertyDescriptors(e);delete t[n];let r=Reflect.ownKeys(t);for(let a=0;a<r.length;a++){let n=r[a],i=t[n];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[n]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[n]})}return Object.create(s(e),t)}}function b(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _(e)||o(e)||!l(e)||(f(e)>1&&Object.defineProperties(e,{set:{value:x},add:{value:x},clear:{value:x},delete:{value:x}}),Object.freeze(e),t&&Object.values(e).forEach(e=>b(e,!0))),e}function x(){i(2)}function _(e){return Object.isFrozen(e)}var w={};function S(e){let t=w[e];return t||i(0,e),t}function j(e,t){t&&(S("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function P(e){C(e),e.drafts_.forEach(R),e.drafts_=null}function C(e){e===t&&(t=e.parent_)}function z(e){return t={drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function R(e){let t=e[n];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function N(e,t){t.unfinalizedDrafts_=t.drafts_.length;let a=t.drafts_[0];return void 0!==e&&e!==a?(a[n].modified_&&(P(t),i(4)),l(e)&&(e=O(t,e),t.parent_||F(t,e)),t.patches_&&S("Patches").generateReplacementPatches_(a[n].base_,e,t.patches_,t.inversePatches_)):e=O(t,a,[]),P(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==r?e:void 0}function O(e,t,r){if(_(t))return t;let a=t[n];if(!a)return d(t,(n,i)=>A(e,a,t,n,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return F(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;let t=a.copy_,n=t,i=!1;3===a.type_&&(n=new Set(t),t.clear(),i=!0),d(n,(n,s)=>A(e,a,t,n,s,r,i)),F(e,t,!1),r&&e.patches_&&S("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function A(e,t,r,a,n,i,s){if(o(n)){let s=O(e,n,i&&t&&3!==t.type_&&!p(t.assigned_,a)?i.concat(a):void 0);if(h(r,a,s),!o(s))return;e.canAutoFreeze_=!1}else s&&r.add(n);if(l(n)&&!_(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;O(e,n),(!t||!t.scope_.parent_)&&"symbol"!=typeof a&&(v(r)?r.has(a):Object.prototype.propertyIsEnumerable.call(r,a))&&F(e,n)}}function F(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&b(t,r)}var k={get(e,t){if(t===n)return e;let r=g(e);if(!p(r,t)){var a,i=e,s=r,o=t;let n=E(s,o);return n?"value"in n?n.value:null==(a=n.get)?void 0:a.call(i.draft_):void 0}let c=r[t];return e.finalized_||!l(c)?c:c===M(e.base_,t)?(B(e),e.copy_[t]=I(c,e)):c},has:(e,t)=>t in g(e),ownKeys:e=>Reflect.ownKeys(g(e)),set(e,t,r){let a=E(g(e),t);if(null==a?void 0:a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){let a=M(g(e),t),i=null==a?void 0:a[n];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if((r===a?0!==r||1/r==1/a:r!=r&&a!=a)&&(void 0!==r||p(e.base_,t)))return!0;B(e),L(e)}return!!(e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=r,e.assigned_[t]=!0,!0)},deleteProperty:(e,t)=>(void 0!==M(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,B(e),L(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let r=g(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:a.enumerable,value:r[t]}:a},defineProperty(){i(11)},getPrototypeOf:e=>s(e.base_),setPrototypeOf(){i(12)}},D={};function M(e,t){let r=e[n];return(r?g(r):e)[t]}function E(e,t){if(!(t in e))return;let r=s(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=s(r)}}function L(e){!e.modified_&&(e.modified_=!0,e.parent_&&L(e.parent_))}function B(e){e.copy_||(e.copy_=y(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function I(e,r){let a=v(e)?S("MapSet").proxyMap_(e,r):m(e)?S("MapSet").proxySet_(e,r):function(e,r){let a=Array.isArray(e),n={type_:+!!a,scope_:r?r.scope_:t,modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,s=k;a&&(i=[n],s=D);let{revoke:o,proxy:l}=Proxy.revocable(i,s);return n.draft_=l,n.revoke_=o,l}(e,r);return(r?r.scope_:t).drafts_.push(a),a}d(k,(e,t)=>{D[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),D.deleteProperty=function(e,t){return D.set.call(this,e,t,void 0)},D.set=function(e,t,r){return k.set.call(this,e[0],t,r,e[0])};var U=new class{createDraft(e){var t;l(e)||i(8),o(e)&&(o(t=e)||i(10,t),e=function e(t){let r;if(!l(t)||_(t))return t;let a=t[n];if(a){if(!a.modified_)return a.base_;a.finalized_=!0,r=y(t,a.scope_.immer_.useStrictShallowCopy_)}else r=y(t,!0);return d(r,(t,a)=>{h(r,t,e(a))}),a&&(a.finalized_=!1),r}(t));let r=z(this),a=I(e,void 0);return a[n].isManual_=!0,C(r),a}finishDraft(e,t){let r=e&&e[n];r&&r.isManual_||i(9);let{scope_:a}=r;return j(a,t),N(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let a=t[r];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}r>-1&&(t=t.slice(r+1));let a=S("Patches").applyPatches_;return o(e)?a(e,t):this.produce(e,e=>a(e,t))}constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,a)=>{let n;if("function"==typeof e&&"function"!=typeof t){let r=t;t=e;let a=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return a.produce(e,e=>t.call(this,e,...i))}}if("function"!=typeof t&&i(6),void 0!==a&&"function"!=typeof a&&i(7),l(e)){let r=z(this),i=I(e,void 0),s=!0;try{n=t(i),s=!1}finally{s?P(r):C(r)}return j(r,a),N(n,r)}if(e&&"object"==typeof e)i(1,e);else{if(void 0===(n=t(e))&&(n=e),n===r&&(n=void 0),this.autoFreeze_&&b(n,!0),a){let t=[],r=[];S("Patches").generateReplacementPatches_(e,n,t,r),a(t,r)}return n}},this.produceWithPatches=(e,t)=>{let r,a;if("function"==typeof e){var n=this;return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return n.produceWithPatches(t,t=>e(t,...a))}}return[this.produce(e,t,(e,t)=>{r=e,a=t}),r,a]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}}().produce,T=e.i(71645);function W(e){var t=(0,T.useState)(function(){return b("function"==typeof e?e():e,!0)}),r=t[1];return[t[0],(0,T.useCallback)(function(e){r("function"==typeof e?U(e):b(e))},[])]}e.s(["default",()=>et],30902);var H=e.i(43476),q=e.i(95187),K=(0,q.createServerReference)("40b4732e706ad9c7e14570165400c460823635e33b",q.callServer,void 0,q.findSourceMapURL,"getBookAll"),V=(0,q.createServerReference)("407b0c4baa0cab5509037388f1833ea68e90bdd99a",q.callServer,void 0,q.findSourceMapURL,"removeBook"),G=(0,q.createServerReference)("40c6f29921d5d7c5488c28faa533a45b4218835e5b",q.callServer,void 0,q.findSourceMapURL,"saveBook"),X=e.i(75157),J=e.i(35889),Q=e.i(5483),Y=e.i(212),Z=e.i(56124),$=e.i(76220),ee=e.i(70319);function et(e){let{user_id:t,onSelect:r}=e,[a,n]=(0,T.useState)([]),[i,s]=(0,T.useState)(1),[o,l]=(0,T.useState)(""),[c,u]=(0,T.useState)(!1),[d,f]=(0,T.useState)(!1),[p,h]=(0,T.useState)(!1),v=async()=>{f(!0),"success"===(await G({uuid:(0,X.getUUID)(),user_id:t,name:o,created_by:t,created_at:new Date,updated_at:new Date})).status?(l(""),ee.toast.success("save book success"),s(e=>e+1)):ee.toast.error("save book failed"),f(!1)},m=async e=>{f(!0),"success"===(await V(e)).status?(ee.toast.success("delete book success"),s(e=>e+1)):ee.toast.error("delete book failed"),f(!1)};return(0,T.useEffect)(()=>{(async()=>{h(!0);let e=await K(t);"success"===e.status?n(e.data):(console.log(e.error),ee.toast.error("load data error")),h(!1)})()},[t,i]),(0,H.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,H.jsx)(Z.Select,{label:"Select book",onChange:async e=>{let t=e.target.value;await r(t)},endContent:p&&(0,H.jsx)(Q.CircularProgress,{"aria-label":"Loading...",color:"default"}),children:a.map(e=>(0,H.jsx)($.SelectItem,{textValue:e.name,children:e.name},e.uuid))}),(0,H.jsx)("div",{className:"flex flex-row gap-1",children:(0,H.jsx)(J.Button,{size:"sm",radius:"full",onPress:()=>u(!c),children:c?"finish":"edit"})}),c&&(0,H.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,H.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,H.jsx)(Y.Input,{label:"Name of Book",size:"sm",onChange:e=>l(e.target.value)}),(0,H.jsx)(J.Button,{size:"sm",radius:"full",isDisabled:d,onPress:v,children:"add"})]}),a.map(e=>(0,H.jsxs)("div",{className:"flex flex-row items-center justify-start px-2 gap-2 bg-sand-300",children:[e.name,(0,H.jsx)(J.Button,{size:"sm",radius:"full",isDisabled:d,onPress:()=>m(e.uuid),children:"delete"})]},e.uuid))]})]})}e.s(["default",()=>ei],62549);var er=(0,q.createServerReference)("40ccf379133a042bcb33ab822e665a9d3d4861b0fd",q.callServer,void 0,q.findSourceMapURL,"getChapterAll"),ea=(0,q.createServerReference)("40ecb5dbc507dd4fa2da8470ce60303af8f6616126",q.callServer,void 0,q.findSourceMapURL,"removeChapter"),en=(0,q.createServerReference)("40902a5e92256bf8646d0592e0f8081821d473955e",q.callServer,void 0,q.findSourceMapURL,"saveChapter");function ei(e){let{user_id:t,book_uuid:r,onSelect:a}=e,[n,i]=(0,T.useState)([]),[s,o]=(0,T.useState)(1),[l,c]=(0,T.useState)(""),[u,d]=(0,T.useState)(""),[f,p]=(0,T.useState)(!1),[h,v]=(0,T.useState)(!1),[m,g]=(0,T.useState)(!1),y=async()=>{if(!r)return void ee.toast.error("no book selected");v(!0),"success"===(await en({uuid:(0,X.getUUID)(),book_uuid:r,order_num:parseInt(l,10),name:u,created_by:t,created_at:new Date,updated_at:new Date})).status?(d(""),ee.toast.success("save chapter success"),o(e=>e+1)):ee.toast.error("save chapter failed"),v(!1)},b=async e=>{v(!0),"success"===(await ea(e)).status?(ee.toast.success("delete chapter success"),o(e=>e+1)):ee.toast.error("delete chapter failed"),v(!1)};return(0,T.useEffect)(()=>{(async()=>{g(!0);let e=await er(r);"success"===e.status?i(e.data):(console.log(e.error),ee.toast.error("load data error")),g(!1)})()},[r,s]),(0,H.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,H.jsx)(Z.Select,{label:"Select chapter",onChange:async e=>{let t=e.target.value;await a(t)},endContent:m&&(0,H.jsx)(Q.CircularProgress,{"aria-label":"Loading...",color:"default"}),children:n.map(e=>(0,H.jsxs)($.SelectItem,{textValue:"".concat(e.order_num,", ").concat(e.name),children:[e.order_num,", ",e.name]},e.uuid))}),(0,H.jsx)("div",{className:"flex flex-row gap-1",children:(0,H.jsx)(J.Button,{size:"sm",radius:"full",onPress:()=>p(!f),children:f?"finish":"edit"})}),f&&(0,H.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,H.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,H.jsx)(Y.Input,{label:"Order",type:"number",size:"sm",className:"w-1/5",onChange:e=>c(e.target.value)}),(0,H.jsx)(Y.Input,{label:"Name of Book",size:"sm",onChange:e=>d(e.target.value)}),(0,H.jsx)(J.Button,{size:"sm",radius:"full",isDisabled:h,onPress:y,children:"add"})]}),n.map(e=>(0,H.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 bg-sand-300",children:[e.order_num," - ",e.name,(0,H.jsx)(J.Button,{size:"sm",radius:"full",isDisabled:h,onPress:()=>b(e.uuid),children:"delete"})]},e.uuid))]})]})}},25642,e=>{"use strict";e.s(["Item",()=>x,"default",()=>_]);var t=e.i(43476),r=e.i(71645),a=e.i(49980),n=e.i(35889),i=e.i(5483),s=e.i(98245),o=e.i(12041),l=e.i(77148),c=e.i(64925),u=e.i(75157),d=e.i(30902),f=e.i(62549),p=e.i(70319),h=e.i(73665),v=e.i(97291),m=e.i(59938),g=e.i(70433),y=e.i(10295),b=e.i(49649);function x(e){let{item:a,handleUpdate:i,handleDelete:s}=e,[o,u]=(0,r.useState)(!1),[d,f]=(0,r.useState)(a);return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[(0,t.jsx)(n.Button,{variant:"solid",color:"primary",id:"button-add-save",onPress:()=>u(!o),children:o?"Cancel":"Edit"}),o&&(0,t.jsx)(n.Button,{variant:"solid",color:"primary",id:"button-add-save",onPress:async()=>await i(d),children:"Save"}),(0,t.jsx)(c.Tooltip,{placement:"top",content:"delete",children:(0,t.jsx)(n.Button,{isIconOnly:!0,variant:"light",color:"danger",className:"w-fit h-fit",onPress:async()=>{window.confirm("Are you sure to delete?")&&await s(a)},children:(0,t.jsx)(h.MdDelete,{size:20})})})]}),o?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(l.Textarea,{label:"sentence",classNames:{input:"text-xl leading-tight font-roboto"},value:d.question,onChange:e=>f({...d,question:e.target.value})}),(0,t.jsx)(l.Textarea,{label:"note",classNames:{input:"text-xl leading-tight font-roboto"},value:d.answer,onChange:e=>f({...d,answer:e.target.value})})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:d.question}),(0,t.jsx)("div",{children:d.answer})]})]})}function _(e){let{user_id:c}=e,[h,_]=(0,r.useState)(""),[w,S]=(0,r.useState)(""),[j,P]=(0,r.useState)(),[C,z]=(0,a.useImmer)([]),[R,N]=(0,r.useState)(!1),[O,A]=(0,r.useState)(!1),[F,k]=(0,r.useState)(1),[D,M]=(0,r.useState)(0),E=(0,r.useMemo)(()=>C.slice().reverse(),[C]),L=async e=>{N(!0);let t=await (0,v.getCardAll)(c,b.FilterType.Unspecified,e,"",F,20);"success"===t.status&&(M(t.total_pages||0),z(e=>{for(let r of(e.length=0,t.data))e.push(r)})),N(!1)},B=async e=>{if("success"!==(await (0,g.saveCard)(e)).status)return void p.toast.error("delete card failed");z(t=>{let r=t.findIndex(t=>t.uuid===e.uuid);r>=0&&(t[r]={...e})})},I=async e=>{if("success"!==(await (0,m.removeCard)(e.uuid)).status)return void p.toast.error("delete card failed");z(t=>{let r=t.findIndex(t=>t.uuid===e.uuid);r>=0&&t.splice(r,1)}),p.toast.error("delete card success")},U=async()=>{if(!j||!j.question||!j.answer)return;A(!0);let e={uuid:(0,u.getUUID)(),user_id:c,question:j.question,suggestion:"",answer:j.answer,familiarity:0,note:"",created_at:new Date,updated_at:new Date};if("error"===(await (0,g.saveCard)(e)).status){p.toast.error("save card failed"),A(!1);return}if("error"===(await (0,y.saveCardTag)({...e,tag_list_new:[w]})).status){p.toast.error("save card tag failed"),A(!1);return}z(t=>{t.push(e)}),P(void 0),p.toast.success("added and saved successfully!"),A(!1)};return(0,r.useEffect)(()=>{let e=e=>{if(e.ctrlKey&&"s"===e.key){e.preventDefault();let t=document.getElementById("button-add-save");null==t||t.click()}};return document.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 my-4",children:[(0,t.jsx)(d.default,{user_id:c,onSelect:async e=>{_(e)}}),(0,t.jsx)(f.default,{user_id:c,book_uuid:h,onSelect:async e=>{S(e),P(void 0),await L(e)}})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(l.Textarea,{label:"sentence",classNames:{input:"text-xl leading-tight font-roboto"},value:null==j?void 0:j.question,onChange:e=>P({...j,question:e.target.value})}),(0,t.jsx)(l.Textarea,{label:"note",classNames:{input:"text-xl leading-tight font-roboto"},value:null==j?void 0:j.answer,onChange:e=>P({...j,answer:e.target.value})}),(0,t.jsx)(n.Button,{variant:"solid",color:"primary",id:"button-add-save",isDisabled:!j||O,onPress:U,children:"Add & Save (Ctrl+S)"})]}),R&&(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4 my-4",children:(0,t.jsx)(o.Spinner,{classNames:{label:"text-foreground mt-4"},variant:"simple"})}),R?(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-center gap-4",children:(0,t.jsx)(i.CircularProgress,{label:"Loading..."})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,t.jsx)("div",{children:"Page"}),(0,t.jsx)(s.Pagination,{showControls:!0,loop:!0,variant:"bordered",total:D,page:F,onChange:k})]}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-4 my-4",children:E.map((e,r)=>(0,t.jsx)(x,{item:e,handleUpdate:B,handleDelete:I},"".concat(r,"-").concat(e.uuid)))}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,t.jsx)("div",{children:"Page"}),(0,t.jsx)(s.Pagination,{showControls:!0,loop:!0,variant:"bordered",total:D,page:F,onChange:k})]})]})]})}}]);