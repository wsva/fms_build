(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,e=>{"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.s(["_",()=>t])},77148,e=>{"use strict";e.s(["Textarea",()=>N],77148);var t=e.i(34738),n=e.i(75540),r=e.i(73830),a=e.i(71645);function i(){return(i=Object.assign.bind()).apply(null,arguments)}var s=a.useLayoutEffect,l=function(e){var t=a.default.useRef(e);return s(function(){t.current=e}),t},o=function(e,t){if("function"==typeof e)return void e(t);e.current=t},d=function(e,t){var n=a.default.useRef();return a.default.useCallback(function(r){e.current=r,n.current&&o(n.current,null),n.current=t,t&&o(t,r)},[t])},c={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},u=function(e){Object.keys(c).forEach(function(t){e.style.setProperty(t,c[t],"important")})},f=null,m=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},h=function(){},x=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],p=!!document.documentElement.currentStyle,g=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=x.reduce(function(e,n){return e[n]=t[n],e},{}),r=n.boxSizing;if(""===r)return null;p&&"border-box"===r&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var a=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),i=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:a,borderSize:i}};function v(e,t,n){var r=l(n);a.useLayoutEffect(function(){var n=function(e){return r.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var b=function(e,t){v(document.body,"reset",function(n){e.current.form===n.target&&t(n)})},j=function(e){v(window,"resize",e)},y=function(e){v(document.fonts,"loadingdone",e)},S=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],w=a.forwardRef(function(e,t){var n=e.cacheMeasurements,r=e.maxRows,s=e.minRows,l=e.onChange,o=void 0===l?h:l,c=e.onHeightChange,x=void 0===c?h:c,p=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,S),v=void 0!==p.value,w=a.useRef(null),R=d(w,t),z=a.useRef(0),M=a.useRef(),N=function(){var e=w.current,t=n&&M.current?M.current:g(e);if(t){M.current=t;var a,i,l,o,d,c,h,p,v,b,j,y=(a=e.value||e.placeholder||"x",void 0===(i=s)&&(i=1),void 0===(l=r)&&(l=1/0),f||((f=document.createElement("textarea")).setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),u(f)),null===f.parentNode&&document.body.appendChild(f),o=t.paddingSize,d=t.borderSize,h=(c=t.sizingStyle).boxSizing,Object.keys(c).forEach(function(e){f.style[e]=c[e]}),u(f),f.value=a,p=m(f,t),f.value=a,p=m(f,t),f.value="x",b=(v=f.scrollHeight-o)*i,"border-box"===h&&(b=b+o+d),p=Math.max(b,p),j=v*l,"border-box"===h&&(j=j+o+d),[p=Math.min(j,p),v]),S=y[0],R=y[1];z.current!==S&&(z.current=S,e.style.setProperty("height",S+"px","important"),x(S,{rowHeight:R}))}};return a.useLayoutEffect(N),b(w,function(){if(!v){var e=w.current.value;requestAnimationFrame(function(){var t=w.current;t&&e!==t.value&&N()})}}),j(N),y(N),a.createElement("textarea",i({},p,{onChange:function(e){v||N(),o(e)},ref:R}))}),R=e.i(19110),z=e.i(43476),M=(0,r.forwardRef)((e,r)=>{let{style:i,minRows:s=3,maxRows:l=8,cacheMeasurements:o=!1,disableAutosize:d=!1,onHeightChange:c,...u}=e,{Component:f,label:m,description:h,startContent:x,endContent:p,hasHelper:g,shouldLabelBeOutside:v,shouldLabelBeInside:b,isInvalid:j,errorMessage:y,getBaseProps:S,getLabelProps:M,getInputProps:N,getInnerWrapperProps:P,getInputWrapperProps:T,getHelperWrapperProps:C,getDescriptionProps:I,getErrorMessageProps:O,isClearable:B,getClearButtonProps:D}=(0,t.useInput)({...u,ref:r,isMultiline:!0}),[L,U]=(0,a.useState)(s>1),[F,_]=(0,a.useState)(!1),E=m?(0,z.jsx)("label",{...M(),children:m}):null,H=N(),A=d?(0,z.jsx)("textarea",{...H,style:(0,n.mergeProps)(H.style,null!=i?i:{})}):(0,z.jsx)(w,{...H,cacheMeasurements:o,"data-hide-scroll":(0,n.dataAttr)(!F),maxRows:l,minRows:s,style:(0,n.mergeProps)(H.style,null!=i?i:{}),onHeightChange:(e,t)=>{1===s&&U(e>=2*t.rowHeight),l>s&&_(e>=l*t.rowHeight),null==c||c(e,t)}}),W=(0,a.useMemo)(()=>B?(0,z.jsx)("button",{...D(),children:(0,z.jsx)(R.CloseFilledIcon,{})}):null,[B,D]),k=(0,a.useMemo)(()=>x||p?(0,z.jsxs)("div",{...P(),children:[x,A,p]}):(0,z.jsx)("div",{...P(),children:A}),[x,H,p,P]),K=j&&y,V=K||h;return(0,z.jsxs)(f,{...S(),children:[v?E:null,(0,z.jsxs)("div",{...T(),"data-has-multiple-rows":(0,n.dataAttr)(L),children:[b?E:null,k,W]}),g&&V?(0,z.jsx)("div",{...C(),children:K?(0,z.jsx)("div",{...O(),children:y}):(0,z.jsx)("div",{...I(),children:h})}):null]})});M.displayName="HeroUI.Textarea";var N=M},31748,e=>{"use strict";e.s(["default",()=>y],31748);var t=e.i(43476),n=e.i(71645),r=e.i(35889),a=e.i(56124),i=e.i(76220),s=e.i(77148),l=e.i(70319),o=e.i(95187),d=(0,o.createServerReference)("408d193784b1e58193ba729d9675e34d618bb4546e",o.callServer,void 0,o.findSourceMapURL,"getPlanAll"),c=(0,o.createServerReference)("40c579e2e733fb45868d3d7ac040b0dff4b17039ea",o.callServer,void 0,o.findSourceMapURL,"removePlan"),u=(0,o.createServerReference)("40e0502d5a619a7ee321672c46ada2dae4be9c23ba",o.callServer,void 0,o.findSourceMapURL,"savePlan"),f=e.i(14060),m=e.i(64925),h=e.i(73665);let x=new Map([["pending","bg-sand-300"],["completed","bg-green-200"],["failed","bg-red-200"]]);function p(e){var n;let{item:a,handleUpdate:i}=e;return(0,t.jsx)("div",{className:"flex flex-col lg:flex-row items-center justify-start w-full ".concat(x.get(a.status)),children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,t.jsxs)("div",{className:"text-lg text-gray-500 select-none",children:[a.start_at.toISOString().split("T")[0],"â€ƒfrom ",((n=a.start_at).setMinutes(n.getMinutes()),n.getHours().toString().padStart(2,"0")+":"+n.getMinutes().toString().padStart(2,"0"))]}),"pending"===a.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Tooltip,{placement:"bottom",content:"done",children:(0,t.jsx)(r.Button,{isIconOnly:!0,size:"sm",variant:"light",color:"success",onPress:async()=>{await i({...a,status:"completed"})},children:(0,t.jsx)(h.MdDone,{size:24})})}),(0,t.jsx)(m.Tooltip,{placement:"bottom",content:"failed",children:(0,t.jsx)(r.Button,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",onPress:async()=>{await i({...a,status:"failed"})},children:(0,t.jsx)(h.MdClose,{size:24})})})]})]})})}var g=(0,o.createServerReference)("405e276e882daac91857e37d193bb26d2fa8f80b31",o.callServer,void 0,o.findSourceMapURL,"getRecordAll"),v=(0,o.createServerReference)("409fe1bed4f03608a8c035ba4d9ac61182f4410b28",o.callServer,void 0,o.findSourceMapURL,"saveRecord"),b=e.i(75157);function j(e){let{item:a,user_id:i,handleDelete:s,handleUpdate:o}=e,[d,c]=(0,n.useState)([]),[u,x]=(0,n.useState)(1),j=async()=>{"success"===(await v({uuid:(0,b.getUUID)(),user_id:i,plan_uuid:a.uuid,start_at:new Date,status:"pending",created_at:new Date,updated_at:new Date})).status?x(e=>e+1):l.toast.error("save failed")},y=async e=>{"success"===(await v({...e,updated_at:new Date})).status?x(e=>e+1):l.toast.error("save failed")};return(0,n.useEffect)(()=>{(async()=>{let e=await g(a.uuid);"success"===e.status?c(e.data):(console.log(e.error),l.toast.error("load data error"))})()},[a,u]),(0,t.jsxs)("div",{className:"flex flex-col items-start justify-center w-full rounded-md mx-2 p-1 bg-sand-300",children:[(0,t.jsxs)("div",{className:"flex flex-row items-start justify-center w-full rounded-md p-1 gap-2",children:[(0,t.jsx)("div",{className:"flex-1 text-xl font-bold",children:"".concat(a.content," (").concat(a.minutes," min)")}),(0,t.jsx)(m.Tooltip,{placement:"bottom",content:"top",children:(0,t.jsx)(r.Button,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>o({...a,favorite:"Y"===a.favorite?"N":"Y"}),children:"Y"===a.favorite?(0,t.jsx)(h.MdOutlineStar,{className:"text-blue-700",size:24}):(0,t.jsx)(h.MdOutlineStarBorder,{size:24})})}),(0,t.jsx)(m.Tooltip,{placement:"bottom",content:"start",children:(0,t.jsx)(r.Button,{isIconOnly:!0,size:"sm",variant:"light",onPress:j,children:(0,t.jsx)(h.MdCelebration,{className:"text-blue-700",size:24})})}),(0,t.jsx)(m.Tooltip,{placement:"bottom",content:"delete",children:(0,t.jsx)(r.Button,{isIconOnly:!0,size:"sm",variant:"light",onPress:async()=>{await s(a)},children:(0,t.jsx)(h.MdDelete,{className:"text-red-400",size:24})})})]}),d.length>0&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,t.jsx)(f.Divider,{}),d.map((e,n)=>(0,t.jsx)(p,{item:e,handleUpdate:y},n))]})]})}function y(e){let{user_id:o}=e,[f,m]=(0,n.useState)(!1),[h,x]=(0,n.useState)(15),[p,g]=(0,n.useState)(""),[v,y]=(0,n.useState)([]),[S,w]=(0,n.useState)(1),R=async e=>{"success"===(await c(e.uuid)).status?(l.toast.success("delete plan success"),w(e=>e+1)):l.toast.error("delete plan failed")},z=async e=>{"success"===(await u(e)).status?w(e=>e+1):l.toast.error("update failed")},M=async()=>{let e=p.trim();if(!e)return void l.toast.error("Plan content cannot be empty");try{m(!0);let t=await u({uuid:(0,b.getUUID)(),user_id:o,content:e,favorite:"N",minutes:h,created_at:new Date,updated_at:new Date});"success"===t.status?(l.toast.success("Plan added"),g(""),w(e=>e+1)):l.toast.error(String(t.error))}finally{m(!1)}};return(0,n.useEffect)(()=>{(async()=>{let e=await d(o);"success"===e.status?y(e.data):(console.log(e.error),l.toast.error("load data error"))})()},[o,S]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 my-4 bg-sand-300 p-2 rounded-md",children:[(0,t.jsx)(s.Textarea,{size:"lg",className:"w-full",label:"Plan content",classNames:{inputWrapper:"bg-sand-200",input:"text-md"},placeholder:"Do something",value:p,onChange:e=>g(e.target.value)}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,t.jsxs)(a.Select,{"aria-label":"time span",className:"max-w-sm",selectedKeys:[String(h)],onChange:e=>x(parseInt(e.target.value)),startContent:(0,t.jsx)("div",{className:"whitespace-nowrap font-bold",children:"for"}),children:[(0,t.jsx)(i.SelectItem,{textValue:"15 minutes",children:"15 minutes"},"15"),(0,t.jsx)(i.SelectItem,{textValue:"30 minutes",children:"30 minutes"},"30"),(0,t.jsx)(i.SelectItem,{textValue:"1 hour",children:"1 hour"},"60")]}),(0,t.jsx)(r.Button,{variant:"solid",color:"primary",isDisabled:f,onPress:M,children:"Add Plan"})]})]}),v.length>0&&(0,t.jsx)("div",{className:"flex flex-col items-center justify-center w-full gap-2 my-4",children:v.map(e=>(0,t.jsx)(j,{item:e,user_id:o,handleDelete:R,handleUpdate:z},e.uuid))})]})}}]);