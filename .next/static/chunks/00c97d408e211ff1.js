(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77148,e=>{"use strict";e.s(["Textarea",()=>L],77148);var t=e.i(34738),r=e.i(75540),i=e.i(73830),a=e.i(71645);function n(){return(n=Object.assign.bind()).apply(null,arguments)}var l=a.useLayoutEffect,o=function(e){var t=a.default.useRef(e);return l(function(){t.current=e}),t},s=function(e,t){if("function"==typeof e)return void e(t);e.current=t},d=function(e,t){var r=a.default.useRef();return a.default.useCallback(function(i){e.current=i,r.current&&s(r.current,null),r.current=t,t&&s(t,i)},[t])},c={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},u=function(e){Object.keys(c).forEach(function(t){e.style.setProperty(t,c[t],"important")})},f=null,p=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},g=function(){},x=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],m=!!document.documentElement.currentStyle,v=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=x.reduce(function(e,r){return e[r]=t[r],e},{}),i=r.boxSizing;if(""===i)return null;m&&"border-box"===i&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),n=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:n}};function h(e,t,r){var i=o(r);a.useLayoutEffect(function(){var r=function(e){return i.current(e)};if(e)return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}},[])}var b=function(e,t){h(document.body,"reset",function(r){e.current.form===r.target&&t(r)})},y=function(e){h(window,"resize",e)},w=function(e){h(document.fonts,"loadingdone",e)},j=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],S=a.forwardRef(function(e,t){var r=e.cacheMeasurements,i=e.maxRows,l=e.minRows,o=e.onChange,s=void 0===o?g:o,c=e.onHeightChange,x=void 0===c?g:c,m=function(e,t){if(null==e)return{};var r={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;r[i]=e[i]}return r}(e,j),h=void 0!==m.value,S=a.useRef(null),R=d(S,t),k=a.useRef(0),N=a.useRef(),L=function(){var e=S.current,t=r&&N.current?N.current:v(e);if(t){N.current=t;var a,n,o,s,d,c,g,m,h,b,y,w=(a=e.value||e.placeholder||"x",void 0===(n=l)&&(n=1),void 0===(o=i)&&(o=1/0),f||((f=document.createElement("textarea")).setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),u(f)),null===f.parentNode&&document.body.appendChild(f),s=t.paddingSize,d=t.borderSize,g=(c=t.sizingStyle).boxSizing,Object.keys(c).forEach(function(e){f.style[e]=c[e]}),u(f),f.value=a,m=p(f,t),f.value=a,m=p(f,t),f.value="x",b=(h=f.scrollHeight-s)*n,"border-box"===g&&(b=b+s+d),m=Math.max(b,m),y=h*o,"border-box"===g&&(y=y+s+d),[m=Math.min(y,m),h]),j=w[0],R=w[1];k.current!==j&&(k.current=j,e.style.setProperty("height",j+"px","important"),x(j,{rowHeight:R}))}};return a.useLayoutEffect(L),b(S,function(){if(!h){var e=S.current.value;requestAnimationFrame(function(){var t=S.current;t&&e!==t.value&&L()})}}),y(L),w(L),a.createElement("textarea",n({},m,{onChange:function(e){h||L(),s(e)},ref:R}))}),R=e.i(19110),k=e.i(43476),N=(0,i.forwardRef)((e,i)=>{let{style:n,minRows:l=3,maxRows:o=8,cacheMeasurements:s=!1,disableAutosize:d=!1,onHeightChange:c,...u}=e,{Component:f,label:p,description:g,startContent:x,endContent:m,hasHelper:v,shouldLabelBeOutside:h,shouldLabelBeInside:b,isInvalid:y,errorMessage:w,getBaseProps:j,getLabelProps:N,getInputProps:L,getInnerWrapperProps:T,getInputWrapperProps:C,getHelperWrapperProps:B,getDescriptionProps:M,getErrorMessageProps:P,isClearable:D,getClearButtonProps:F}=(0,t.useInput)({...u,ref:i,isMultiline:!0}),[U,A]=(0,a.useState)(l>1),[z,E]=(0,a.useState)(!1),H=p?(0,k.jsx)("label",{...N(),children:p}):null,W=L(),_=d?(0,k.jsx)("textarea",{...W,style:(0,r.mergeProps)(W.style,null!=n?n:{})}):(0,k.jsx)(S,{...W,cacheMeasurements:s,"data-hide-scroll":(0,r.dataAttr)(!z),maxRows:o,minRows:l,style:(0,r.mergeProps)(W.style,null!=n?n:{}),onHeightChange:(e,t)=>{1===l&&A(e>=2*t.rowHeight),o>l&&E(e>=o*t.rowHeight),null==c||c(e,t)}}),I=(0,a.useMemo)(()=>D?(0,k.jsx)("button",{...F(),children:(0,k.jsx)(R.CloseFilledIcon,{})}):null,[D,F]),O=(0,a.useMemo)(()=>x||m?(0,k.jsxs)("div",{...T(),children:[x,_,m]}):(0,k.jsx)("div",{...T(),children:_}),[x,W,m,T]),V=y&&w,G=V||g;return(0,k.jsxs)(f,{...j(),children:[h?H:null,(0,k.jsxs)("div",{...C(),"data-has-multiple-rows":(0,r.dataAttr)(U),children:[b?H:null,O,I]}),v&&G?(0,k.jsx)("div",{...B(),children:V?(0,k.jsx)("div",{...P(),children:w}):(0,k.jsx)("div",{...M(),children:g})}):null]})});N.displayName="HeroUI.Textarea";var L=N},49649,e=>{"use strict";e.s(["FamiliarityList",()=>l,"FilterType",()=>t,"FilterTypeList",()=>r,"TagAll",()=>a,"TagNo",()=>n,"TagUnspecified",()=>i]);var t=function(e){return e.Normal="normal",e.Easy="easy",e.Unspecified="unspecified",e.Uncomplete="uncomplete",e}({});let r=[{value:"unspecified",description:"all"},{value:"normal",description:"familiarity < 6"},{value:"easy",description:"familiarity = 6"},{value:"uncomplete",description:"question or answer is empty"}],i="unspecified",a="all tagged",n="not tagged",l=[{value:0,description:"Newly Added",label:"newly added",color:"bg-slate-200"},{value:1,description:"Still Unfamiliar",label:"strange",color:"bg-red-200"},{value:2,description:"Passive Understanding",label:"known",color:"bg-orange-200"},{value:3,description:"Recognition Without Understanding",label:"familiar",color:"bg-amber-200"},{value:4,description:"Understanding in Context",label:"skilled",color:"bg-cyan-200"},{value:5,description:"Active Recall",label:"practiced",color:"bg-green-200"},{value:6,description:"Natural Usage",label:"easy & never appear again",color:"bg-lime-200"}]},22275,e=>{"use strict";e.s(["getTagAll",()=>r]);var t=e.i(95187),r=(0,t.createServerReference)("40ed12d6e0526b25a7d884bf13ac5a44dfbc066bb6",t.callServer,void 0,t.findSourceMapURL,"getTagAll")},99749,e=>{"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.s(["_",()=>t])},24597,e=>{"use strict";e.s(["Link",()=>h],24597);var t=e.i(84898),r=e.i(79754),i=(0,t.tv)({base:["relative inline-flex items-center outline-solid outline-transparent tap-highlight-transparent",...r.dataFocusVisibleClasses],variants:{size:{sm:"text-small",md:"text-medium",lg:"text-large"},color:{foreground:"text-foreground",primary:"text-primary",secondary:"text-secondary",success:"text-success",warning:"text-warning",danger:"text-danger"},underline:{none:"no-underline",hover:"hover:underline",always:"underline",active:"active:underline",focus:"focus:underline"},isBlock:{true:["px-2","py-1","hover:after:opacity-100","after:content-['']","after:inset-0","after:opacity-0","after:w-full","after:h-full","after:rounded-xl","after:transition-background","after:absolute"],false:"hover:opacity-hover active:opacity-disabled transition-opacity"},isDisabled:{true:"opacity-disabled cursor-default pointer-events-none"},disableAnimation:{true:"after:transition-none transition-none"}},compoundVariants:[{isBlock:!0,color:"foreground",class:"hover:after:bg-foreground/10"},{isBlock:!0,color:"primary",class:"hover:after:bg-primary/20"},{isBlock:!0,color:"secondary",class:"hover:after:bg-secondary/20"},{isBlock:!0,color:"success",class:"hover:after:bg-success/20"},{isBlock:!0,color:"warning",class:"hover:after:bg-warning/20"},{isBlock:!0,color:"danger",class:"hover:after:bg-danger/20"},{underline:["hover","always","active","focus"],class:"underline-offset-4"}],defaultVariants:{color:"primary",size:"md",isBlock:!1,underline:"none",isDisabled:!1}}),a=e.i(69080),n=e.i(50179),l=e.i(11458),o=e.i(49962),s=e.i(43027),d=e.i(73830),c=e.i(95494),u=e.i(20253),f=e.i(29427),p=e.i(75540),g=e.i(71645),x=e.i(43476),m=e=>(0,x.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",width:"1em",...e,children:[(0,x.jsx)("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),(0,x.jsx)("path",{d:"M15 3h6v6"}),(0,x.jsx)("path",{d:"M10 14L21 3"})]}),v=(0,d.forwardRef)((e,t)=>{let{Component:r,children:v,showAnchorIcon:h,anchorIcon:b=(0,x.jsx)(m,{className:"flex mx-1 text-current self-center"}),getLinkProps:y}=function(e){var t,r,x,m;let v=(0,c.useProviderContext)(),[h,b]=(0,d.mapPropsVariants)(e,i.variantKeys),{ref:y,as:w,children:j,anchorIcon:S,isExternal:R=!1,showAnchorIcon:k=!1,autoFocus:N=!1,className:L,onPress:T,onPressStart:C,onPressEnd:B,onClick:M,...P}=h,D=(0,u.useDOMRef)(y),F=null!=(r=null!=(t=null==e?void 0:e.disableAnimation)?t:null==v?void 0:v.disableAnimation)&&r,{linkProps:U}=function(e,t){let{elementType:r="a",onPress:i,onPressStart:d,onPressEnd:c,onClick:u,isDisabled:f,...p}=e,g={};"a"!==r&&(g={role:"link",tabIndex:f?void 0:0});let{focusableProps:x}=(0,o.useFocusable)(e,t),{pressProps:m,isPressed:v}=(0,s.usePress)({onClick:u,onPress:i,onPressStart:d,onPressEnd:c,isDisabled:f,ref:t}),h=(0,a.filterDOMProps)(p,{labelable:!0,isLink:"a"===r}),b=(0,n.mergeProps)(x,m),y=(0,l.useRouter)(),w=(0,l.useLinkProps)(e);return{isPressed:v,linkProps:(0,n.mergeProps)(h,w,{...b,...g,"aria-disabled":f||void 0,"aria-current":e["aria-current"],onClick:t=>{var r;null==(r=m.onClick)||r.call(m,t),(0,l.handleLinkClick)(t,y,e.href,e.routerOptions)}})}}({...P,onPress:T,onPressStart:C,onPressEnd:B,onClick:M,isDisabled:e.isDisabled,elementType:"".concat(w)},D),{isFocused:A,isFocusVisible:z,focusProps:E}=(0,f.useFocusRing)({autoFocus:N});R&&(P.rel=null!=(x=P.rel)?x:"noopener noreferrer",P.target=null!=(m=P.target)?m:"_blank");let H=(0,g.useMemo)(()=>i({...b,disableAnimation:F,className:L}),[(0,p.objectToDeps)(b),F,L]);return{Component:w||"a",children:j,anchorIcon:S,showAnchorIcon:k,getLinkProps:(0,g.useCallback)(()=>({ref:D,className:H,"data-focus":(0,p.dataAttr)(A),"data-disabled":(0,p.dataAttr)(e.isDisabled),"data-focus-visible":(0,p.dataAttr)(z),...(0,p.mergeProps)(E,U,P)}),[H,A,z,E,U,P])}}({ref:t,...e});return(0,x.jsx)(r,{...y(),children:(0,x.jsxs)(x.Fragment,{children:[v,h&&b]})})});v.displayName="HeroUI.Link";var h=v},86914,e=>{"use strict";e.s(["ButtonGroup",()=>c],86914);var t=e.i(46834),r=e.i(73830),i=e.i(95494),a=e.i(20253),n=e.i(71645),l=e.i(75540),o=e.i(60582),s=e.i(43476),d=(0,r.forwardRef)((e,d)=>{let{Component:c,domRef:u,context:f,children:p,classNames:g,getButtonGroupProps:x}=function(e){var o,s;let d=(0,i.useProviderContext)(),[c,u]=(0,r.mapPropsVariants)(e,t.buttonGroup.variantKeys),{ref:f,as:p,children:g,color:x="default",size:m="md",variant:v="solid",radius:h,isDisabled:b=!1,isIconOnly:y=!1,disableRipple:w=null!=(o=null==d?void 0:d.disableRipple)&&o,disableAnimation:j=null!=(s=null==d?void 0:d.disableAnimation)&&s,className:S,...R}=c,k=(0,a.useDOMRef)(f),N=(0,n.useMemo)(()=>(0,t.buttonGroup)({...u,className:S}),[(0,l.objectToDeps)(u),S]),L=(0,n.useMemo)(()=>({size:m,color:x,variant:v,radius:h,isIconOnly:y,isDisabled:b,disableAnimation:j,disableRipple:w,fullWidth:!!(null==e?void 0:e.fullWidth)}),[m,x,v,h,b,y,j,w,null==e?void 0:e.fullWidth]);return{Component:p||"div",children:g,domRef:k,context:L,classNames:N,getButtonGroupProps:(0,n.useCallback)(()=>({role:"group",...R}),[R])}}({...e,ref:d});return(0,s.jsx)(o.ButtonGroupProvider,{value:f,children:(0,s.jsx)(c,{ref:u,className:g,...x(),children:p})})});d.displayName="HeroUI.ButtonGroup";var c=d},46941,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(43476),r=e.i(22016);function i(e){let{list:i}=e;return(0,t.jsx)("div",{className:"flex flex-col w-full gap-4 py-4",children:i.map((e,i)=>(0,t.jsxs)("div",{className:"flex flex-col w-full items-start bg-slate-200 rounded-md p-1",children:[(0,t.jsx)("div",{className:"text-xl whitespace-pre-wrap",children:e}),(0,t.jsx)("div",{className:"flex flex-row w-full items-end justify-end gap-4",children:(0,t.jsx)(r.default,{className:"text-blue-600 hover:underline",target:"_blank",href:"/card/add?edit=y&content=".concat(encodeURIComponent(e)),children:"Add to Card"})})]},i))})}},79504,e=>{"use strict";e.s(["default",()=>S],79504);var t=e.i(43476),r=e.i(35889),i=e.i(86914),a=e.i(33716),n=e.i(72853),l=e.i(76331),o=e.i(8870),s=e.i(77148),d=e.i(32049),c=e.i(24597),u=e.i(71645),f=e.i(75157),p=e.i(33401),g=e.i(46941),x=e.i(95187),m=(0,x.createServerReference)("60550fc2251f5f04e8433c9762182d9dbc45f4c34c",x.callServer,void 0,x.findSourceMapURL,"getCardTest"),v=(0,x.createServerReference)("40252ef1d9ec9dde84cb5c44eed428871d4f1b2e93",x.callServer,void 0,x.findSourceMapURL,"getCardTestByUUID"),h=(0,x.createServerReference)("40083fd78373932db81731c3ff16c8058f3eb9bace",x.callServer,void 0,x.findSourceMapURL,"getTag"),b=(0,x.createServerReference)("40f289cb15c3783e240a53f07e55cb5430288d22bc",x.callServer,void 0,x.findSourceMapURL,"saveCardReview"),y=e.i(49649),w=e.i(70319),j=(0,x.createServerReference)("409a3ef5cbd3218fda3c63805d45f77cf2c902fd0b",x.callServer,void 0,x.findSourceMapURL,"getExampleByWord");function S(e){let{user_id:x,tag_uuid:S,card_uuid:R}=e,[k,N]=(0,u.useState)(),[L,T]=(0,u.useState)(),[C,B]=(0,u.useState)(!1),[M,P]=(0,u.useState)(!1),[D,F]=(0,u.useState)([]);(0,u.useEffect)(()=>{(async()=>{let e=await h(S);if("success"===e.status&&N(e.data),R){let e=await v(R);"success"===e.status&&T(e.data)}else if(x&&S){let e=await m(x,S);"success"===e.status&&T(e.data)}})()},[R,S,x]);let U=e=>y.FamiliarityList.map(e=>e.color)[e],A=async e=>{if(!L)return;if(x!==L.user_id)return void w.toast.error("this is not your card");let{repetitions:t,interval_days:r,ease_factor:i}=L;r||(r=0),i||(i=0),t||(t=0),e<3?(t=0,r=1):(r=0===t?1:1===t?6:Math.round(r*i),t+=1),(i+=.1-(5-e)*(.08+(5-e)*.02))<1.3&&(i=1.3);let a=new Date;a.setDate(a.getDate()+r),await b({uuid:L.uuid,card_uuid:L.card_uuid,user_id:L.user_id,interval_days:r,ease_factor:i,repetitions:t,familiarity:e,last_review_at:new Date,next_review_at:a})?window.location.reload():w.toast.error("save review error")};return(0,t.jsx)(t.Fragment,{children:L?(0,t.jsxs)("div",{className:"flex flex-col my-5 mx-5",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center justify-center",children:[(0,t.jsxs)("div",{children:["Tag: ",null==k?void 0:k.tag]}),(0,t.jsx)(r.Button,{as:c.Link,target:"_blank",color:"secondary",href:"/card/".concat(L.uuid,"/?edit=y"),children:"EDIT"}),(0,t.jsx)(r.Button,{color:"secondary",onPress:()=>window.location.reload(),children:"NEXT"})]}),(0,t.jsx)("div",{className:"flex flex-row w-full items-center justify-center ".concat(U(L.familiarity)),children:L.card.question.length<30?(0,t.jsx)("div",{className:"my-5 font-bold text-2xl md:text-4xl lg:text-6xl xl:text-8xl",children:(0,t.jsx)("pre",{className:"font-roboto leading-none",children:L.card.question})}):(0,t.jsx)("div",{className:"my-5 font-bold text-base md:text-xl lg:text-2xl xl:text-4xl",children:(0,t.jsx)("pre",{className:"font-roboto leading-none",children:L.card.question})})}),(0,t.jsxs)("div",{className:"flex flex-row my-5 items-center justify-center gap-4",children:[L.card.suggestion.length>0?(0,t.jsx)(r.Button,{color:"primary",variant:"solid",onPress:()=>B(!C),children:C?"hide suggestion":"show suggestion"}):null,(0,t.jsx)(r.Button,{color:"primary",variant:"solid",onPress:()=>P(!M),children:M?"hide answer":"show answer"}),(0,t.jsx)(i.ButtonGroup,{variant:"solid",color:"primary",children:(0,t.jsxs)(a.Dropdown,{placement:"bottom-end",children:[(0,t.jsx)(n.DropdownTrigger,{children:(0,t.jsxs)(r.Button,{children:["feedback ",(0,t.jsx)(p.BiCaretDown,{})]})}),(0,t.jsx)(l.DropdownMenu,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",onSelectionChange:async e=>{e.currentKey&&await A(parseInt(e.currentKey))},children:(0,t.jsx)(d.DropdownSection,{items:y.FamiliarityList,children:y.FamiliarityList.map(e=>(0,t.jsx)(o.DropdownItem,{description:e.description,className:"".concat(U(e.value)),children:"".concat(e.value," - ").concat(e.label)},e.value))})})]})})]}),C?(0,t.jsx)(s.Textarea,{isDisabled:!0,classNames:{input:"text-2xl leading-tight font-roboto"},defaultValue:L.card.suggestion}):null,M?(0,t.jsx)("div",{className:"MD my-1 text-base md:text-xl lg:text-2xl xl:text-4xl leading-tight font-roboto indent-0 whitespace-pre-wrap break-words hyphens-auto",dangerouslySetInnerHTML:{__html:(0,f.getHTML)(L.card.answer)}}):null,M?(0,t.jsx)(s.Textarea,{isDisabled:!0,classNames:{input:"text-2xl leading-tight font-roboto"},defaultValue:L.card.note}):null,L.card.note.indexOf('"lemma":"')>=0&&(0,t.jsx)("div",{className:"flex flex-row gap-4 items-center justify-center",children:(0,t.jsx)(r.Button,{color:"primary",onPress:async()=>{let e=L.card.note.match(/"lemma":"([^"]+)"/);if(e){let t=e[1].trim(),r=await j(t);"success"===r.status&&F(r.data)}},children:"View Examples"})}),D.length>0&&(0,t.jsx)(g.default,{list:D})]}):(0,t.jsx)("div",{children:"no test available"})})}},28101,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),r=e.i(22275),i=e.i(71645),a=e.i(24597);function n(e){let{user_id:n}=e,[l,o]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{if(!n)return;let e=await (0,r.getTagAll)(n);"success"===e.status&&o(e.data)})()},[n]),(0,t.jsxs)("div",{className:"flex flex-col items-start justify-center my-4",children:[(0,t.jsx)("div",{className:"text-2xl",children:"Select a tag as the scope"}),l.map(e=>(0,t.jsxs)(a.Link,{target:"_blank",className:"flex m-4 text-2xl font-bold text-blue-600 hover:underline",href:"/card/test?tag=".concat(e.uuid),children:[e.tag," ",e.description?"(".concat(e.description,")"):""]},e.uuid))]})}}]);